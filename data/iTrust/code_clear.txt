packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import edu.ncsu.csc.itrust.dbutil edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept accessdao queri relat author dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao author andi /public class accessdao daofactori factori constructor param factori link daofactori associ dao use obtain sql connect etc accessdao daofactori factori factori return number minut take session time done use databas hash tabl row globalvari exist insert default valu return int number minut throw dbexcept int getsessiontimeoutmin throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select valu from globalvari where name='timeout resultset rs ps.executequeri return rs.getint valu insertdefaulttimeout conn return catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps set number minut take session param min int specifi number minut throw dbexcept void setsessiontimeoutmin int min throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat globalvari set value= where name='timeout ps.setint min int numupd ps.executeupd numupd valu tabl conn min catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps void insertdefaulttimeout connect conn int min throw sqlexcept preparedstat ps ps conn.preparestat insert into globalvari name valu valu ps.setint min ps.executeupd 
packag edu.ncsu.csc.itrust.act import java.sql.sqlexcept import java.sql.timestamp import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.apptdao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.apptbeanvalid class addapptact apptdao apptdao transactiondao transdao patientdao patientdao personneldao personneldao apptbeanvalid valid apptbeanvalid addapptact daofactori factori this.loggedinmid loggedinmid this.apptdao factory.getapptdao this.transdao factory.gettransactiondao this.patientdao factory.getpatientdao this.personneldao factory.getpersonneldao string addappt apptbean appt throw formvalidationexcept sqlexcept validator.valid appt appt.getd .befor timestamp system.currenttimemilli return date appoint + pass tri appt transdao.logtransact transactiontype.add_appt loggedinmid ad appoint + appt.getappttyp return success + appt.getappttyp + appt.getd + ad catch dbexcept e.printstacktrac return e.getmessag get user name mid param mid mid user return user name throw itrustexcept string getnam throw itrustexcept return patientdao.getnam mid return personneldao.getnam mid 
packag edu.ncsu.csc.itrust.act import edu.ncsu.csc.itrust.randompassword import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.authdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.addpersonnelvalid use add personnel page addpersonnel.jsp add hcp/uap creat password veri link addofficevisitact addpatientact author andi mene copi addhcpact /public class adderespact personneldao personneldao authdao authdao transactiondao transdao set default class param factori factori creat default person log author andi mene adderespact daofactori factori factory.getpersonneldao this.authdao factory.getauthdao this.transdao factory.gettransactiondao this.loggedinmid loggedinmid add event log bean contain inform user return mid user throw formvalidationexcept throw itrustexcept personnelbean throw formvalidationexcept itrustexcept addpersonnelvalid .valid role. p.setmid personneldao.editpersonnel string pwd role. randompassword.getrandompassword p.setpassword pwd transdao.logtransact transactiontype.create_disable_ loggedinmid newmid ad new p.getrol .name return newmid 
packag edu.ncsu.csc.itrust.act import edu.ncsu.csc.itrust.randompassword import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.authdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.addpersonnelvalid use add personnel page addpersonnel.jsp add hcp/uap creat password veri link addofficevisitact addpatientact author andi mene class addhcpact personneldao personneldao authdao authdao transactiondao transdao set default class param factori factori creat default person log author andi mene addhcpact daofactori factori factory.getpersonneldao this.authdao factory.getauthdao this.transdao factory.gettransactiondao this.loggedinmid loggedinmid add event log bean contain inform user return mid user throw formvalidationexcept throw itrustexcept personnelbean throw formvalidationexcept itrustexcept addpersonnelvalid .valid role.hcp p.setmid personneldao.editpersonnel string pwd role.hcp randompassword.getrandompassword p.setpassword pwd //transdao.logtransact transactiontype.create_disable_patient_hcp loggedinmid transdao.logtransact transactiontype.create_disable_patient_hcp loggedinmid newmid ad new hcp return newmid 
packag edu.ncsu.csc.itrust.act import java.util.list import edu.ncsu.csc.itrust.action.base.patientbaseact import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.officevisitdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept use document offic visit page documentofficevisit.jsp add offic visit provid offic visit case want edit offic visit veri link addpatientact author andi mene class addofficevisitact extend patientbaseact daofactori factori officevisitdao ovdao transactiondao transdao set default class param factori param pidstr patient id valid superclass link patientbaseact throw addofficevisitact daofactori factori string pidstr throw itrustexcept factori pidstr factori this.transdao factory.gettransactiondao ovdao factory.getofficevisitdao add offic visit param loggedinmid log purpos return offic visit id offic visit throw dbexcept throw dbexcept officevisitbean ov officevisitbean ov.sethcpid loggedinmid pid ovdao.add transdao.logtransact transactiontype.document_office_visit loggedinmid visit id visitid return visitid list offic visit patient document offic visit return list offic visit throw itrustexcept list officevisitbean getallofficevisit throw itrustexcept return ovdao.getallofficevisit return name patient mid return name form string throw dbexcept throw itrustexcept string getusernam throw dbexcept itrustexcept return .getusernam 
packag edu.ncsu.csc.itrust.act import edu.ncsu.csc.itrust.randompassword import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.authdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.validate.addpatientvalid use add patient page addpatient.jsp add patient creat password patient veri link addofficevisitact author andi mene class addpatientact transactiondao transdao patientdao patientdao authdao authdao loggedinmid just factori log mid factori param loggedinmid addpatientact daofactori factori factory.getpatientdao this.transdao factory.gettransactiondao this.loggedinmid loggedinmid this.authdao factory.getauthdao creat patient return mid add user tabl random password return mid patient throw dbexcept throw formvalidationexcept patientbean throw dbexcept formvalidationexcept addpatientvalid .valid p.setmid string pwd authdao.addus role.pati randompassword.getrandompassword p.setpassword pwd patientdao.editpati transdao.logtransact transactiontype.create_disable_patient_hcp loggedinmid newmid new patient ad return newmid 
packag edu.ncsu.csc.itrust.valid import edu.ncsu.csc.itrust.action.addpatientact import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept valid use addpatientact check name name email author andi /public class addpatientvalid extend beanvalid patientbean default constructor addpatientvalid perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid patientbean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat name p.getfirstnam validationformat.nam errorlist.addifnotnul checkformat name p.getlastnam validationformat.nam errorlist.addifnotnul checkformat email p.getemail validationformat.email errorlist.haserror throw formvalidationexcept errorlist 
packag edu.ncsu.csc.itrust.valid import edu.ncsu.csc.itrust.action.addpatientact import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept valid use addpatientact check name name email author andi /public class addpersonnelvalid extend beanvalid personnelbean default constructor addpersonnelvalid perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid personnelbean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat name p.getfirstnam validationformat.nam errorlist.addifnotnul checkformat name p.getlastnam validationformat.nam errorlist.addifnotnul checkformat email p.getemail validationformat.email errorlist.haserror throw formvalidationexcept errorlist 
packag edu.ncsu.csc.itrust.act import edu.ncsu.csc.itrust.randompassword import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.authdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.addpersonnelvalid use add personnel page addpersonnel.jsp add pha creat password veri link addofficevisitact addpatientact class addphaact personneldao personneldao authdao authdao transactiondao transdao set default class param factori factori creat default person log author andi mene addphaact daofactori factori factory.getpersonneldao this.authdao factory.getauthdao this.transdao factory.gettransactiondao this.loggedinmid loggedinmid add event log bean contain inform user return mid user throw formvalidationexcept throw itrustexcept personnelbean throw formvalidationexcept itrustexcept addpersonnelvalid .valid role.pha p.setmid personneldao.editpersonnel string pwd role.pha randompassword.getrandompassword p.setpassword pwd //transdao.logtransact transactiontype.create_disable_patient_hcp loggedinmid transdao.logtransact transactiontype.create_disable_pha loggedinmid newmid ad new pha return newmid 
packag edu.ncsu.csc.itrust.act import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.authdao import edu.ncsu.csc.itrust.dao.mysql.remotemonitoringdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.remotemonitoringdatabeanvalid handl ad monitor patient data databas class addremotemonitoringdataact remotemonitoringdatabeanvalid valid remotemonitoringdatabeanvalid remotemonitoringdao rmdao transactiondao transdao authdao authdao patientmid constructor param factori daofactori use creat dao use action param loggedinmid mid person record patient data param mid addremotemonitoringdataact daofactori factori loggedinmid this.rmdao factory.getremotemonitoringdao this.transdao factory.gettransactiondao this.authdao factory.getauthdao this.patientmid patientmid add patient remot monitor data databas param glucoselevel throw dbexcept void addremotemonitoringdata int glucoselevel throw dbexcept formvalidationexcept itrustexcept //valid need integ paramet remotemonitoringdatabean remotemonitoringdatabean m.setglucoselevel glucoselevel m.setdiastolicbloodpressur m.setsystolicbloodpressur validator.valid m.setdiastolicbloodpressur m.setsystolicbloodpressur -1 //log transact transdao.logtransact transactiontype.telemedicine_monitor loggedinmid string role loggedinmid == patientmid role loggedinmid .getuserrolesstr .equal role role repres db rmdao.storepatientdata patientmid role loggedinmid add patient remot monitor data databas param systolicbloodpressur param diastolicbloodpressur throw dbexcept void addremotemonitoringdata int systolicbloodpressur int diastolicbloodpressur throw dbexcept formvalidationexcept itrustexcept //valid need integ paramet remotemonitoringdatabean remotemonitoringdatabean m.setsystolicbloodpressur systolicbloodpressur m.setdiastolicbloodpressur diastolicbloodpressur validator.valid transact transdao.logtransact transactiontype.telemedicine_monitor loggedinmid string role loggedinmid == patientmid role loggedinmid .getuserrolesstr .equal role role repres db rmdao.storepatientdata patientmid systolicbloodpressur diastolicbloodpressur role loggedinmid add patient remot monitor data databas param systolicbloodpressur diastolicbloodpressur param glucoselevel throw dbexcept void addremotemonitoringdata int systolicbloodpressur int diastolicbloodpressur int glucoselevel throw dbexcept formvalidationexcept itrustexcept //valid need integ paramet remotemonitoringdatabean remotemonitoringdatabean m.setsystolicbloodpressur systolicbloodpressur m.setdiastolicbloodpressur diastolicbloodpressur m.setglucoselevel glucoselevel validator.valid transact transdao.logtransact transactiontype.telemedicine_monitor loggedinmid string role loggedinmid == patientmid role loggedinmid .getuserrolesstr .equal role role repres db rmdao.storepatientdata patientmid systolicbloodpressur diastolicbloodpressur role loggedinmid return name return name throw dbexcept throw itrustexcept string getpatientnam throw dbexcept itrustexcept return authdao.getusernam 
packag edu.ncsu.csc.itrust.act import edu.ncsu.csc.itrust.randompassword import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.authdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.addpersonnelvalid use add personnel page addpersonnel.jsp add hcp/uap creat password veri link addofficevisitact addpatientact author andi mene class adduapact personneldao personneldao authdao authdao transactiondao transdao set default class param factori factori creat default person log author andi mene adduapact daofactori factori factory.getpersonneldao this.authdao factory.getauthdao this.transdao factory.gettransactiondao this.loggedinmid loggedinmid add event log bean contain inform user return mid user throw formvalidationexcept throw itrustexcept personnelbean throw formvalidationexcept itrustexcept addpersonnelvalid .valid role.uap p.setmid personneldao.editpersonnel string pwd role.uap randompassword.getrandompassword p.setpassword pwd transdao.logtransact transactiontype.create_disable_patient_hcp loggedinmid newmid new uap ad return newmid 
packag edu.ncsu.csc.itrust.bean store data event base drug a bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class adverseeventbean string mid string drug string descript string code string date string statu string prescrib string getprescrib return prescrib setprescrib string prescrib prescrib prescrib string getstatu return statu setstatu string statu this.statu statu int return int getid return id param id set void setid int id id return date string getdat return date param date date set void setdat string date this.dat date string getcod return code setcod string code code return mid string getmid return mid param patient mid void setmid string mid mid mid return drug event report string getdrug drug drug set drug event report setdrug string drug drug return string getdescript return descript param descript descript set setdescript string descript this.descript descript
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.adverseeventbean loader adverseeventbean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class adverseeventbeanload implement beanload adverseeventbean list adverseeventbean loadlist resultset rs throw sqlexcept arraylist adverseeventbean list arraylist adverseeventbean rs.next loadsingl rs return list adverseeventbean loadsingl resultset rs throw sqlexcept adverseeventbean adverseev adverseeventbean adverseevent.setmid rs.getstr patientmid adverseevent.setdrug rs.getstr presimmu adverseevent.setdescript rs.getstr comment adverseevent.setcod rs.getstr code adverseevent.setd rs.gettimestamp timelog .tostr rs.getint id adverseevent.setstatu rs.getstr statu return adverseev preparedstat loadparamet preparedstat ps adverseeventbean bean throw sqlexcept throw illegalstateexcept unimpl 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.text.parseexcept import java.text.simpledateformat import java.util.d import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.adverseeventbeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept import java.sql.timestamp use log mechan dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao author andi /public class adverseeventdao daofactori factori adverseeventbeanload aeload constructor param factori link daofactori associ dao use obtain sql connect etc adverseeventdao daofactori factori factori this.aeload adverseeventbeanload get event report mid param mid mid user look return a java.util.list adverseeventbean throw sqlexcept throw dbexcept /public list adverseeventbean getreportsfor throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from adverseev where patientmid resultset rs ps.executequeri list adverseeventbean aelist rs return aelist catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps add messag databas mbean repres messag ad throw sqlexcept throw dbexcept void addreport adverseeventbean aebean throw dbexcept connect conn preparedstat ps tri factory.getconnect conn.preparestat insert into adverseev patientmid presimmu code comment prescrib statu + valu ps.setstr ps.setstr ps.setstr ps.setstr aebean.getdescript ps.setstr activ ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps int id throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from adverseev where id= resultset rs ps.executequeri hcpmid prescrib return catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps adverseeventbean getreport int id throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from adverseev where id= resultset rs ps.executequeri list adverseeventbean aelist rs return aelist.get catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps removereport int id throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat adverseev statu where id string remov remov ps.setstr remov ps.setint id ps.executeupd dbutil.getlastinsert conn return catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps list adverseeventbean getunremovedadverseeventsbycod string code throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from adverseev where code= and status= ps.setstr code ps.setstr resultset rs rs ps.executequeri return aeloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps string getnameforcod string code throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select presimmu from adverseev where code= ps.setstr code resultset rs rs ps.executequeri rs.next return rs.getstr presimmu return name found catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps list adverseeventbean getperscript string start string end throw parseexcept dbexcept connect conn preparedstat ps tri simpledateformat fmt simpledateformat mm/dd/yyi date begin start date end end conn factory.getconnect //and ndcodes.code=adverseevents.cod ps conn.preparestat select from adverseev ndcode where adverseevents.timelog and adverseevents.timelog and ndcodes.code=adverseevents.cod order by adverseevents.cod adverseevents.timelog desc ps.settimestamp timestamp beginning.gettim ps.settimestamp timestamp ending.gettim + resultset rs ps.executequeri list adverseeventbean aelist rs return aelist catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps list adverseeventbean getimmun string start string end throw parseexcept dbexcept connect conn preparedstat ps tri simpledateformat fmt simpledateformat mm/dd/yyi date begin start date end end conn factory.getconnect //and ndcodes.code=adverseevents.cod ps conn.preparestat select from adverseev cptcode where adverseevents.timelog and adverseevents.timelog and cptcodes.code=adverseevents.cod order by adverseevents.cod adverseevents.timelog desc ps.settimestamp timestamp beginning.gettim ps.settimestamp timestamp ending.gettim + resultset rs ps.executequeri list adverseeventbean aelist rs return aelist catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.chart import import java.text.parseexcept import java.text.simpledateformat import java.util.calendar import java.util.d import java.util.linkedlist import java.util.list import java.util.map import org.jfree.data.category.categorydataset import org.jfree.data.category.defaultcategorydataset import de.laures.cewolf.datasetproduceexcept import de.laures.cewolf.datasetproduc import de.laures.cewolf.links.categoryitemlinkgener import de.laures.cewolf.tooltips.categorytooltipgener import edu.ncsu.csc.itrust.beans.adverseeventbean class handl data chart cewolf/jfreechart class implement datasetproduc categorytooltipgener categoryitemlinkgener serializ author jason /public class adverseeventsdata implement datasetproduc categorytooltipgener categoryitemlinkgener serializ gener id long serialversionuid hardcod month make implement simpler advers event chart string month jan feb mar apr may june juli aug sept oct nov dec initi valu month int valu event list adverseeventbean adverseev linkedlist adverseeventbean name prescript immun analysi string codenam call jsp page list advers event need produc desir param adev param void setadverseeventslist list adverseeventbean adev string name adverseev adev this.codenam name pars advers event bean initi chart dataset suppresswarn object producedataset map param throw datasetproduceexcept defaultcategorydataset use bar chart dataset class chang base chart produc defaultcategorydataset dataset defaultcategorydataset gener id long serialversionuid -8238489914590553747l see final protect final throw throwabl super.fin simpledateformat simpledateformat hh mm ss advers event list pars string repreent report date java date object get month date object increment valu count month adverseeventbean event adverseev calendar calendar.getinst tri sdf.pars event.getd catch parseexcept e e.printstacktrac throw datasetproduceexcept e.getmessag int monthofreport cal.get calendar.month valu monthofreport ++ month add valu dataset produc chart int i++ valu repres number event month codenam repres given prescription/immun analyz month array month name use label dataset.addvalu valu codenam month return produc data invalid second method produc influenc cewolf cach way want suppresswarn boolean hasexpir map param date return system.currenttimemilli since.gettim return id datasetproduc string getproducerid return adverseeventsdata datasetproduc return link target data item string generatelink object data int seri object categori month seri see final protect final throw throwabl super.fin see categorydataset int int string generatetooltip categorydataset arg0 int seri int return month seri 
packag edu.ncsu.csc.itrust.valid import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept valid event bean link adverseeventact class adverseeventvalid extend beanvalid adverseeventbean default constructor adverseeventvalid perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid adverseeventbean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat comment b.getdescript validationformat.adverse_event_com errorlist.haserror throw formvalidationexcept errorlist 
packag edu.ncsu.csc.itrust.risk.factor import edu.ncsu.csc.itrust.beans.patientbean risk factor associ check person age see link patientriskfactor detail method andi /public class agefactor extend patientriskfactor patientbean patient int age agefactor patientbean patient int age age this.pati patient string getdescript return patient age hasfactor return patient.getag age 
packag edu.ncsu.csc.itrust.bean java.text.simpledateformat import java.util.d a bean store data allergi a bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class allergybean patientid string descript date firstfound allergybean string getdescript return descript setdescript string descript this.descript descript date getfirstfound return date firstfound.clon void setfirstfound date firstfound firstfound this.firstfound date firstfound.clon return id setid id string tostr return this.descript return patientid setpatientid patientid string getfirstfoundstr tri return simpledateformat mm/dd/yyyy .format getfirstfound catch except e e.printstacktrac return
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.allergybean loader allergybean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class allergybeanload implement beanload allergybean list allergybean loadlist resultset rs throw sqlexcept arraylist allergybean list arraylist allergybean rs.next loadsingl rs return list allergybean loadsingl resultset rs throw sqlexcept allergybean allergi allergybean allergy.setid rs.getlong id allergy.setpatientid patientid allergy.setdescript rs.getstr descript allergy.setfirstfound rs.gettimestamp firstfound return allergi preparedstat loadparamet preparedstat ps allergybean bean throw sqlexcept throw illegalstateexcept unimpl 
packag edu.ncsu.csc.itrust.valid import edu.ncsu.csc.itrust.action.editofficevisitact import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept valid use valid ad link editofficevisitact author andi /public class allergybeanvalid extend beanvalid allergybean default constructor allergybeanvalid perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid allergybean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat allergi descript m.getdescript validationformat.allergy_descript errorlist.haserror throw formvalidationexcept errorlist 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.allergybeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao author andi /public class allergydao daofactori factori allergybeanload allergybeanload allergybeanload constructor param factori link daofactori associ dao use obtain sql connect etc allergydao daofactori factori factori return patient allergi param a mid patient look return a java.util.list allergybean associ throw dbexcept list allergybean getallergi throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from allergi where patientid= order by firstfound desc resultset rs ps.executequeri return allergybeanloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps add patient list param pid mid patient ad descript name allergen throw dbexcept void addallergi string descript throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into allergi patientid descript valu ps.setstr descript ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.bean java.sql.timestamp class apptbean string appttyp hcp timestamp date string comment return string getappttyp return appttyp param appttyp set void setappttyp string appttyp appttyp return return patient patient set setpati patient return return hcp param hcp set void sethcp hcp return date timestamp getdat return date param date date set void setdat timestamp date this.dat date return string getcom return comment comment set setcom string comment comment 
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import class apptbeanload implement beanload apptbean list apptbean loadlist resultset rs throw sqlexcept list apptbean list arraylist apptbean rs.next list.add loadsingl rs return list preparedstat loadparamet preparedstat ps apptbean bean throw sqlexcept ps.setstr bean.getappttyp bean.getpati bean.gethcp ps.settimestamp bean.getd ps.setstr return ps apptbean loadsingl resultset rs throw sqlexcept apptbean bean apptbean bean.setappttyp rs.getstr appt_typ bean.setpati patient_id bean.sethcp doctor_id bean.setd rs.gettimestamp sched_dat bean.setcom rs.getstr comment return bean 
packag edu.ncsu.csc.itrust.valid import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept class apptbeanvalid extend beanvalid apptbean void valid apptbean bean throw formvalidationexcept errorlist errorlist errorlist bean.getcom == return checkformat comment validationformat.appt_com errorlist.haserror throw formvalidationexcept errorlist 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.apptbeanload import class apptdao daofactori factori apptbeanload abload public apptdao daofactori factori factori this.abload apptbeanload list apptbean getapptsfor throw sqlexcept connect conn preparedstat ps null conn factory.getconnect mid ps conn.preparestat select from appoint where doctor_id= order by sched_dat ps conn.preparestat select from appoint where patient_id= order by sched_dat resultset rs ps.executequeri list apptbean ablist this.abloader.loadlist rs dbutil.closeconnect conn ps return list apptbean getallappt throw sqlexcept connect conn preparedstat ps null conn factory.getconnect conn.preparestat select from appoint resultset rs list apptbean ablist this.abloader.loadlist rs dbutil.closeconnect conn ps return scheduleappt apptbean appt throw sqlexcept connect conn preparedstat ps null conn factory.getconnect conn.preparestat insert into appoint appt_typ patient_id doctor_id comment valu ps this.abloader.loadparamet ps ps.executeupd dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.bean class appttypebean string name int durat appttypebean this.dur appttypebean string name int durat this.nam name this.dur durat string getnam return name setnam string name this.nam name int getdur return durat setdur int durat this.dur durat 
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import class appttypebeanload implement beanload appttypebean list appttypebean loadlist resultset rs throw sqlexcept list appttypebean list arraylist appttypebean rs.next list.add loadsingl rs return list preparedstat loadparamet preparedstat ps appttypebean appttyp throw sqlexcept ps.setstr appttype.getdur return ps appttypebean loadsingl resultset rs throw sqlexcept appttypebean appttyp appttypebean appttype.setnam rs.getstr appt_typ appttype.setdur rs.getint durat return appttyp 
packag edu.ncsu.csc.itrust.valid import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept class appttypebeanvalid extend beanvalid appttypebean overrid void valid appttypebean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat appoint type name a.getnam validationformat.appt_type_nam errorlist.addifnotnul checkformat appoint type durat a.getdur validationformat.appt_type_dur errorlist.haserror throw formvalidationexcept errorlist 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.appttypebeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept class appttypedao daofactori factori appttypebeanload atload public appttypedao daofactori factori factori this.atload appttypebeanload list appttypebean getappttyp throw sqlexcept connect conn preparedstat ps null conn factory.getconnect conn.preparestat select from appointmenttyp resultset rs list appttypebean atlist this.atloader.loadlist rs dbutil.closeconnect conn ps return addappttyp appttypebean appttyp throw sqlexcept connect conn preparedstat ps null conn factory.getconnect conn.preparestat insert into appointmenttyp appt_typ durat valu this.atloader.loadparamet ps int x ps.executeupd dbutil.closeconnect conn ps x return return editappttyp appttypebean appttyp throw sqlexcept dbexcept connect conn preparedstat ps null conn factory.getconnect conn.preparestat updat appointmenttyp set duration= where appt_type= appttype.getdur ps.setstr int x ps.executeupd dbutil.closeconnect conn ps x return return 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.randompassword import edu.ncsu.csc.itrust.dao.daofactori import import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept authdao anyth authent most method access user dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao author andi /public class authdao long login_timeout daofactori factori constructor param factori link daofactori associ dao use obtain sql connect etc authdao daofactori factori factori add user system doe add inform patient hcp initi set secur question random set charact nobodi guess valu param mid user mid long param role role role enum role param password return a string repres ad password throw dbexcept string addus long role role string password throw dbexcept connect conn preparedstat pstmt tri factory.getconnect pstmt conn .preparestat insert into user mid password role squestion sanswer valu mid pstmt.setstr password pstmt.setstr role.tostr pstmt.setstr enter random password given account string pwd randompassword.getrandompassword pstmt.setstr pstmt.executeupd return pwd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn pstmt reset secur question user param question secur question string param secur answer string param mid mid user throw dbexcept void setsecurityquestionansw string question string answer throw dbexcept connect conn preparedstat pstmt tri factory.getconnect pstmt conn.preparestat user set squestion sanswer where mid pstmt.setstr question pstmt.setstr answer pstmt.setlong mid pstmt.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn pstmt return name user mid param mid mid user get name return user name string throw dbexcept throw itrustexcept string getusernam throw dbexcept itrustexcept role getuserrol switch role case hcp case pha case admin case uap case er return factory.getpersonneldao .getnam mid case patient return factory.getpatientdao .getnam mid case tester return string.valueof mid default throw itrustexcept role role return role mid param mid mid look return link role enum throw dbexcept throw itrustexcept role getuserrol throw dbexcept itrustexcept connect conn preparedstat pstmt tri factory.getconnect pstmt conn.preparestat select role from user where mid= resultset rs rs pstmt.executequeri rs.next return role.pars rs.getstr role throw itrustexcept user exist catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn pstmt chang password user param mid mid user password chang param password password throw dbexcept void resetpassword string password throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat user set password= where mid= ps.setstr password ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return secur question user param mid mid user look return secur question look throw itrustexcept string getsecurityquest throw itrustexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select squestion from user where mid= mid resultset r ps.executequeri return r.getstr squestion throw itrustexcept secur question set mid + mid catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return secur answer user param mid mid user look return secur answer string throw itrustexcept string getsecurityansw throw itrustexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select sanswer from user where mid= mid resultset r ps.executequeri return r.getstr throw itrustexcept secur answer set mid + mid catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps record login failur blacklist use databas hash tabl user ip address user ip address tabl row ad param ipaddr ip address user string throw dbexcept void recordloginfailur string ipaddr throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn .preparestat loginfailur set failurecount=failurecount+1 lastfailure=current_timestamp where ipaddress= insert into loginfailur valu ps.setstr failur //ps.setdat calendar.getinst int numupd ps.executeupd numupd row begin ipaddr conn row strike catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps record reset password failur blacklist use databas hash tabl user ip address user ip address tabl row ad param ipaddr ip address user string throw dbexcept void recordresetpasswordfailur string ipaddr throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn .preparestat resetpasswordfailur set failurecount=failurecount+1 where ipaddress= ps.setstr int numupd ps.executeupd numupd row begin ipaddr conn row strike catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return number failur reset password given ip param ipaddr ip address associ string return int repres number failur throw dbexcept int getresetpasswordfailur string ipaddr throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from resetpasswordfailur where ipaddress= ps.setstr resultset rs ps.executequeri rs.next 're x minut failur count system.currenttimemilli rs.gettimestamp lastfailur login_timeout ipaddr conn return return rs.getint failurecount ipaddr conn return catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return number failur login failur password given ip param ipaddr ip address attempt string return int repres number failur occur throw dbexcept int getloginfailur string ipaddr throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from loginfailur where ipaddress= ps.setstr resultset rs ps.executequeri rs.next 're x minut failur count system.currenttimemilli rs.gettimestamp lastfailur login_timeout ipaddr conn return return rs.getint failurecount ipaddr conn return catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps insertloginfailurerow string int failurecount connect conn throw dbexcept sqlexcept preparedstat conn insert into loginfailur ipaddress failurecount valu ps.setstr ps.setint failurecount ps.executeupd insertresetpasswordrow string int failurecount connect conn throw dbexcept sqlexcept preparedstat conn insert into resetpasswordfailur ipaddress failurecount valu ps.setstr ps.setint failurecount ps.executeupd updatefailurestozero string ipaddr connect conn throw dbexcept sqlexcept preparedstat conn loginfailur set failurecount=0 where ipaddress= ps.setstr ps.executeupd void resetloginfailurestozero string ipaddr throw dbexcept sqlexcept connect conn preparedstat ps tri factory.getconnect ps conn .preparestat loginfailur set failurecount=0 where ipaddress= ps.setstr ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps updateresetfailurestozero string ipaddr connect conn throw dbexcept sqlexcept preparedstat conn resetpasswordfailur set failurecount=0 where ipaddress= ps.setstr ps.executeupd check user exist mid return throw dbexcept boolean checkuserexist throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from user where mid= resultset rs ps.executequeri return rs.next catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag import java.beans.introspector import java.beans.propertydescriptor import java.lang.reflect.method import java.util.hashmap import java.util.map take paramet map creat map type param t type return paramet map class beanbuild t code method need rewrit bug found request.getparametermap hashmap param bean load load bean return return load throw except except thrown promot seem warn suppress map parameter jsp suppresswarn t build map map t bean throw except javabean overload method accord api limit nevertheless check checkoverloadedmethod bean use introspector find setxxx want setxxx propertydescriptor propertydescriptor introspector.getbeaninfo bean.getclass .getpropertydescriptor propertydescriptor descriptor propertydescriptor null ignor go bean default string valu string map.get descriptor.getnam method writemethod descriptor.getwritemethod class .equal descriptor.getnam valu writemethod null descriptor name properti firstnam take string tri skip setter enumer writemethod.getparametertyp .getenumconst writemethod.invok object valu catch illegalargumentexcept throw except throw illegalargumentexcept e.getmessag + writemethod.getnam + valu return check overload method item check void checkoverloadedmethod t bean method method bean.getclass .getdeclaredmethod hashmap string string hashmap string string methods.length method method method namemap.get method.getnam throw illegalargumentexcept bean.getclass .getnam + overload method method.getnam equal .equal method.getnam equal namemap.put method.getnam exist 
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.list interfac help enforc paradigm contain type t specifi loader extact result set param t a bean load class interfac beanload t load list bean type t result set typic make iter call param rs java.sql.resultset extract return a java.util.list t t type loader throw sqlexcept list t loadlist resultset rs throw sqlexcept contain instruct map row java.sql.resultset bean type t param rs java.sql.resultset load return bean type t contain load inform item result set throw sqlexcept t loadsingl resultset rs throw sqlexcept use method contain instruct map field type t prepar statement modifi appropri param ps statement load bean contain data place return a statement load paramet throw sqlexcept preparedstat loadparamet preparedstat ps t bean throw sqlexcept 
packag edu.ncsu.csc.itrust.valid import edu.ncsu.csc.itrust.enums.gend import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept abstract class use valid provid util method check format field specifi bean valid author andi param t type valid class beanvalid t void valid t bean throw formvalidationexcept check format given check string java null otherwis error messag return use conjunct errorlist param name valu param param return protect string checkformat string name string valu validationformat boolean string errormessag name + format.getdescript valu == || .equal valu return errormessag format.getregex valu .match return return errormessag check valu format check java null otherwis error messag return use conjunct errorlist param name param format param return protect string checkformat string name long longvalu validationformat format boolean string str str string.valueof longvalu return name format check format given check java otherwis error messag return use conjunct errorlist param name doublevalu param format param return protect string checkformat string name doubl doublevalu validationformat format boolean string str str string.valueof doublevalu return name format check gender param name param gen param format param return protect string checkgend string name gender gen validationformat format boolean string str gen str gen.tostr return checkformat name format format correct rang param name valu param param param return protect string checkint string name string valu int int boolean valu == || .equal valu return tri int intvalu integer.valueof valu return catch numberformatexcept fall return messag return name + integ + + + check format correct rang param name valu param param return protect string string name string valu tri doublevalu double.valueof valu return catch numberformatexcept fall return messag return name + decim + + + check valu fit param name valu return protect string string name string valu .equal valu || .equal valu return return name 'true 
packag edu.ncsu.csc.itrust.enum blood type author andi /public enum bloodtyp apo a+ aneg a- bpo b+ bneg b- abpo ab+ abneg ab- opo o+ oneg o- ns n/ string name bloodtyp string name this.nam name string getnam return name overrid string tostr return getnam bloodtyp pars string bloodtypestr bloodtyp type bloodtype.valu type.getnam .equal bloodtypestr return type return ns 
packag edu.ncsu.csc.itrust.act import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.accessdao edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept use chang session note chang timeout get reflect session author andi mene class changesessiontimeoutact accessdao accessdao set defualt factori author andi mene changesessiontimeoutact daofactori factori factory.getaccessdao chang session timeout complic dao link accessdao param minutestr pass number minut form string throw formvalidationexcept throw dbexcept author andi mene void changesessiontimeout string minutestr throw formvalidationexcept dbexcept tri integ minut integer.valueof minutestr minut throw formvalidationexcept must number accessdao.setsessiontimeoutmin minut catch numberformatexcept throw formvalidationexcept number return session timeout minut reflect return number minut take session timeout throw dbexcept author andi mene int getsessiontimeout throw dbexcept return accessdao.getsessiontimeoutmin 
packag edu.ncsu.csc.itrust.risk.factor import import edu.ncsu.csc.itrust.exception.dbexcept check patient given diagnos childhood see link patientriskfactor detail method andi /public class childhoodinfectionfactor extend patientriskfactor doubl icdcod daofactori factori childhoodinfectionfactor daofactori factori icdcod factori this.patientid mid this.icdcod string getdescript return infect childhood increas risk dieseas hasfactor tri return .hadchildhoodinfect patientid icdcod catch dbexcept system.err.println dbexcept childhood infect risk give risk return 
packag edu.ncsu.csc.itrust.risk.factor import edu.ncsu.csc.itrust.beans.healthrecord check cholesterol given given see link patientriskfactor detail method andi /public class cholesterolfactor extend patientriskfactor int hdlthreshold int ldlthreshold int trithreshold healthrecord record public cholesterolfactor healthrecord currenthealthrecord this.record currenthealthrecord string getdescript return patient cholesterol hasfactor return record.getcholesterolhdl hdlthreshold || record.getcholesterolldl ldlthreshold || record.getcholesteroltri trithreshold 
packag import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.nohealthrecordsexcept figur risk checker strategi use author andi /public class chronicdiseasemedi list riskcheck riskcheck given factori patient id set list risk checker param factori daofactori use creat dao perform check param mid question throw dbexcept throw nohealthrecordsexcept chronicdiseasemedi daofactori factori throw dbexcept nohealthrecordsexcept riskcheck arraylist riskcheck riskcheckers.add heartdiseaserisk factori riskcheckers.add type1diabetesrisk factori riskcheckers.add type2diabetesrisk factori pid return list diseas risk list riskcheck getdiseaseatrisk list riskcheck diseas arraylist riskcheck riskcheck diseasecheck riskcheck diseasechecker.isatrisk diseases.add diseasecheck return diseas 
packag edu.ncsu.csc.itrust.act import java.util.list import edu.ncsu.csc.itrust.action.base.patientbaseact import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.authdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.nohealthrecordsexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.risk.chronicdiseasemedi import edu.ncsu.csc.itrust.risk.riskcheck use chronicdiseaserisks.jsp pass logic link chronicdiseasemedi subclass link riskcheck author andi mene class chronicdiseaseriskact extend patientbaseact authdao authdao chronicdiseasemedi diseasemedi transactiondao transdao param factori param loggedinmid param pidstr patient id valid throw itrustexcept throw dbexcept throw nohealthrecordsexcept patient ad health record check tri except event author andi mene chronicdiseaseriskact daofactori factori string pidstr throw itrustexcept dbexcept nohealthrecordsexcept factori pidstr factory.getauthdao this.transdao factory.gettransactiondao this.loggedinmid loggedinmid this.diseasemedi chronicdiseasemedi factori pid return id patient check id risk check author andi mene return give name return full name patient check throw dbexcept throw itrustexcept author andi mene string getusernam throw dbexcept itrustexcept return authdao.getusernam return risk risk all logic pass link chronicdiseasemedi subclass link riskcheck return risk throw itrustexcept throw dbexcept author andi mene list riskcheck getdiseasesatrisk throw itrustexcept dbexcept transdao.logtransact transactiontype.identify_risk_factor loggedinmid return diseasemediator.getdiseaseatrisk 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.procedurebeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept use manag cpt code dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao cpt code set diagnost servic design inform servic procedur physician coder patient accredit organ payer purpos see author andi /public class cptcodesdao daofactori factori procedurebeanload procedurebeanload procedurebeanload constructor param factori link daofactori associ dao use obtain sql connect etc cptcodesdao daofactori factori factori return list cpt code return java.util.list procedurebean cpt code throw dbexcept list procedurebean getallcptcod throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from cptcode order by code resultset rs ps.executequeri return procedurebeanloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return list cpt code return java.util.list cpt code throw dbexcept list procedurebean getimmunizationcptcod throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat cptcode attribute='immun order code resultset rs ps.executequeri return procedurebeanloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return procedur descript code param code string represent code return descript code throw dbexcept procedurebean getcptcod string code throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from cptcode where code ps.setstr code resultset rs ps.executequeri return procedurebeanloader.loadsingl rs return catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps add cpt code return ad proc procedurebean repres code inform return oper throw dbexcept throw itrustexcept addcptcod procedurebean proc throw dbexcept itrustexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into cptcode code descript attribut + valu ps.setstr proc.getcptcod ps.setstr proc.getdescript ps.setstr return == ps.executeupd catch sqlexcept e e.printstacktrac == e.geterrorcod throw itrustexcept error code exist throw dbexcept e dbutil.closeconnect conn ps chang procedur descript cpt code param proc procedurebean repres code inform return oper throw dbexcept int procedurebean proc throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat updat cptcode set descript attribut where code ps.setstr proc.getdescript ps.setstr ps.setstr return ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag import java.sql.connect import java.sql.sqlexcept import edu.ncsu.csc.itrust.dao.mysql.accessdao import edu.ncsu.csc.itrust.dao.mysql.adverseeventdao import edu.ncsu.csc.itrust.dao.mysql.allergydao import edu.ncsu.csc.itrust.dao.mysql.apptdao import edu.ncsu.csc.itrust.dao.mysql.appttypedao import edu.ncsu.csc.itrust.dao.mysql.authdao import edu.ncsu.csc.itrust.dao.mysql.cptcodesdao import edu.ncsu.csc.itrust.dao.mysql.druginteractiondao import edu.ncsu.csc.itrust.dao.mysql.fakeemaildao import edu.ncsu.csc.itrust.dao.mysql.familydao import edu.ncsu.csc.itrust.dao.mysql.healthrecordsdao import edu.ncsu.csc.itrust.dao.mysql.hospitalsdao import edu.ncsu.csc.itrust.dao.mysql.icdcodesdao import edu.ncsu.csc.itrust.dao.mysql.loincdao import edu.ncsu.csc.itrust.dao.mysql.labproceduredao import edu.ncsu.csc.itrust.dao.mysql.messagedao import edu.ncsu.csc.itrust.dao.mysql.ndcodesdao import edu.ncsu.csc.itrust.dao.mysql.officevisitdao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.referraldao import edu.ncsu.csc.itrust.dao.mysql.remotemonitoringdao import edu.ncsu.csc.itrust.dao.mysql.reportrequestdao import edu.ncsu.csc.itrust.dao.mysql.riskdao import edu.ncsu.csc.itrust.dao.mysql.surveydao import edu.ncsu.csc.itrust.dao.mysql.surveyresultdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.dao.mysql.visitremindersdao import edu.ncsu.csc.itrust.testutils.evildaofactori import edu.ncsu.csc.itrust.testutils.testdaofactori mediat databas access object product instanc use connect pool provid tomcat use product instanc stuff jsp code product test instanc pars context.xml get jdbc connect see link evildaofactori see link testdaofactori ani dao ad system class way dao author andi /public class daofactori daofactori productioninst iconnectiondriv return product instanc daofactori use tomcat daofactori getproductioninst productioninst == null productioninst daofactori return productioninst protect daofactori this.driv productionconnectiondriv connect getconnect throw sqlexcept return driver.getconnect accessdao getaccessdao return accessdao allergydao getallergydao return allergydao apptdao getapptdao return apptdao appttypedao getappttypedao return appttypedao authdao getauthdao return authdao cptcodesdao getcptcodesdao return cptcodesdao druginteractiondao getdruginteractiondao return druginteractiondao familydao getfamilydao return familydao healthrecordsdao gethealthrecordsdao return healthrecordsdao hospitalsdao gethospitalsdao return hospitalsdao icdcodesdao geticdcodesdao return icdcodesdao ndcodesdao getndcodesdao return ndcodesdao officevisitdao getofficevisitdao return officevisitdao patientdao getpatientdao return patientdao personneldao getpersonneldao return personneldao referraldao getreferraldao return referraldao riskdao getriskdao return riskdao transactiondao gettransactiondao return transactiondao visitremindersdao getvisitremindersdao return visitremindersdao fakeemaildao getfakeemaildao return fakeemaildao reportrequestdao getreportrequestdao return reportrequestdao surveydao getsurveydao return surveydao labproceduredao getlabproceduredao return labproceduredao loincdao getloincdao return loincdao surveyresultdao getsurveyresultdao return surveyresultdao messagedao getmessagedao return messagedao adverseeventdao getadverseeventdao return adverseeventdao remotemonitoringdao getremotemonitoringdao return remotemonitoringdao 
packag import java.text.simpledateformat import java.util.calendar import java.util.d import java.util.gregoriancalendar provid date util author andi /public class dateutil long year_in_m return mm/dd/yyyy format date given year param year return string yearsago year time system.currenttimemilli return simpledateformat mm/dd/yyyy .format date time year year_in_m check see given date month inclus /strong year br rang wrap month month definit month rang br date fall includ modular arithmet use month valu rang param date param return boolean isinmonthrang java.util.d date int int secondmonth calendar gregoriancalendar cal.settim date firstmonth return cal.get calendar.month cal.get calendar.month secondmonth return calendar.month firstmonth || cal.get calendar.month secondmonth same use date date valu see dateutil isinmonthrang date int int param return boolean currentlyinmonthrang int int return date secondmonth return date number year param year year return date year date getdatexyearsagofromnow int year calendar gregoriancalendar cal.add calendar.year -year return cal.gettim return date number year param year year return date year java.sql.d getsqldatexyearsagofromnow int year return java.sql.d getdatexyearsagofromnow year return date number day param day day return date day date getdatexdaysagofromnow int day calendar gregoriancalendar cal.add calendar.day_of_year -day return cal.gettim return date number day param day day return date day java.sql.d getsqldatexdaysagofromnow int day return java.sql.d getdatexdaysagofromnow day .gettim pass instanti sql date object set rang ie from year yearsago1/monthvalue1/01 to year yearsago2/monthvalue2/ day month2 pass instanti sql date object set rang ie from lt year gt yearsago1/monthvalue1/01 to lt year gt yearsago2/monthvalue2/ lt day month2 param month1 first sql.date object set param monthvalue1 param yearsago1 param second sql.date object set param monthvalue2 param yearsago2 void setsqlmonthrang java.sql.d month1 int monthvalue1 int yearsago1 java.sql.d month2 int monthvalue2 int yearsago2 gregoriancalendar gregoriancalendar cal.add calendar.year -yearsago1 cal.set calendar.month monthvalue1 cal.set calendar.day_of_month month1.settim cal.gettimeinmilli cal.add calendar.year yearsago1 cal.add calendar.year -yearsago2 cal.set calendar.month monthvalue2 cal.set calendar.day_of_month calendar.day_of_month month2.settim cal.gettimeinmilli 
packag edu.ncsu.csc.itrust.except import java.sql.sqlexcept reason except secur sql except get way jsp begin reveal detail databas know mysql so make except vagu descript keep track sql except debug test purpos author andi /public class dbexcept extend itrustexcept long serialversionuid -6554118510590118376l sqlexcept sqlexcept null dbexcept sqlexcept a databas except occur pleas see stacktrac this.sqlexcept e return sql except error sqlexcept getsqlexcept return sqlexcept overrid string getextendedmessag sqlexcept sqlexception.getmessag super.getextendedmessag 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import edu.ncsu.csc.itrust.dao.daofactori provid databas utilti author andi /public class dbutil use check obtain connect return boolean canobtainproductioninst tri daofactory.getproductioninst .getconnect .close return catch sqlexcept system.out.println return close statement connect way param conn param ps void closeconnect connect conn preparedstat ps tri ps conn null conn.clos catch sqlexcept e system.err.println error close connect e.printstacktrac return id gener column pleas note not caus transact problem last_insert_id return id basi see mysql document follow locat confirm link http do believ see link autoincrementtest param return gener throw sqlexcept connect conn throw sqlexcept resultset rs .executequeri select last_insert_id rs.next return 
packag edu.ncsu.csc.itrust.act import java.util.list import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.authdao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.itrustexcept use patient declar hcp design author andi mene class declarehcpact transactiondao transdao patientdao patientdao authdao authdao set default factori dao factori use gener dao action param loggedinmid patient author andi mene declarehcpact daofactori factori this.loggedinmid loggedinmid this.transdao factory.gettransactiondao this.patientdao factory.getpatientdao this.authdao factory.getauthdao list hcp patient return return list declar hcp throw itrustexcept author andi mene list personnelbean getdeclaredhcp throw itrustexcept return patientdao.getdeclaredhcp loggedinmid valid hcp mid declar param hcpstr mid hcp declar return statu messag throw itrustexcept author andi mene string declarehcp string hcpstr throw itrustexcept tri hcpid long.valueof hcpstr authdao.getuserrol hcpid role.hcp throw itrustexcept user licens confirm patientdao.declarehcp loggedinmid hcpid confirm transdao.logtransact transactiontype.declare_hcp loggedinmid hcpid patient declar hcp return hcp declar return hcp declar catch numberformatexcept throw itrustexcept hcp mid number valid hcp mid undeclar param input mid hcp return throw itrustexcept author andi mene string undeclarehcp string input throw itrustexcept tri hcpid long.valueof input boolean confirm patientdao.undeclarehcp loggedinmid hcpid confirm transdao.logtransact transactiontype.declare_hcp loggedinmid hcpid patient undeclar hcp return hcp undeclar return hcp catch numberformatexcept throw itrustexcept hcp mid number 
packag edu.ncsu.csc.itrust.bean store data diagnosi a bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class diagnosisbean string icdcod string descript string classif diagnosisbean function move diagnosisbean string code string descript string classif code this.descript descript classif classification.equ this.classif classif this.classif get icd code procedur return icd code procedur string geticdcod return icdcod seticdcod string code code string getclassif return classif get icd descript procedur return icd descript procedur string getdescript return descript setdescript string descript this.descript descript string getformatteddescript return descript icdcod + option use edit offic visit return return setovdiagnosisid ovdiagnosisid setvisitid visitid vid return visitid
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.diagnosisbean loader diagnosisbean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class diagnosisbeanload implement beanload diagnosisbean boolean loadovdiagnosisid diagnosisbeanload loadovdiagnosisid diagnosisbeanload boolean loadovdiagnosisid loadovdiagnosisid list diagnosisbean loadlist resultset rs throw sqlexcept arraylist diagnosisbean list arraylist diagnosisbean rs.next loadsingl rs return list diagnosisbean loadsingl resultset rs throw sqlexcept diagnosisbean diag diagnosisbean rs.getstr code rs.getstr descript rs.getstr chronic loadovdiagnosisid rs.getint id diag.setvisitid visitid return preparedstat loadparamet preparedstat ps diagnosisbean bean throw sqlexcept throw illegalstateexcept unimpl 
packag edu.ncsu.csc.itrust.valid import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept valid icd9cm code author andi /public class diagnosisbeanvalid extend beanvalid diagnosisbean default constructor diagnosisbeanvalid perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid diagnosisbean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat icd9cm code d.geticdcod validationformat.icd9cm errorlist.addifnotnul checkformat descript d.getdescript validationformat.icd_code_descript errorlist.haserror throw formvalidationexcept errorlist 
packag edu.ncsu.csc.itrust.act import java.util.list import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.druginteractiondao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.druginteractionvalid use editdruginteraction.jsp edit get inform drug interact class druginteractionact druginteractiondao drugdao transactiondao trandao druginteractionvalid valid set default factori dao factori use gener dao action druginteractionact daofactori factori factory.getdruginteractiondao this.trandao factory.gettransactiondao this.valid druginteractionvalid this.loggedinmid loggedinmid method report interact seconddrug param descript return string reportinteract string firstdrug string seconddrug string descript throw itrustexcept formvalidationexcept firstdrug.equ seconddrug return interact record drug druginteractionbean drugint druginteractionbean drugint.setfirstdrug seconddrug drugint.setdescript descript tri validator.valid drugint drugdao.reportinteract descript trandao.logtransact transactiontype.drug_interact loggedinmid return interact record return interact ad catch dbexcept e.printstacktrac return e.getmessag method interact param return string deleteinteract string firstdrug string seconddrug throw itrustexcept formvalidationexcept druginteractionbean drugint druginteractionbean drugint.setfirstdrug seconddrug drugint.setdescript blank tri validator.valid drugint drugdao.deleteinteract seconddrug trandao.logtransact transactiontype.drug_interact loggedinmid return interact delet return interact delet catch dbexcept e.printstacktrac throw itrustexcept e.getmessag method drug interact given drug param drugcod nd code drug return list druginteractionbean getinteract string drugcod throw itrustexcept tri return drugdao.getinteract drugcod catch dbexcept throw itrustexcept e.getmessag 
packag edu.ncsu.csc.itrust.bean store data messag user a bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class druginteractionbean string string seconddrug string descript return string getfirstdrug return firstdrug param set setfirstdrug string firstdrug firstdrug return string getseconddrug return seconddrug param seconddrug set setseconddrug string seconddrug seconddrug return string getdescript return descript param descript descript set setdescript string descript this.descript descript
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.druginteractionbean loader medicationbean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class druginteractionbeanload implement beanload druginteractionbean druginteractionbeanload list druginteractionbean loadlist resultset rs throw sqlexcept arraylist druginteractionbean list arraylist druginteractionbean rs.next loadsingl rs return list druginteractionbean loadsingl resultset rs throw sqlexcept medicationbean med medicationbean druginteractionbean drugit druginteractionbean drugit.setdescript rs.getstr descript drugit.setfirstdrug rs.getstr firstdrug drugit.setseconddrug rs.getstr seconddrug return drugit preparedstat loadparamet preparedstat ps druginteractionbean bean throw sqlexcept throw illegalstateexcept unimpl 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.druginteractionbeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept use manag drug interact dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao see //www.fda.gov/drugs/informationondrugs/ucm142438.htm author andi /public class druginteractiondao daofactori factori druginteractionbeanload interactionload constructor param factori link daofactori associ dao use obtain sql connect etc druginteractiondao daofactori factori factori interactionload druginteractionbeanload return drug interact input drug name return a java.util.list druginteractionbean throw dbexcept list druginteractionbean getinteract string drugcod throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from druginteract where firstdrug or seconddrug ps.setstr drugcod ps.setstr resultset rs ps.executequeri return interactionloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps add drug interact return addit exist itrustexcept firstdrug name drug interact param seconddrug name drug interact param descript explan drug interact return indic success failur throw dbexcept throw itrustexcept reportinteract string firstdrug string seconddrug string descript throw dbexcept itrustexcept firstdrug.equ seconddrug throw itrustexcept drug interact druginteractionbean currentintsdrug2 getinteract seconddrug druginteractionbean dib currentintsdrug2 .equal firstdrug throw itrustexcept error interact drug exist connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into druginteract firstdrug seconddrug descript + valu ps.setstr ps.setstr ps.setstr descript return == ps.executeupd catch sqlexcept e e.printstacktrac == e.geterrorcod throw itrustexcept error interact drug exist throw dbexcept e dbutil.closeconnect conn ps remov interact databas param firstdrug name param seconddrug name return remov list deleteinteract string firstdrug string seconddrug throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat delet from druginteract where firstdrug or seconddrug and firstdrug or seconddrug ps.setstr ps.setstr ps.setstr ps.setstr ps.executeupd == return return catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.valid import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept valid drug interact bean link druginteractionact class druginteractionvalid extend beanvalid druginteractionbean default constructor druginteractionvalid perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid druginteractionbean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat firstdrug d.getfirstdrug validationformat.nd errorlist.addifnotnul checkformat seconddrug d.getseconddrug validationformat.nd errorlist.addifnotnul checkformat descript d.getdescript validationformat.drug_int_com errorlist.haserror throw formvalidationexcept errorlist 
packag edu.ncsu.csc.itrust.act import java.sql.sqlexcept import java.util.list import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.appttypedao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.validate.appttypebeanvalid class editappttypeact appttypedao appttypedao transactiondao transdao appttypebeanvalid valid appttypebeanvalid editappttypeact daofactori factori this.loggedinmid loggedinmid this.appttypedao factory.getappttypedao this.transdao factory.gettransactiondao list appttypebean getappttyp throw sqlexcept return appttypedao.getappttyp string addappttyp appttypebean appttyp throw sqlexcept formvalidationexcept validator.valid appttyp list appttypebean list this.getappttyp appttypebean list .equal appttype.getnam return appoint type + exist tri appttyp transdao.logtransact transactiontype.add_appt_typ loggedinmid ad appoint type appttype.getnam return success appttype.getnam + durat appttype.getdur return databas becom pleas contact system administr assist catch dbexcept e.printstacktrac return e.getmessag string editappttyp appttypebean appttyp throw sqlexcept formvalidationexcept validator.valid appttyp list appttypebean list this.getappttyp flag appttypebean list .equal appttype.getnam flag a.getdur == appttype.getdur return appoint type + durat +appttype.getdur + minut break return appoint type + tri exist tri appttyp transdao.logtransact transactiontype.update_appt_typ loggedinmid updat appoint type appttype.getnam return success appttype.getnam + durat appttype.getdur return databas becom pleas contact system administr assist catch dbexcept e.printstacktrac return e.getmessag int getdurationbytyp string throw sqlexcept list appttypebean list this.getappttyp appttypebean list .equal return a.getdur return 
packag edu.ncsu.csc.itrust.act import java.util.list import edu.ncsu.csc.itrust.action.base.patientbaseact import edu.ncsu.csc.itrust.beans.healthrecord import edu.ncsu.csc.itrust.beans.forms.healthrecordform import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.authdao import edu.ncsu.csc.itrust.dao.mysql.healthrecordsdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.healthrecordformvalid edit health histori patient use author class edithealthhistoryact extend patientbaseact transactiondao transdao healthrecordsdao hrdao authdao authdao healthrecordformvalid valid healthrecordformvalid patient id valid superclass param factori daofactori use gener dao use action param loggedinmid user author action param pidstr patient user edit throw itrustexcept edithealthhistoryact daofactori factori string pidstr throw itrustexcept factori pidstr factory.gethealthrecordsdao this.authdao factory.getauthdao this.transdao factory.gettransactiondao this.loggedinmid loggedinmid return name return name throw dbexcept throw itrustexcept string getpatientnam throw dbexcept itrustexcept return authdao.getusernam add health record given param pid patient record edit health record form ad return messag inform record except messag throw formvalidationexcept string addhealthrecord healthrecordform hr throw formvalidationexcept itrustexcept hr healthrecord record transferform hr hrdao.add record transdao.logtransact transactiontype.enter_edit_phr loggedinmid edithealthhistori add record return inform record move inform form healthrecord param patient interest param form form translat return healthrecord contain inform form throw formvalidationexcept healthrecord transferform healthrecordform form throw formvalidationexcept healthrecord record healthrecord record.setpatientid pid record.setpersonnelid loggedinmid record.setbloodpressur integer.valueof form.getbloodpressur record.setbloodpressuren integer.valueof form.getbloodpressuren record.setcholesterolhdl integer.valueof form.getcholesterolhdl record.setcholesterolldl integer.valueof form.getcholesterolldl record.setcholesteroltri integer.valueof form.getcholesteroltri record.gettotalcholesterol || record.gettotalcholesterol formvalidationexcept cholesterol record.setheight double.valueof form.getheight double.valueof form.getweight record.setsmok boolean.valueof form.getissmok return record return list healthrecord given param pid id look return list healthrecord throw itrustexcept list healthrecord getallhealthrecord throw itrustexcept transdao.logtransact transactiontype.view_health_record loggedinmid edithealthhistori view record return hrdao.getallhealthrecord 
packag edu.ncsu.csc.itrust.act import java.util.list import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.authdao import edu.ncsu.csc.itrust.dao.mysql.remotemonitoringdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept handl chang add remov monitor list hcp /public class editmonitoringlistact remotemonitoringdao rmdao transactiondao transdao authdao authdao constructor param factori daofactori use creat dao use action param loggedinmid mid hcp edit monitor editmonitoringlistact daofactori factori this.loggedinmid loggedinmid this.rmdao factory.getremotemonitoringdao this.transdao factory.gettransactiondao this.authdao factory.getauthdao add hcp monitor list param return ad fals list throw dbexcept addtolist throw dbexcept transdao.logtransact transactiontype.telemedicine_monitor loggedinmid patientmid add rmdao.addpatienttolist patientmid loggedinmid remov hcp monitor list param return remov list throw dbexcept removefromlist throw dbexcept transdao.logtransact transactiontype.telemedicine_monitor loggedinmid patientmid return rmdao.removepatientfromlist patientmid loggedinmid return hcp list param return db throw dbexcept ispatientinlist throw dbexcept list remotemonitoringdatabean dataset rmdao.getpatientsdata loggedinmid remotemonitoringdatabean dataset == return return return name return name throw dbexcept throw itrustexcept string getpatientnam throw dbexcept itrustexcept return authdao.getusernam 
packag edu.ncsu.csc.itrust.act import java.text.parseexcept import java.text.simpledateformat import java.util.array import java.util.d import java.util.list import edu.ncsu.csc.itrust.action.base.officevisitbaseact import edu.ncsu.csc.itrust.beans.email import import import import import import import import import import edu.ncsu.csc.itrust.beans.forms.editofficevisitform import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.allergydao import edu.ncsu.csc.itrust.dao.mysql.druginteractiondao import edu.ncsu.csc.itrust.dao.mysql.hospitalsdao import edu.ncsu.csc.itrust.dao.mysql.labproceduredao import edu.ncsu.csc.itrust.dao.mysql.ndcodesdao import edu.ncsu.csc.itrust.dao.mysql.officevisitdao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.editofficevisitvalid edit offic visit patient use author class editofficevisitact extend officevisitbaseact editofficevisitvalid valid editofficevisitvalid personneldao personneldao hospitalsdao hospitaldao officevisitdao ovdao labproceduredao lpdao transactiondao transdao druginteractiondao drugdao allergydao allergydao patientdao patdao ndcodesdao pid use subact compris offic visit action subact help direct action offic visit action occur transact enum ovsubact add_diagnosi remove_diagnosi add_procedur remove_procedur add_med remove_med add_lab_procedur remove_lab_procedur add_immun remove_immun patient offic visit id valid class param factori daofactori use creat dao action param loggedinmid mid user author action param pidstr action perform ovidstr id offic visit play throw itrustexcept editofficevisitact daofactori factori string pidstr string ovidstr throw itrustexcept factori pidstr ovidstr long.parselong pidstr factory.getofficevisitdao this.personneldao factory.getpersonneldao this.hospitaldao factory.gethospitalsdao this.lpdao factory.getlabproceduredao this.transdao factory.gettransactiondao this.drugdao factory.getdruginteractiondao this.allergydao factory.getallergydao this.ndcdao factory.getndcodesdao this.patdao factory.getpatientdao this.loggedinmid loggedinmid return offic visit offic visit return officevisitbean offic visit throw itrustexcept officevisitbean getofficevisit throw itrustexcept officevisit ovdao.getofficevisit transdao.logtransact transactiontype.view_office_visit loggedinmid editoffcevisit view offic visit return officevisit return list lab procedur done offic visit param mid doctor visit param offic visit return list lab procedur done visit throw dbexcept list labprocedurebean getlabprocedur throw dbexcept transdao.logtransact transactiontype.view_lab_procedur loggedinmid editoffcevisit view lab procedur return mid ovid list hospit order offic visit hcp first param return throw itrustexcept list hospitalbean gethospit throw itrustexcept hospitalbean hcpshospit personneldao.gethospit hcpid hospitalbean allhospit hospitaldao.getallhospit return combinelist hcpshospit allhospit combin list hospit param hcpshospit hospit hcp assign allhospit hopsit return combin list hospitalbean combinelist list hospitalbean hcpshospit list hospitalbean allhospit hospitalbean ho allhospit hcpshospitals.contain ho ho return hcpshospit updat offic visit inform form pass form inform return success except messag throw formvalidationexcept string updateinform editofficevisitform form throw formvalidationexcept string confirm tri checkaddsubact ovsubaction.add_diagnosi form.getadddiagid ovid checkaddsubact ovsubaction.add_procedur form.getaddprocid checkaddsubact ovsubaction.add_immun form.getaddimmunizationid ovid form.gethcpid checkaddsubact ovsubaction.add_lab_procedur form.getaddlabprocid checkaddprescript form checkremovesubact ovsubaction.remove_diagnosi form.getremovediagid checkremovesubact ovsubaction.remove_lab_procedur form.getremovelabprocid checkremovesubact ovsubaction.remove_procedur form.getremoveprocid checkremovesubact ovsubaction.remove_immun form.getremoveimmunizationid checkremovesubact ovsubaction.remove_med form.getremovemedid form transdao.logtransact transactiontype.document_office_visit loggedinmid getofficevisit .getpatientid editofficevisit offic visit ovid confirm success return confirm catch itrustexcept e.printstacktrac return e.getmessag string hasinteract string drug string pid string string enddat throw itrustexcept string respons tri simpledateformat simpledateformat mm/dd/yyyy simpledateformat need simpledateformat yyyy/mm/dd date start startdat startdat start date end original.pars enddat enddat end startdat startdate.replaceal enddat prescriptionreportbean prbeanlist ovdao.getprescriptionreportsbyd long.parselong startdat list druginteractionbean drugdao.getinteract drug prescriptionreportbean prbeanlist string prbean.getprescript .getmed .getndcod druginteractionbean dbeanlist string string intdrug2 dbean.getseconddrug presdrug.equ intdrug1 drug.equ intdrug2 respons += prescrib prbean.getprescript .getmed .getdescript + start date prbean.getprescript .getstartdatestr + end date prbean.getprescript .getenddatestr + respons += interact prbean.getprescript .getmed .getdescript dbean.getseconddrug .getdescript respons += descript dbean.getdescript presdrug.equ intdrug2 drug.equ intdrug1 respons += prescrib prbean.getprescript .getmed .getdescript start date prbean.getprescript .getstartdatestr + end date prbean.getprescript .getenddatestr + respons += interact prbean.getprescript .getmed .getdescript dbean.getfirstdrug .getdescript respons += descript dbean.getdescript catch dbexcept e.printstacktrac throw itrustexcept e.getmessag catch parseexcept e e.printstacktrac throw itrustexcept e.getmessag return respons string isallergyonlist string patmid string ndcode throw itrustexcept string respons tri allergybean allergylist allergydao.getallergi long.parselong patmid return respons medicationbean medbean ndcdao.getndcod == return respons string medbean.getdescript allergybean allergylist string allergybean.getdescript //allergi aspirin first found newdrug.equ respons += allergi + first found + allergybean.getfirstfoundstr catch dbexcept e.printstacktrac throw itrustexcept e.getmessag return respons send regard drug param hcpid hcp prescript made id patient prescript param problem allergi interact problem return sent throw dbexcept email makeemailapp string patid string problem throw dbexcept itrustexcept patdao.getpati long.parselong patid string hcpname personneldao.getnam hcpid email email email email.setfrom itrust.com arrays.aslist p.getemail email.setsubject hcp prescrib medic email.setbodi string .format prescrib medic allerg known drug take hcpname problem return email add prescript offic visit param form inform prescript param offic visit throw dbexcept throw formvalidationexcept void checkaddprescript editofficevisitform form throw dbexcept formvalidationexcept form.getaddmedid null .equal editofficevisitvalid .valid form prescriptionbean pre prescriptionbean pres.setdosag integer.valueof form.getdosag pres.setenddatestr form.getendd pres.setstartdatestr form.getstartd pres.setinstruct form.getinstruct medicationbean med medicationbean med.setndcod form.getaddmedid pres.setmed med transdao.logtransact transactiontype.add_prescript loggedinmid editoffcevisit add prescript pres.getmed .getndcod ovdao.addprescript pre updat offic visit param form inform throw dbexcept throw formvalidationexcept void editofficevisitform form throw dbexcept formvalidationexcept form officevisitbean ov officevisitbean ovid ov.setnot form.getnot ov.sethcpid long.valueof form.gethcpid ov.setpatientid long.valueof form.getpatientid ov.sethospitalid form.gethospitalid transdao.logtransact transactiontype.update_office_visit loggedinmid editoffcevisit updat offic visit ovdao.upd ov add diagnosi procedur offic visit param action type action add code cpt code action visitid offic visit add action dateofdeath date death need return oper complet code null throw dbexcept throw itrustexcept checkaddsubact ovsubact action string code visitid string dateofdeath throw dbexcept itrustexcept code == null || .equal code return switch action case add_diagnosi ovdao.adddiagnosistoofficevisit double.valueof code visitid break case add_immun case add_procedur ovdao.addproceduretoofficevisit code break case add_lab_procedur ovdao.addlabproceduretoofficevisit code visitid break default return return checkaddsubact ovsubact action string code visitid string dateofdeath string hcpid throw dbexcept itrustexcept code == null || .equal code return ovdao.addproceduretoofficevisit code visitid return remov action offic visit param action type action remov param input action remov return oper complet code null throw dbexcept checkremovesubact ovsubact action string input throw dbexcept input == null || .equal input return tri long.valueof input catch numberformatexcept e return switch action case remove_diagnosi ovdao.removediagnosisfromofficevisit removeid break case remove_immun case remove_procedur ovdao.removeprocedurefromofficevisit removeid break case remove_med ovdao.removeprescript removeid break case remove_lab_procedur ovdao.removelabprocedurefromofficevisit removeid break return 
packag edu.ncsu.csc.itrust.beans.form form contain data come edit offic visit a form bean kinda say think form real-lif form fill get someth done make sens class editofficevisitform string ovid string hcpid string patientid string hospitalid string removelabprocid string removediagid string removeprocid string removeimmunizationid string removemedid string addlabprocid string adddiagid string addprocid string addimmunizationid string addmedid string note string visitd string startdat string enddat string dosag string instruct string causeofdeath public string getadddiagid return adddiagid setadddiagid string adddiagid adddiagid string getaddlabprocid return addlabprocid setaddlabprocid string addlabprocid addlabprocid string getaddmedid return addmedid void setaddmedid string addmedid this.addmedid addmedid string getaddprocid return addprocid setaddprocid string addprocid addprocid string getaddimmunizationid return addimmunizationid setaddimmunizationid string addimmunizationid addimmunizationid string getnot return note void setnot string note this.not note string getovid return void setovid string this.ovid ovid string getremovelabprocid return removelabprocid setremovelabprocid string removelabprocid removelabprocid string getremovediagid return removediagid setremovediagid string removediagid removediagid string getremovemedid return removemedid void setremovemedid string removemedid this.removemedid removemedid string getremoveprocid return removeprocid setremoveprocid string removeprocid removeprocid string getremoveimmunizationid return removeimmunizationid setremoveimmunizationid string removeimmunizationid removeimmunizationid string getvisitd return visitd setvisitd string visitd visitd string gethcpid return hcpid sethcpid string hcpid hcpid string getpatientid return patientid setpatientid string patientid patientid string gethospitalid return hospitalid void sethospitalid string hospitalid this.hospitalid hospitalid string getdosag return dosag setdosag string dosag this.dosag dosag string getendd return enddat setendd string enddat enddat string getinstruct return instruct setinstruct string instruct this.instruct instruct string getstartd return startdat setstartd string startdat startdat string getcauseofdeath return causeofdeath setcauseofdeath string causeofdeath causeofdeath 
packag edu.ncsu.csc.itrust.valid import java.text.parseexcept import java.text.simpledateformat import java.util.d import edu.ncsu.csc.itrust.action.editofficevisitact import edu.ncsu.csc.itrust.beans.forms.editofficevisitform import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept use valid updat offic visit editofficevisitact author andi /public class editofficevisitvalid extend beanvalid editofficevisitform validateprescript fals default constructor editofficevisitvalid editofficevisitvalid boolean validateprescript this.validateprescript validateprescript perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid editofficevisitform form throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat hcp id form.gethcpid validationformat.mid errorlist.addifnotnul checkformat hospit id form.gethospitalid validationformat.hospital_id errorlist.addifnotnul checkformat note form.getnot validationformat.not errorlist.addifnotnul checkformat id form.getpatientid validationformat.mid errorlist.addifnotnul checkformat visit date form.getvisitd validationformat.d validateprescript checkformat start date form.getstartd validationformat.d errorlist.addifnotnul checkformat end date form.getendd validationformat.d errorlist.addifnotnul checkformat instruct form.getinstruct validationformat.not errorlist.addifnotnul checkint dosag form.getdosag checkformat start date form.getstartd validationformat.d == checkformat end date form.getendd validationformat.d == date sd date ed tri sd simpledateformat mm/dd/yyyy .pars form.getstartd ed simpledateformat mm/dd/yyyy .pars form.getendd string dateerror sd.after ed dateerror start date prescript end date errorlist.addifnotnul dateerror catch parseexcept e validationformat.date.getdescript errorlist.haserror throw formvalidationexcept errorlist 
packag edu.ncsu.csc.itrust.act import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.action.base.patientbaseact import edu.ncsu.csc.itrust.beans.email import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.patientvalid import edu.ncsu.csc.itrust.emailutil edit patient use author class editpatientact extend patientbaseact transactiondao transdao patientvalid valid patientvalid patientdao patientdao emailutil emailutil class valid id param factori daofactori use creat dao action param loggedinmid mid user author action param pidstr mid patient edit itrustexcept editpatientact daofactori factori string pidstr throw itrustexcept factori pidstr factory.getpatientdao this.transdao factory.gettransactiondao this.loggedinmid loggedinmid emailutil emailutil factori take inform patientbean param updat patient inform param inform throw itrustexcept throw formvalidationexcept void updateinform patientbean throw itrustexcept formvalidationexcept secur reason validator.valid transdao.logtransact transactiontype.enter_edit_demograph loggedinmid editpati made chang emailutil.sendemail makeemail return patientbean return patientbean throw dbexcept patientbean getpati throw dbexcept transdao.logtransact transactiontype.enter_edit_demograph loggedinmid editpati view patient return patientdao.getpati this.getpid creat inform patient inform updat return email notic throw dbexcept email makeemail throw dbexcept email email email list patientbean rep patientdao.getrepres patientbean pb patientdao.getpati list string toaddr arraylist string toaddrs.add pb.getemail patientbean r rep toaddrs.add r.getemail itrust.com email.settolist toaddr repres email.setsubject string.format patient inform updat email.setbodi dear + pb.getfullnam + patient record inform pleas login see view record return editmessagefilt string filter throw itrustexcept formvalidationexcept patientbean this.getpati b.setmessagefilt filter this.updateinform 
packag edu.ncsu.csc.itrust.act import edu.ncsu.csc.itrust.action.base.personnelbaseact import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.authdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.personnelvalid edit design personnel use editpersonnel.jsp author class editpersonnelact extend personnelbaseact personneldao personneldao transactiondao transdao authdao authdao personnelvalid valid personnelvalid super class valid id param factori daofactori use creat dao action param loggedinmid mid user edit personnel pidstr id user edit throw itrustexcept editpersonnelact daofactori factori string pidstr throw itrustexcept factori pidstr factory.getauthdao pidstr role editor authdao.getuserrol role edit editor == edit loggedinmid throw itrustexcept edit demograph editor == role.hcp edit == role.admin || editor == role.uap edit == role.hcp || editor == role.admin edit == role.uap throw itrustexcept author edit record factory.getpersonneldao this.transdao factory.gettransactiondao this.loggedinmid loggedinmid take inform personnelform param updat param personnelform personnelbean inform throw itrustexcept throw formvalidationexcept void updateinform personnelbean personnelform throw itrustexcept formvalidationexcept personnelform.setmid validator.valid personnelform personneldao.editpersonnel personnelform transdao.logtransact transactiontype.create_disable_patient_hcp loggedinmid editmessagefilt string filter throw itrustexcept formvalidationexcept personnelbean personneldao.getpersonnel this.getpid b.setmessagefilt filter this.updateinform 
packag edu.ncsu.csc.itrust.act import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.emailutil edu.ncsu.csc.itrust.action.base.patientbaseact import import import import edu.ncsu.csc.itrust.beans.email import import edu.ncsu.csc.itrust.beans.healthrecord import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.allergydao import edu.ncsu.csc.itrust.dao.mysql.familydao import edu.ncsu.csc.itrust.dao.mysql.healthrecordsdao import edu.ncsu.csc.itrust.dao.mysql.icdcodesdao import edu.ncsu.csc.itrust.dao.mysql.officevisitdao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.nohealthrecordsexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.risk.chronicdiseasemedi import edu.ncsu.csc.itrust.risk.riskcheck import edu.ncsu.csc.itrust.validate.allergybeanvalid edit patient health record given patient use author class editphract extend patientbaseact daofactori factori patientdao patientdao allergydao allergydao familydao familydao healthrecordsdao hrdao officevisitdao ovdao transactiondao transdao icdcodesdao icddao chronicdiseasemedi diseasemedi personneldao personneldao personnelbean hcpuap patientbean patient emailutil super class valid id param factori daofactori use creat dao action param loggedinmid mid log author action param pidstr mid patient health record ad throw itrustexcept throw dbexcept throw nohealthrecordsexcept editphract daofactori factori string pidstr throw itrustexcept dbexcept factori pidstr factory.getpatientdao this.allergydao factory.getallergydao this.familydao factory.getfamilydao this.hrdao factory.gethealthrecordsdao this.ovdao factory.getofficevisitdao this.transdao factory.gettransactiondao this.icddao factory.geticdcodesdao this.loggedinmid loggedinmid this.personneldao factory.getpersonneldao this.hcpuap personneldao.getpersonnel loggedinmid patientdao.getpati pid emailutil emailutil factori this.factori factori add patient record param descript return allergi ad except messag list field descript null throw itrustexcept string updateallergi string descript throw itrustexcept makeemail descript null description.equ tri bean allergybean bean.setdescript descript allergybeanvalid abv allergybeanvalid abv.valid bean allergydao.addallergi descript transdao.logtransact transactiontype.enter_edit_phr loggedinmid editphr ad descript return allergi ad catch formvalidationexcept return class=error error invalid field e2.geterrorlist /span return return patientbean return patientbean throw itrustexcept patientbean getpati throw itrustexcept transdao.logtransact transactiontype.view_record loggedinmid editphr view patient record return pid return list allergybean return list allergybean throw itrustexcept list allergybean getallergi throw itrustexcept return allergydao.getallergi pid return list familymemberbean return list familymemberbean throw itrustexcept list familymemberbean throw itrustexcept familymemberbean fam arraylist familymemberbean list familymemberbean parent parent familydao.getpar pid parent familydao.gets pid familydao.getchildren parent familymemberbean grandpar arraylist familymemberbean familymemberbean parent parent grandparents.addal familydao.getpar parent.getmid grandpar gp grandpar gp.setrel grandpar transdao.logtransact transactiontype.view_record loggedinmid editphr view famili inform return fam return list healthrecord return throw itrustexcept list healthrecord getallhealthrecord throw itrustexcept list healthrecord allhealthrecord hrdao.getallhealthrecord transdao.logtransact transactiontype.view_health_record loggedinmid editphr view record return allhealthrecord return list officevisitbean return throw itrustexcept list officevisitbean getallofficevisit throw itrustexcept transdao.logtransact transactiontype.view_office_visit loggedinmid editphr view offic visit return ovdao.getallofficevisit return officevisitbean given return throw itrustexcept officevisitbean getcompleteofficevisit throw itrustexcept return ovdao.getofficevisit visitid return list diseas risk return list riskcheck throw itrustexcept throw dbexcept list riskcheck getdiseasesatrisk throw nohealthrecordsexcept itrustexcept dbexcept this.diseasemedi chronicdiseasemedi factori transdao.logtransact transactiontype.identify_risk_factor loggedinmid check risk factor return diseasemediator.getdiseaseatrisk check see famili member blood pressur param member famili member check return famili member blood pressur fals record famili member blood pressur throw itrustexcept boolean familymemberbean member throw itrustexcept list healthrecord record hrdao.getallhealthrecord member.getmid records.s return healthrecord record record || return return check see famili member cholesterol member famili member check return famili member cholesterol fals record famili member throw itrustexcept boolean doesfamilymemberhavehighcholesterol familymemberbean member throw itrustexcept list healthrecord record hrdao.getallhealthrecord member.getmid records.s return healthrecord record record record.getcholesterolhdl || record.getcholesterolldl return return check see famili member diabet member famili member check return famili member diabet fals record famili member throw itrustexcept boolean doesfamilymemberhavediabet member throw itrustexcept diagnosisbean diagnos patientdao.getdiagnos diagnoses.s return diagnosisbean diag diagnos diag.geticdcod .startswith return return check see famili member cancer param member famili member check return famili member cancer fals record famili member throw itrustexcept doesfamilymemberhavecanc familymemberbean member throw itrustexcept diagnosisbean diagnos patientdao.getdiagnos diagnoses.s return diagnosisbean diag diagnos diag.geticdcod .startswith return return check see famili member heart diseas member famili member check return famili member heart diseas fals record famili member throw itrustexcept doesfamilymemberhaveheartdiseas familymemberbean member throw itrustexcept diagnosisbean diagnos patientdao.getdiagnos diagnoses.s return diagnosisbean diag diagnos diag.geticdcod .startswith return return check see famili member smoke param member famili member check return famili member smoke fals record famili member throw itrustexcept boolean isfamilymembersmok familymemberbean member throw itrustexcept list healthrecord record hrdao.getallhealthrecord member.getmid records.s return healthrecord record record record.issmok return return check see famili member return caus death param member famili member check return caus death otherwis null throw itrustexcept string getfamilymembercod familymemberbean member throw itrustexcept patient patientdao.getpati member.getmid patient.getcauseofdeath == return diagnosisbean diag icddao.geticdcod patient.getcauseofdeath diag == return return diag.getdescript creat fake notifi user record alter sent throw dbexcept email makeemail throw dbexcept email email email list patientbean rep patientdao.getrepres list string toaddr arraylist string toaddrs.add patient.getemail patientbean r rep toaddrs.add r.getemail itrust.com email.settolist toaddr repres email.setsubject string.format record alter email.setbodi health care hcpuap.getfullnam + alter records. + list health care profession return email 
packag edu.ncsu.csc.itrust.act import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.officevisitdao edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept edit patient prescript inform use hcp-uap/editprescription.jsp author ben smith /public class editprescriptionact officevisitdao ovdao creat action initi offic visit databas access object param factori throw itrustexcept editprescriptionact daofactori factori throw itrustexcept factory.getofficevisitdao edit exist prescript databas param pre prescript bean chang throw dbexcept void editprescript prescriptionbean pre throw dbexcept ovdao.editprescript pre 
packag edu.ncsu.csc.itrust.act import java.util.list import edu.ncsu.csc.itrust.action.base.patientbaseact import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.authdao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.itrustexcept edit patient repres use author class editrepresentativesact extend patientbaseact patientdao patientdao transactiondao transdao authdao authdao super class valid mid param factori daofactori use creat dao action param loggedinmid mid patient edit repres param pidstr mid question throw itrustexcept editrepresentativesact daofactori factori string pidstr throw itrustexcept factori pidstr this.loggedinmid loggedinmid this.transdao factory.gettransactiondao this.patientdao factory.getpatientdao this.authdao factory.getauthdao return list patient repres id personnel look represente return patientbean throw itrustexcept list patientbean getrepres throw itrustexcept return patientdao.getrepres make repres input mid paramet param pidstr person repres represente return messag throw string string pidstr throw itrustexcept tri represente long.valueof pidstr represente role.pati throw itrustexcept user patient == represente throw itrustexcept user repres confirm represente confirm transdao.logtransact transactiontype.declare_repres loggedinmid + repres represente return patient repres return no chang made catch numberformatexcept return mid number make input mid param param input person repres represente return messag throw string removerepres string input throw itrustexcept tri represente long.valueof input boolean confirm represente confirm transdao.logtransact transactiontype.declare_repres loggedinmid + repres represente return patient repres return no chang made catch numberformatexcept return mid number 
packag edu.ncsu.csc.itrust.bean import java.sql.timestamp import java.util.arraylist import java.util.list a bean store data fake email bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class email list string arraylist string string string subject string bodi timestamp timead list string gettolist return tolist settolist list string tolist tolist string gettoliststr string str string tolist += addr + return str.substr string getfrom return void setfrom string string getsubject return setsubject string this.subject subject string getbodi return bodi setbodi string bodi this.bodi bodi timestamp gettimead return timead void settimead timestamp timead this.timead timead overrid boolean equal object return obj.getclass .equal this.getclass this.equ email obj overrid int hashcod hashcod design return equal email return from.equ subject.equ other.subject body.equ other.bodi listequ tolist listequ list string list string tolist.s return int tolist.s i++ tolist.get .equal othertolist.get return return overrid string tostr return + to + tolist.tostr + + + bodi + bodi
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.array import java.util.list import edu.ncsu.csc.itrust.beans.email fake email load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class emailbeanload implement beanload email list email loadlist resultset rs throw sqlexcept list email list arraylist email rs.next list.add loadsingl rs return list preparedstat loadparamet preparedstat ps email email throw sqlexcept ps.setstr ps.setstr ps.setstr ps.setstr return ps email loadsingl resultset rs throw sqlexcept email email email email.setfrom rs.getstr fromaddr email.settolist arrays.aslist rs.getstr toaddr .split email.setbodi rs.getstr bodi email.setsubject rs.getstr email.settimead rs.gettimestamp addedd return email 
packag import edu.ncsu.csc.itrust.beans.email import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept send email user want train spammer insert databas put system replac class stuff javax.mail author andi /public class emailutil daofactori factori public emailutil daofactori factori factori do not send real email send email throwaway account wast bandwidth look want know send email java googl time void sendemail email email throw dbexcept factory.getfakeemaildao .sendemailrecord email 
packag edu.ncsu.csc.itrust.valid import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept class emailvalid extend beanvalid messagebean default constructor emailvalid perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid void valid messagebean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat bodi m.getbodi validationformat.email errorlist.haserror throw formvalidationexcept errorlist 
packag edu.ncsu.csc.itrust.act import java.util.arraylist import java.util.list import java.util.calendar import edu.ncsu.csc.itrust.action.base.patientbaseact import import import edu.ncsu.csc.itrust.beans.email import import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.allergydao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.dao.mysql.officevisitdao import edu.ncsu.csc.itrust.enums.prescriptionalert import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.emailutil creat emerg report use author class emergencyreportact extend patientbaseact transactiondao transdao patientdao patientdao allergydao allergydao officevisitdao ovdao patientbean pb emailutil loggedinmid class handl valid log view report param factori daofactori use creat dao action param loggedinmid mid user look emerg report param pidstr id patient report gener itrustexcept emergencyreportact daofactori factori string pidstr throw itrustexcept factori pidstr factory.getpatientdao this.allergydao factory.getallergydao this.transdao factory.gettransactiondao this.ovdao factory.getofficevisitdao this.loggedinmid loggedinmid emailutil emailutil factori pb patientdao.getpati transdao.logtransact transactiontype.view_emergency_report this.loggedinmid long.valueof pidstr view emerg report makeemail return patient name return patient name string getpatientnam return pb.getfirstnam + pb.getlastnam return patient age return patient age string getpatientag return integer.tostr pb.getag return patient gender return patient gender public string getpatientgend return pb.getgend .tostr return patient emerg contact return patient emerg contact string getpatientemergencycontact return pb.getemergencynam + + pb.getemergencyphon return patient blood type return patient blood type string getbloodtyp return pb.getbloodtyp return list allergi given return list allergybean throw itrustexcept list allergybean getallergi throw itrustexcept return allergydao.getallergi this.pid return prescript patient take list prescriptionbean take throw itrustexcept list prescriptionbean getcurrentprescript throw itrustexcept prescriptionbean allprescript patientdao.getcurrentprescript arraylist prescriptionbean warninglist arraylist prescriptionbean int allprescriptions.s i++ prescriptionalerts.isalert allprescriptions.get .getmed .getndcod warninglist.add allprescriptions.get return return list diagnos rang diagnosisrang enum return list diagnosisbean throw itrustexcept list diagnosisbean getwarningdiagnos throw itrustexcept tri dup list diagnosisbean alldiagnos patientdao.getdiagnos arraylist diagnosisbean warninglist arraylist diagnosisbean diagnosisbean bean alldiagnos officevisitbean ovb ovdao.getofficevisit bean.getvisitid ovb == continu .equal bean.getclassif ovb.getvisitd .gettim calendar.getinst .gettimeinmilli warninglist bean.getdescript .equal wbean.getdescript dup bean return catch dbexcept throw itrustexcept dbe.getmessag return prescript patient take list prescriptionbean take throw itrustexcept list procedurebean getimmun throw itrustexcept procedurebean allimmun patientdao.getimmunizationprocedur return allimmun creat fake notifi emerg report creat return sent throw dbexcept email makeemail throw dbexcept email email email list patientbean rep patientdao.getrepres list string toaddr arraylist string toaddrs.add pb.getemail patientbean r rep toaddrs.add r.getemail itrust.com email.settolist toaddr repres email.setsubject string.format emerg report view notif email.setbodi dear + pb.getfullnam + \n emerg report generated. pleas login see view record return email 
packag edu.ncsu.csc.itrust.except import java.util.arraylist import java.util.iter import java.util.list use valid creat error messag author andi /public class errorlist implement string list string errorlist errorlist arraylist string add messag list java null empti string void addifnotnul string errormessag errormessag .equal errormessag errormessag return list error messag return list string getmessagelist return errorlist return list error return haserror return errorlist.s overrid string tostr return errorlist.tostr iter string iter return errorlist.iter 
packag edu.ncsu.csc.itrust.enum ethnic repres enum ethnic indian notspecifi specifi string name ethnic string name this.nam name string getnam return name overrid string tostr return getnam ethnic pars string input ethnic ethnic ethnicity.valu ethnicity.name.equ input return ethnic return notspecifi 
packag edu.ncsu.csc.itrust.risk.factor import import edu.ncsu.csc.itrust.enums.ethn check ethnic patient match risk see link patientriskfactor detail method andi /public class ethnicityfactor extend patientriskfactor ethnic atrisk patientbean patient public ethnicityfactor patientbean patient ethnic atrisk atrisks.clon this.pati patient string getdescript return patient ethnic patient.getethn hasfactor ethnic ethnic atrisk patient.getethn .equal ethnic ethnicity.notspecified.equ ethnic return return 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil edu.ncsu.csc.itrust.beans.email import edu.ncsu.csc.itrust.beans.loaders.emailbeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao author andi /public class fakeemaildao daofactori factori emailbeanload emailbeanload emailbeanload constructor param factori link daofactori associ dao use obtain sql connect etc fakeemaildao daofactori factori factori return email databas return a java.util.list email object repres fake throw dbexcept list email getallemail throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from fakeemail order by addedd desc resultset rs ps.executequeri return emailbeanloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return email person sent param email email address string return a java.util.list fake email throw dbexcept list email getemailsbyperson string email throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from fakeemail where toaddr like order by addedd desc ps.setstr email + resultset rs ps.executequeri return emailbeanloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps send email insert databas param email email object insert throw dbexcept void sendemailrecord email email throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into fakeemail toaddr fromaddr subject bodi valu emailbeanloader.loadparamet ps ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return list email given string substr bodi string string search bodi return a java.util.list fake email throw dbexcept list email getemailwithbodi string bodysubstr throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from fakeemail where instr bodi order by addedd desc ps.setstr resultset rs ps.executequeri return emailbeanloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.familymemberbean loader familymemberbean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class familybeanload implement beanload familymemberbean string relat familybeanload string relat this.rel relat list familymemberbean loadlist resultset rs throw sqlexcept arraylist familymemberbean list arraylist familymemberbean rs.next loadsingl rs return list preparedstat loadparamet preparedstat ps familymemberbean bean throw sqlexcept throw illegalstateexcept unimpl familymemberbean loadsingl resultset rs throw sqlexcept familymemberbean fam familymemberbean fam.setrel relat fam.setfirstnam rs.getstr firstnam fam.setlastnam rs.getstr lastnam fam.setmid rs.getint mid return fam 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.familybeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept use queri famili dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao author andi /public class familydao daofactori factori familybeanload familybeanload constructor param factori link daofactori associ dao use obtain sql connect etc familydao daofactori factori factori return inform mother father patient param return throw dbexcept list familymemberbean getpar throw dbexcept return getfamilymemb pid parent select p2.firstnam as firstnam p2.lastnam as lastnam p2.mid mid + patient patient p2 where p1.mid= and p1.mothermid=p2.mid or p1.fathermid=p2.mid return list patient share parent parent param return a java.util.list familymemberbean throw dbexcept list familymemberbean getsibl throw dbexcept return getfamilymemb pid sibl select p2.firstnam as firstnam p2.lastnam as lastnam p2.mid mid + patient patient p2 where p1.mid= and p1.mid p2.mid p1.mothermid=p2.mothermid and p2.mothermid + or p1.fathermid=p2.fathermid and p1.fathermid return patient mother father patient param return a java.util.list familymemberbean throw dbexcept list familymemberbean getchildren throw dbexcept return getfamilymemb pid child select firstnam lastnam mid from patient + where mothermid= fathermid= privat helper method param param relat param queri param add paramet queri return a java.util.list familymemberbean throw dbexcept list familymemberbean getfamilymemb string relat string secondparam throw dbexcept connect conn preparedstat ps null familybeanload familybeanload relat tri factory.getconnect ps conn.preparestat queri secondparam resultset rs ps.executequeri return familybeanloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.risk.factor import import edu.ncsu.csc.itrust.exception.dbexcept check famili histori given diagnosi rang deleg straight dao see link patientriskfactor detail method andi /public class familyhistoryfactor extend patientriskfactor patientid daofactori factori familyhistoryfactor daofactori factori icdlow icdupp factori this.patientid patientid this.icdlow icdlow icdupp string getdescript return famili histori diseas hasfactor tri return .hasfamilyhistori patientid icdlow icdupp catch dbexcept e return 
packag edu.ncsu.csc.itrust.bean store data famili member a bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class familymemberbean string relat string firstnam string lastnam familymemberbean string getfirstnam return firstnam setfirstnam string firstnam this.firstnam firstnam string getlastnam return lastnam setlastnam string lastnam this.lastnam lastnam string getfullnam return getfirstnam + getlastnam return mid void setmid this.mid mid string getrel return relat setrel string relat this.rel relat
packag edu.ncsu.csc.itrust.except import java.io.ioexcept import java.util.list import javax.servlet.jsp.jspwrit except use action involv submiss form form valid handl seri class form valid except class formvalidationexcept extend except long serialversionuid errorlist errorlist constructor error messag pass list paramet method param errormessag list error messag return form valid box formvalidationexcept string errormessag errorlist string msg errormessag errorlist.addifnotnul msg constructor error messag errorlist data type param errorlist errorlist object contain error messag formvalidationexcept errorlist errorlist errorlist return list java.util.list string return error list list string geterrorlist return errorlist.getmessagelist error messag display itrust page except overrid string getmessag return form valid field fill errorlist.tostr format error messag kept place param output writer case jspwriter format list go throw ioexcept writer incorrect void printhtml jspwriter throw ioexcept out.print inform /h2 div class=\ errorlist\ string errormessag errorlist errormessag + br 
packag edu.ncsu.csc.itrust.enum male femal specifi provid form patient discret /public enum gender male male femal femal notspecifi specifi string name gender string name this.nam name string getnam return name overrid string tostr return getnam gender pars string input gender gender gender.valu gender.name.equ input return gender return notspecifi 
packag edu.ncsu.csc.itrust.risk.factor import import edu.ncsu.csc.itrust.enums.gend check patient gender match given see link patientriskfactor detail method andi /public class genderfactor extend patientriskfactor patientbean patient gender gender public genderfactor patientbean patient gender gender patient this.gend gender string getdescript return patient patient.getgend .tostr .tolowercas hasfactor return gender.equ patient.getgend gender.equ gender.notspecifi 
packag edu.ncsu.csc.itrust.act import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.action.editappttypeact import edu.ncsu.csc.itrust.action.viewmyapptsact import edu.ncsu.csc.itrust.action.viewmyrecordsact import import import import java.util.list import java.sql.sqlexcept import java.sql.timestamp import java.util.arraylist import import java.util.calendar action class calendar.jsp author softwar engin team project zephyr class generatecalendaract viewmyapptsact a_act editappttypeact type viewmyrecordsact r_action list apptbean send set default factori daofactori use creat dao use action param loggedinmid mid user view calendar generatecalendaract daofactori factori a_act viewmyapptsact factori loggedinmid type editappttypeact factori loggedinmid r_action viewmyrecordsact factori loggedinmid send arraylist apptbean return send request appointmentbean return send request appointmentbean list apptbean getsend return send check appoint appear calendar conflict appoint calendar array method use appoint appear calendar return array item conflict item throw sqlexcept boolean getconflict throw sqlexcept conflict send.siz int i=0 send.siz ab send.get ab.getd .gettim types.getdurationbytyp ab.getappttyp timestamp time timestamp t+m int j=i+1 j send.siz j++ send.get j .getdat .befor time conflict conflict j return conflict creat appoint display calendar month year view month calendar render year calendar render return a hashtabl contain appointmentbean render throw sqlexcept hashtabl integ arraylist apptbean int int thisyear throw sqlexcept list apptbean appt a_action.getmyappoint integ arraylist apptbean hashtabl integ arraylist apptbean calendar calendar.getinst apptbean appt b.getdat .gettim a.get calendar.month == a.get calendar.year == a.get calendar.day_of_month atable.put a.get calendar.day_of_month arraylist apptbean arraylist apptbean l atable.get a.get calendar.day_of_month send.add atable.put calendar.day_of_month l return creat offic visit display calendar month year view month calendar render year calendar render return a hashtabl contain officevisitbean render throw sqlexcept hashtabl integ arraylist officevisitbean int int thisyear throw itrustexcept officevisitbean officevisit r_action.getallofficevisit hashtabl integ arraylist officevisitbean hashtabl integ arraylist officevisitbean calendar calendar.getinst officevisitbean officevisit b.getvisitd .gettim a.get calendar.month == a.get calendar.year == a.get calendar.day_of_month rtable.put a.get calendar.day_of_month arraylist officevisitbean arraylist officevisitbean l rtable.get a.get calendar.day_of_month rtable.put a.get calendar.day_of_month l return creat lab procedur display calendar month year view month calendar render year calendar render return a hashtabl contain labprocedurebean render throw sqlexcept hashtabl integ arraylist labprocedurebean int int thisyear throw itrustexcept labprocedurebean proc r_action.getlab hashtabl integ arraylist labprocedurebean hashtabl integ arraylist labprocedurebean calendar calendar.getinst labprocedurebean proc b.gettimestamp .gettim a.get calendar.month == a.get calendar.year == a.get calendar.day_of_month ptable.put a.get calendar.day_of_month arraylist labprocedurebean arraylist labprocedurebean l ptable.get a.get calendar.day_of_month ptable.put a.get calendar.day_of_month l return 
packag edu.ncsu.csc.itrust.act import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.itrustexcept handl get person name associ mid use author class getusernameact daofactori factori set default factori daofactori use creat dao action getusernameact daofactori factori factori return person name match inputmid param inputmid mid look return person name throw dbexcept throw itrustexcept string getusernam string inputmid throw itrustexcept tri mid long.valueof inputmid return factory.getauthdao .getusernam mid catch numberformatexcept e throw itrustexcept mid form 
packag edu.ncsu.csc.itrust.act import java.util.arraylist import java.util.hashmap import java.util.list import java.util.calendar import edu.ncsu.csc.itrust.beans.forms.visitreminderreturnform import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.dao.mysql.visitremindersdao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.beans.visitflag import import edu.ncsu.csc.itrust.enums.gend get visitremind given patient use visitreminders.jsp author class getvisitremindersact remind type enumer enum remindertyp diagnosed_care_need diagnos care needer flu_shot_need flu shot needer immunization_need immun needer string typenam remindertyp string typenam this.typenam typenam hashmap string remindertyp map hashmap string remindertyp remindertyp rt remindertype.valu map.put rt.gettypenam rt get remindertyp name pass param name return remindertyp associ remindertyp getremindertyp string name return map.get name return type name string string gettypenam return typenam begin getvisitremindersact code transactiondao transdao visitremindersdao visitreminderdao patientdao patientdao set default factori daofactori use creat dao use action param loggedinmid mid person log throw itrustexcept getvisitremindersact daofactori factori throw itrustexcept factory.gettransactiondao this.loggedinmid loggedinmid visitreminderdao factory.getvisitremindersdao patientdao factory.getpatientdao return list visitreminderreturnform type pass param type remindertyp return list visitreminderreturnform throw itrustexcept throw formvalidationexcept list visitreminderreturnform getvisitremind remindertyp type throw itrustexcept formvalidationexcept == type throw itrustexcept remind type dne transdao.logtransact transactiontype.patient_remind loggedinmid type.gettypenam switch type case diagnosed_care_need return stripdup visitreminderdao.getdiagnosedvisitneed case flu_shot_need return visitreminderdao.getflushotdelinqu case immunization_need return getimmunizationneed loggedinmid default throw itrustexcept remind type dne get list anyon need immun param hcp patient check list peopl need immun done visit remind throw itrustexcept list visitreminderreturnform getimmunizationneed throw itrustexcept visitreminderreturnform formlist list visitreminderreturnform arraylist visitreminderreturnform string reason get list patient design hcp formlist visitreminderdao.getpati mid visitreminderreturnform r formlist reason checkimmun r.getpatientid reason.length r r.addvisitflag visitflag visitflag.immun reason return check see immun need patient check list lack immun accord schedul string checkimmun throw itrustexcept string reason procedurebean proc patientdao.getprocedur patientbean patient patientdao.getpati pid patientag patient.getageinweek gender gen patient.getgend int hepb int rota int diptet int haemoflu int pneumo int polio int measl int varicella int hepa int hpv procedurebean proc proc string cpt proc.getcptcod hep b cpt.equal hepb++ hepbtim proc.getd .gettim rotaviru cpt.equal rota++ rotatim proc.getd .gettim diptheria tetanu pertussi cpt.equal deptettim proc.getd .gettim haemophilu cpt.equal == haemoflu proc.getd .gettim haemoflu++ haemoflutim proc.getd .gettim pneumococc cpt.equal == pneumo proc.getd .gettim pneumo++ pneumotim proc.getd .gettim polioviru cpt.equal polio++ poliotim proc.getd .gettim measl mump rubella cpt.equal measles++ measlestim proc.getd .gettim varicella cpt.equal varicellatim proc.getd .gettim hep a cpt.equal hepa++ hepatim proc.getd .gettim human papillomaaviru cpt.equal hpv++ hpvtime proc.getd .gettim reason += testhepb hepb patientag hepbtim reason += testrotaviru rota patientag rotatim reason += testdiptet diptet patientag deptettim reason += testhaemoflu haemoflu patientag haemoflutim haemoflutimefirst reason += testpneumo pneumo patientag pneumotim pneumoflutimefirst reason += testpolio polio patientag poliotim measl reason += testmeasl measl patientag varicella reason += testvaricella varicella patientag varicellatim reason += testhepa hepa patientag hepatim gen.getnam .equal femal reason += testhpv hpv patientag hpvtime return reason check see need hpv immun param count immun param patientag patient param time date return immun given string testhpv int count patientag time string reason week calendar.getinst .gettimeinmilli time == count patientag reason += human papillomaviru year count week reason += human papillomaviru year month count week reason += human papillomaviru year month return reason check see need hepatit immun param count immun param patientag patient param time date return immun given string testhepa int count patientag time string reason week calendar.getinst .gettimeinmilli time == count patientag reason += hepatit month count week reason += hepatit month return reason check see need varicella immun param count immun param patientag patient param time date return immun given string testvaricella int count patientag time string reason week calendar.getinst .gettimeinmilli time == count patientag reason += varicella month count week reason += varicella year return reason check see need measl mump rubekka immun param count immun param patientag patient param time date return immun given string testmeasl int count patientag time string reason week calendar.getinst .gettimeinmilli time == count patientag reason += measl mump rubekka month count week reason += measl mump rubekka year return reason check see need polio immun param count immun param patientag patient param time date return immun given string testpolio int count patientag time string reason week calendar.getinst .gettimeinmilli time == count patientag reason += polioviru week count week reason += polioviru month count patientag reason += polioviru month return reason check see need immun param count immun param patientag patient param time date return immun given string testpneumo int count patientag time string reason week calendar.getinst .gettimeinmilli time patientag firstdosetim == count patientag reason += week count patientag week reason += month patientag week reason += month count week reason += month count week reason += month return reason check see need haemophilu infulenza immun param count immun param patientag patient param time date return immun given string testhaemoflu int count patientag time string reason week calendar.getinst .gettimeinmilli time patientag firstdosetim == count patientag reason += haemophilu week count patientag week reason += haemophilu month patientag week reason += haemophilu month count week reason += haemophilu month return reason check see need diphtheria tetanu pertussi immun param count immun param patientag patient param time date return immun given string testdiptet int count patientag time string reason week calendar.getinst .gettimeinmilli time == count patientag reason += diphtheria tetanu pertussi week count week reason += diphtheria tetanu pertussi month count week reason += diphtheria tetanu pertussi month count week reason += diphtheria tetanu pertussi week count week reason += diphtheria tetanu pertussi year count week reason += diphtheria tetanu pertussi year return reason check see need rotaviru immun param count immun param patientag patient param time date return immun given string testrotaviru int count patientag time string reason week calendar.getinst .gettimeinmilli time == count patientag reason += rotaviru week count week reason += rotaviru month count week reason += rotaviru month return reason check see need hepat b immun param count immun param patientag patient param time date return immun given string testhepb int count patientag time string reason week calendar.getinst .gettimeinmilli time == count patientag reason += hepat b birth count week reason += hepat b month count week reason += hepat b month return reason remov duplic list visitreminderreturnform param patient visit remindersto clean return clean visit remind list visitreminderreturnform stripdup list visitreminderreturnform patient == patient return return patient visitreminderreturnform retpati arraylist visitreminderreturnform visitreminderreturnform temp patients.get retpatients.add temp visitreminderreturnform vr patient temp.getpatientid retpatients.add vr temp vr return retpati 
packag edu.ncsu.csc.itrust.bean java.util.list a bean store data diagnosi given hcp a bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class hcpdiagnosisbean hcpid string hcpname numpati list medicationbean medlist list labprocedurebean int visitsat int treatmentsat int surveycount hcpdiagnosisbean numpati visitsat surveycount return hcpid sethcp hcpid hcp string gethcpnam return hcpname sethcpnam string name hcpname name getnumpati return numpati incnumpati list medicationbean getmedlist return medlist setmedlist list medicationbean medlist medlist list labprocedurebean getlablist return lablist setlablist list labprocedurebean lablist lablist string getvisitsatisfact return surveycount double.tostr visitsat/ surveycount result setvisitsat int sat += sat string gettreatmentsatisfact return surveycount double.tostr treatmentsat/ surveycount result settreatmentsat int sat += sat
packag edu.ncsu.csc.itrust.bean pass data viewprescriptionrecords.jsp reportadverseevent.jsp bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class hcplinkbean string drug boolean check string code boolean ischeck return check void setcheck check check string getcod return code setcod string code code return mid public return prescribermid param patient mid void setprescribermid prescribermid mid return drug event report string getdrug drug drug set drug event report setdrug string drug drug
packag edu.ncsu.csc.itrust.bean store data visit hcp a bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class hcpvisitbean string hcpname string hcpspecialti string hcpaddr string ovdat boolean design hcpmid hcpvisitbean hcpname hcpspecialti hcpaddr ovdat void sethcpmid hcpmid mid return hcpmid string gethcpnam return hcpname sethcpnam string name name hcpname name string gethcpspecialti return hcpspecialti sethcpspecialti string specialti specialti hcpspecialti specialti hcpspecialti none string gethcpaddr return hcpaddr sethcpaddr string addr addr hcpaddr addr string getovd return ovdat setovd string date date ovdat date isdesign return design void setdesign val val
packag edu.ncsu.csc.itrust.bean import java.sql.timestamp import java.util.d a bean store health record data bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class healthrecord patientid height weight issmok int bloodpressuren int bloodpressur int cholesterolhdl int cholesterolldl int cholesteroltri timestamp daterecord timestamp date .gettim healthrecord int getbloodpressur return bloodpressur void setbloodpressur int bloodpressur this.bloodpressur bloodpressur int bloodpressur bloodpressur int bloodpressur bloodpressur int getbloodpressuren return bloodpressuren int return bloodpressuren int return bloodpressur setbloodpressuren int bloodpressuren bloodpressuren string getbloodpressur return getbloodpressuren + getbloodpressur int getcholesterolhdl return cholesterolhdl setcholesterolhdl int cholesterolhdl cholesterolhdl int getcholesterolldl return cholesterolldl setcholesterolldl int cholesterolldl cholesterolldl int getcholesteroltri return cholesteroltri setcholesteroltri int cholesteroltri cholesteroltri note view see wikipedia articl cholesterol return int gettotalcholesterol return getcholesterolhdl + getcholesterolldl + getcholesteroltri date getdaterecord return daterecord void setdaterecord timestamp daterecord this.daterecord daterecord round mysql return valu put return math.round height setheight height return patientid setpatientid patientid return personnelid setpersonnelid this.personnelid personnelid issmok return issmok setsmok boolean smoker this.issmok smoker getweight return math.round weight setweight weight weight getbodymassindex return weight height height
packag edu.ncsu.csc.itrust.beans.form form contain data come edit health record a form bean kinda say think form real-lif form fill get someth done make sens class healthrecordform string height string weight string issmok string bloodpressuren string bloodpressur string cholesterolhdl string cholesterolldl string cholesteroltri healthrecordform string getbloodpressur return bloodpressur void setbloodpressur string bloodpressur this.bloodpressur bloodpressur string getbloodpressuren return bloodpressuren setbloodpressuren string bloodpressuren bloodpressuren string getcholesterolhdl return cholesterolhdl setcholesterolhdl string cholesterolhdl cholesterolhdl string getcholesterolldl return cholesterolldl setcholesterolldl string cholesterolldl cholesterolldl string getcholesteroltri return cholesteroltri setcholesteroltri string cholesteroltri cholesteroltri string getheight return height setheight string height string getissmok return issmok setissmok string issmok this.issmok issmok string getweight return weight setweight string weight 
packag edu.ncsu.csc.itrust.valid import edu.ncsu.csc.itrust.action.edithealthhistoryact import edu.ncsu.csc.itrust.beans.forms.healthrecordform import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept valid use ad health inform basic health histori link edithealthhistoryact author andi /public class healthrecordformvalid extend beanvalid healthrecordform perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid healthrecordform bean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkint systol blood pressur bean.getbloodpressuren errorlist.addifnotnul checkint diastol blood pressur bean.getbloodpressur errorlist.addifnotnul checkint cholesterol hdl bean.getcholesterolhdl errorlist.addifnotnul checkint cholesterol ldl bean.getcholesterolldl errorlist.addifnotnul checkint cholesterol triglycerid bean.getcholesteroltri errorlist.addifnotnul checkformat height bean.getheight validationformat.height errorlist.addifnotnul checkformat weight bean.getweight validationformat.weight errorlist.addifnotnul checkboolean smoker bean.getissmok errorlist.haserror throw formvalidationexcept errorlist 
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.healthrecord a loader healthrecord load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class healthrecordsbeanload implement beanload healthrecord list healthrecord loadlist resultset rs throw sqlexcept arraylist healthrecord list arraylist healthrecord rs.next loadsingl rs return list preparedstat loadparamet preparedstat ps healthrecord bean throw sqlexcept int i++ bean.getpatientid i++ bean.getheight i++ bean.getweight i++ bean.issmok ps.setint i++ bean.getbloodpressuren ps.setint i++ bean.getbloodpressur ps.setint i++ bean.getcholesterolhdl ps.setint i++ bean.getcholesterolldl ps.setint i++ bean.getcholesteroltri i++ bean.getpersonnelid return ps healthrecord loadsingl resultset rs throw sqlexcept healthrecord hr healthrecord hr.setbloodpressuren rs.getint bloodpressuren hr.setbloodpressur rs.getint bloodpressur hr.setcholesterolhdl rs.getint cholesterolhdl hr.setcholesterolldl rs.getint cholesterolldl hr.setcholesteroltri rs.getint cholesteroltri hr.setdaterecord rs.gettimestamp asofd hr.setsmok rs.getint smoker == hr.setheight height hr.setweight weight hr.setpersonnelid rs.getlong hcpid hr.setpatientid patientid return hr 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.healthrecord import edu.ncsu.csc.itrust.beans.loaders.healthrecordsbeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept use health record histori kept dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao author andi /public class healthrecordsdao healthrecordsbeanload loader healthrecordsbeanload daofactori factori constructor param factori link daofactori associ dao use obtain sql connect etc healthrecordsdao daofactori factori factori return list health record param mid mid look return a java.util.list healthrecord throw dbexcept list healthrecord getallhealthrecord throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from personalhealthinform + where patientid= order by asofd desc resultset rs rs ps.executequeri return loader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps add health record patient param record healthrecord object insert return indic throw dbexcept boolean add healthrecord record throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into personalhealthinform patientid height weight + smoker bloodpressuren bloodpressur cholesterolhdl cholesterolldl cholesteroltri + hcpid valu loader.loadparamet ps record int ps.executeupd return numinsert catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag import import import import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.enums.gend import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.nohealthrecordsexcept import edu.ncsu.csc.itrust.risk.factors.agefactor import edu.ncsu.csc.itrust.risk.factors.cholesterolfactor import edu.ncsu.csc.itrust.risk.factors.ethnicityfactor import edu.ncsu.csc.itrust.risk.factors.familyhistoryfactor import edu.ncsu.csc.itrust.risk.factors.genderfactor import edu.ncsu.csc.itrust.risk.factors.hypertensionfactor import edu.ncsu.csc.itrust.risk.factors.patientriskfactor import edu.ncsu.csc.itrust.risk.factors.priordiagnosisfactor import edu.ncsu.csc.itrust.risk.factors.smokingfactor import edu.ncsu.csc.itrust.risk.factors.weightfactor check see given risk heart diseas detail see link riskcheck author andi /public class heartdiseaserisk extend riskcheck heartdiseaserisk daofactori factori throw dbexcept nohealthrecordsexcept factori patientid overrid qualifiesfordiseas return overrid protect list patientriskfactor getdiseaseriskfactor list patientriskfactor factor arraylist patientriskfactor factors.add genderfactor patient gender.mal factors.add agefactor patient ethnicityfactor patient hispan africanamerican americanindian factors.add weightfactor currenthealthrecord hypertensionfactor currenthealthrecord factors.add cholesterolfactor currenthealthrecord factors.add smokingfactor factori patient.getmid factors.add priordiagnosisfactor factori patient.getmid familyhistoryfactor factori patient.getmid return factor overrid string getnam return heart diseas 
packag edu.ncsu.csc.itrust.bean store data hospit bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class hospitalbean string hospitalid string hospitalnam hospitalbean hospitalbean string id id hospitalbean string id string name id hospitalnam name string gethospitalid return hospitalid void sethospitalid string hospitalid this.hospitalid hospitalid string gethospitalnam return hospitalnam sethospitalnam string hospitalnam this.hospitalnam hospitalnam overrid boolean equal object return obj.getclass .equal this.getclass this.equ hospitalbean obj int hashcod hashcod design return equal hospitalbean return hospitalid.equ other.hospitalid hospitalname.equ other.hospitalnam
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.hospitalbean loader hospitalbean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class hospitalbeanload implement beanload hospitalbean list hospitalbean loadlist resultset rs throw sqlexcept arraylist hospitalbean list arraylist hospitalbean rs.next loadsingl rs return list hospitalbean loadsingl resultset rs throw sqlexcept hospitalbean hosp hospitalbean hospitalbean hosp hospitalbean rs.getstr hospitalid rs.getstr hospitalnam return hosp preparedstat loadparamet preparedstat ps hospitalbean bean throw sqlexcept throw illegalstateexcept unimpl 
packag edu.ncsu.csc.itrust.valid import edu.ncsu.csc.itrust.action.updatehospitallistact import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept valid input bean link updatehospitallistact author andi /public class hospitalbeanvalid extend beanvalid hospitalbean default constructor hospitalbeanvalid perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid hospitalbean h throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat hospit id h.gethospitalid validationformat.hospital_id errorlist.addifnotnul checkformat name h.gethospitalnam validationformat.hospital_nam errorlist.haserror throw formvalidationexcept errorlist 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.hospitalbeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept use manag hospit dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao author andi /public class hospitalsdao daofactori factori hospitalbeanload hospitalload hospitalbeanload constructor param factori link daofactori associ dao use obtain sql connect etc hospitalsdao daofactori factori factori return list hospit sort return a java.util.list hospitalbean throw dbexcept list hospitalbean getallhospit throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from hospit order by hospitalnam resultset rs ps.executequeri return hospitalloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return hospit given id param id string id hospit return hospitalbean repres hospit throw dbexcept hospitalbean gethospit string id throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from hospit where hospitalid ps.setstr resultset rs ps.executequeri return hospitalloader.loadsingl rs return catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps add param hosp hospitalbean object insert return indic insert throw dbexcept throw itrustexcept hospitalbean hosp throw dbexcept itrustexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into hospit hospitalid hospitalnam + valu ps.setstr ps.setstr return == ps.executeupd catch sqlexcept e e.printstacktrac == e.geterrorcod throw itrustexcept error hospit exist throw dbexcept e dbutil.closeconnect conn ps updat hospit descript return number row affect param hosp hospitalbean updat return int indic number affect row throw dbexcept int hospitalbean hosp throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat hospit set hospitalnam + where hospitalid ps.setstr hosp.gethospitalnam ps.setstr return ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps assign hcp hospit assign itrustexcept param hcpid hcp mid assign hospit param hospitalid id hospit assign return indic success throw dbexcept throw itrustexcept assignhospit string hospitalid throw dbexcept itrustexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into hcpassignedho hcpid hosid valu hcpid ps.setstr return == ps.executeupd catch sqlexcept == e.geterrorcod throw itrustexcept hcp + hcpid + assign hospit hospitalid e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps unassign hcp hospit return chang made param hcpid mid hcp remov param id hospit remov return a indic success throw dbexcept removehospitalassign string hospitalid throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat delet from hcpassignedho where hcpid and hosid hcpid ps.setstr return == ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps remov assign hcp return number row affect mid hcp return int repres number hospit assign remov throw dbexcept int removeallhospitalassignmentsfrom hcpid throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat delet from hcpassignedho where hcpid return ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag escap key html charact check author andi /public class htmlencod escap html charact param input string check escap return string encod string input input == return string str input.replaceal lt str str.replaceal gt str str.replaceal \n br return str check url param input url check return input contain http boolean urlonsit string input return input.contain 
packag edu.ncsu.csc.itrust.risk.factor import check patient blood pressur given see link patientriskfactor detail method andi /public class hypertensionfactor extend patientriskfactor int systolicthreshold int diastolicthreshold healthrecord record public hypertensionfactor healthrecord currenthealthrecord this.record currenthealthrecord string getdescript return hypertens hasfactor return || record.getbloodpressurediastol diastolicthreshold 
packag edu.ncsu.csc.itrust.tag import java.io.ioexcept import javax.servlet.jsp.jspexcept import javax.servlet.jsp.jspwrit import javax.servlet.jsp.pagecontext import javax.servlet.jsp.tagext.tag jsp tag use util link icd9cm site author andi /public class icd9cmlink implement tag pagecontext pagecontext tag parent string code icd9cmlink int dostarttag throw jspexcept tri jspwriter pagecontext.getout href=\ http //icd9cm.chrisendres.com/2007/index.php srchtype=diseas srchtext= code submit=search action=search\ + code catch ioexcept e.printstacktrac return skip_bodi int doendtag throw jspexcept return skip_bodi releas setpagecontext pagecontext pagecontext pagecontext setpar tag parent parent tag getpar return parent string getcod return code setcod string code code setcod code string.valueof code 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.diagnosisbeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept use manag icd code dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao intern statist classif diseas relat health problem known abbrevi icd provid code classifi diseas varieti sign symptom find complaint circumst caus diseas see //www.cdc.gov/nchs/icd9.htm author andi /public class icdcodesdao daofactori factori diagnosisbeanload diagnosisload diagnosisbeanload constructor param factori link daofactori associ dao use obtain sql connect etc icdcodesdao daofactori factori factori return icd9cm code sort return java.util.list diagnosisbean throw dbexcept list diagnosisbean getallicdcod throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from icdcod order by code resultset rs ps.executequeri return diagnosisloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return descript given code param code string represent code return diagnosisbean code throw dbexcept diagnosisbean geticdcod string code throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from icdcod where code ps.setstr code resultset rs ps.executequeri return diagnosisloader.loadsingl rs return catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps add icd9cm code return chang made param diag diagnosisbean repres chang return indic success throw dbexcept throw itrustexcept addicdcod diagnosisbean diag throw dbexcept itrustexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into icdcod code descript chronic + valu ps.setstr diag.geticdcod ps.setstr diag.getdescript ps.setstr diag.getclassif return == ps.executeupd catch sqlexcept e e.printstacktrac == e.geterrorcod throw itrustexcept error code exist throw dbexcept e dbutil.closeconnect conn ps chang descript code param diag diagnosisbean repres chang return indic number updat row throw dbexcept int diagnosisbean diag throw dbexcept int row connect conn null preparedstat ps tri factory.getconnect ps conn.preparestat updat icdcod set descript chronic where code ps.setstr diag.getdescript ps.setstr diag.getclassif ps.setstr diag.geticdcod row ps.executeupd catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return row 
packag import java.sql.connect import java.sql.sqlexcept use daofactori way get jdbc connect author andi /public interfac iconnectiondriv connect getconnect throw sqlexcept 
packag edu.ncsu.csc.itrust.except a except class display error messag except handl default itrust except handler class itrustexcept extend except long serialversionuid string messag null constructor param messag messag display itrustexcept string messag messag messag display messag secur reason overrid string getmessag messag == return error occur pleas see detail return messag except show detail deleg return string getextendedmessag return no inform 
packag edu.ncsu.csc.itrust.bean import java.sql.timestamp a bean store data lab procedur a bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class labprocedurebean static string not_receiv not yet receiv static string pend pend static string complet complet static string allow allow string restrict restrict uniqu number start uniqu identifi laboratori procedur procedureid digit format string loinc not yet receiv pend complet string statu up charact string commentari up charact string result offic visitid identifi specifi offic visit laboratori procedur order ovid date/tim statu timestamp timestamp timestamp permiss grant test allow restrict string right allow labprocedurebean uniqu number start return uniqu number start void setpid pid uniqu procedur return procedureid uniqu procedur void setprocedureid procedureid digit string getloinc return loinc digit void setloinc string loinc loinc not yet receiv pend complet string getstatu return statu not yet receiv pend complet void setstatu string statu this.statu statu charact string return commentari charact void string commentari commentari charact string getresult return result up charact void setresult string result result offic visitid identifi specifi offic visit laboratori procedur order return offic visitid identifi specifi offic visit laboratori procedur order void setovid this.ovid ovid timestamp gettimestamp return timestamp void settimestamp timestamp timestamp timestamp permiss grant test allow restrict string getright return right permiss grant test allow restrict setright string right this.right right this.right allow restrict this.right restrict statuscomplet this.statu complet statuspend this.statu pend void statusnotreceiv this.statu not_receiv
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.labprocedurebean loader labprocedurebean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class labprocedurebeanload implement beanload labprocedurebean list labprocedurebean loadlist resultset rs throw sqlexcept arraylist labprocedurebean list arraylist labprocedurebean rs.next loadsingl rs return list labprocedurebean loadsingl resultset rs throw sqlexcept labprocedurebean labprocedur labprocedurebean labprocedure.setprocedureid laboratoryprocedureid labprocedure.setpid rs.getlong patientmid labprocedure.setloinc rs.getstr laboratoryprocedurecod labprocedure.setstatu rs.getstr statu labprocedure.setcommentari rs.getstr commentari labprocedure.setresult rs.getstr result labprocedure.setovid officevisitid labprocedure.settimestamp rs.gettimestamp updatedd labprocedure.setright rs.getstr right return labprocedur preparedstat loadparamet preparedstat ps labprocedurebean bean throw sqlexcept throw illegalstateexcept unimpl 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.labprocedurebeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept a dao manag procedur code databas access object all info come dao valid just worri db stuff note dao need daofactori access dao get connect dao constructor daofactori paramet /public class labproceduredao daofactori factori labprocedurebeanload labprocedureload constructor param factori link daofactori associ dao use obtain sql connect etc labproceduredao daofactori factori factori labprocedurebeanload get lab procedur associ given param id mid patient return a java.util.list labprocedurebean throw dbexcept list labprocedurebean getlabproceduresforpati throw dbexcept connect conn preparedstat ps tri id sqlexcept patientmid null conn factory.getconnect conn.preparestat select from labprocedur where patientmid and right order by updatedd desc ps.setstr labprocedurebean.allow resultset rs ps.executequeri return labprocedureloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps get procedur given occur month param id mid patient return a java.util.list labprocedurebean throw dbexcept list labprocedurebean getlabproceduresforpatientfornextmonth throw dbexcept connect conn preparedstat ps tri id sqlexcept patientmid null conn factory.getconnect conn.preparestat select from labprocedur where patientmid and right and statu and datediff sysdat updatedd order by updatedd desc ps.setstr labprocedurebean.allow ps.setstr resultset rs ps.executequeri return labprocedureloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps get lab procedur param id id lab procedur return repres procedur throw dbexcept labprocedurebean getlabprocedur throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from labprocedur where laboratoryprocedureid resultset rs ps.executequeri return labprocedureloader.loadsingl rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps get procedur patient param mid return a java.util.list labprocedurebean throw dbexcept list labprocedurebean getalllabproceduresd throw dbexcept connect conn preparedstat ps tri mid sqlexcept patientmid null conn factory.getconnect conn.preparestat select from labprocedur where patientmid order by updatedd desc resultset rs ps.executequeri return labprocedureloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps get procedur patient offic visit param mid mid param offic visit id return a java.util.list labprocedurebean throw dbexcept list labprocedurebean getalllabproceduresfordocov throw dbexcept connect conn preparedstat ps tri mid sqlexcept patientmid null conn factory.getconnect conn.preparestat select from labprocedur where patientmid and officevisitid order by updatedd desc mid resultset rs ps.executequeri return labprocedureloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps get procedur patient offic visit param mid mid param offic visit id return a java.util.list labprocedurebean throw dbexcept list labprocedurebean getalllabproceduresfordocov throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from labprocedur where officevisitid resultset rs ps.executequeri return labprocedureloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps get procedur period return java.util.list labprocedurebean throw dbexcept list labprocedurebean getalllabprocedur throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from labprocedur order by updatedd asc resultset rs ps.executequeri return labprocedureloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps get procedur given lhcp occur month param offic visit id conduct lhcp question return a java.util.list labprocedurebean throw dbexcept list labprocedurebean getlabproceduresforlhcpfornextmonth throw dbexcept connect conn preparedstat ps tri sqlexcept officevisitid null conn factory.getconnect conn.preparestat select from labprocedur where officevisitid and statu and datediff sysdat updatedd order by updatedd desc ps.setstr resultset rs ps.executequeri return labprocedureloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps insert procedur databas param labprocedurebean insert return a contain id insert procedur bean throw dbexcept labprocedurebean throw dbexcept connect conn preparedstat ps tri b.getpid sqlexcept patientmid null conn factory.getconnect conn.preparestat insert into labprocedur patientmid laboratoryprocedurecod statu commentari result officevisitid right valu b.getpid ps.setstr b.getloinc ps.setstr b.getstatu ps.setstr ps.setstr b.getresult b.getovid ps.setstr b.getright return dbutil.getlastinsert conn catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps updat exist procedur param labprocedurebean repres procedur updat throw dbexcept void labprocedurebean throw dbexcept connect conn preparedstat ps tri b.getpid sqlexcept patientmid null conn factory.getconnect conn.preparestat labprocedur set statu commentari result updatedd where laboratoryprocedureid= ps.setstr b.getstatu ps.setstr ps.setstr b.getresult ps.settimestamp java.sql.timestamp system.currenttimemilli b.getprocedureid ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps get procedur correspond loinc param id loinc question return a java.util.list labprocedurebean throw dbexcept list labprocedurebean getalllabproceduresloinc throw dbexcept connect conn preparedstat ps tri id sqlexcept patientmid null conn factory.getconnect conn.preparestat select from labprocedur where patientmid order by laboratoryprocedurecod asc resultset rs ps.executequeri return labprocedureloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps updat right user given procedur param question throw dbexcept void updateright labprocedurebean throw dbexcept connect conn preparedstat ps tri b.getpid sqlexcept patientmid null conn factory.getconnect conn.preparestat labprocedur set right updatedd where laboratoryprocedureid= ps.setstr b.getright java.sql.timestamp system.currenttimemilli b.getprocedureid ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.valid import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept class labprocedurevalid perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid void valid labprocedurebean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat loinc b.getloinc validationformat.loinc errorlist.addifnotnul checkformat commentari validationformat.com errorlist.addifnotnul checkformat result validationformat.com errorlist.addifnotnul checkformat statu b.getstatu validationformat.lab_statu errorlist.addifnotnul checkformat right b.getright validationformat.lab_right errorlist.haserror throw formvalidationexcept errorlist protect string checkformat string name string valu validationformat boolean string errormessag name + format.getdescript valu == || .equal valu return errormessag format.getregex valu .match return return errormessag 
packag edu.ncsu.csc.itrust.act import java.util.list import java.util.arraylist import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.labproceduredao import edu.ncsu.csc.itrust.dao.mysql.officevisitdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.validate.labprocedurevalid action class labprochcp.jsp extend labprocuapact /public class labprochcpact extend labprocuapact transactiondao transdao labproceduredao lpdao officevisitdao ovdao labprocedurevalid valid set default factori daofactori use creat dao use action param loggedinmid mid log hcp labprochcpact daofactori factori factori loggedinmid transdao factory.gettransactiondao lpdao factory.getlabproceduredao ovdao factory.getofficevisitdao this.loggedinmid loggedinmid valid labprocedurevalid sort loinc return list param id id sort list return list sort loinc list labprocedurebean sortbyloinc throw dbexcept return lpdao.getalllabproceduresloinc id return list lab procedur month return lab procedur month list labprocedurebean getlabprocfornextmonth throw dbexcept list labprocedurebean listlabproc arraylist labprocedurebean list officevisitbean listov officevisitbean ov listov == lpdao.getlabproceduresforlhcpfornextmonth ov.getid lb listlabproc.add lb return chang privaci set param id procedur chang void changeprivaci x throw dbexcept formvalidationexcept labprocedurebean pb lpdao.getlabprocedur x checkaccess x pb.getright .equal labprocedurebean.restrict pb.allow pb.restrict validator.valid lpdao.updateright pb transdao.logtransact transactiontype.enter_edit_lab_procedur loggedinmid pb.getpid privaci chang procedur id pb.getprocedureid check see log hcp made procedur use link page officevisit param x id hcp check checkaccess throw dbexcept formvalidationexcept labprocedurebean pb lpdao.getlabprocedur officevisitbean ovdao.getofficevisit pb.getovid return loggedinmid == ovbean.gethcpid 
packag edu.ncsu.csc.itrust.act import java.util.array import java.util.list import edu.ncsu.csc.itrust.emailutil edu.ncsu.csc.itrust.beans.email import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.labproceduredao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.validate.labprocedurevalid class labprocuap.jsp handl lab procedur uap class labprocuapact transactiondao transdao labproceduredao lpdao labprocedurevalid valid daofactori factori setup param factori daofactori use creat dao use action param loggedinmid uap log labprocuapact daofactori factori factory.gettransactiondao lpdao factory.getlabproceduredao this.loggedinmid loggedinmid valid labprocedurevalid this.factori factori updat procedur procedur throw dbexcept throw formvalidationexcept void labprocedurebean throw dbexcept formvalidationexcept validator.valid //need check statu chang statu statu send email b.getstatu .equal lpdao.getlabprocedur .getstatu emailutil factori .sendemail makeemail lpdao.updatelabprocedur transdao.logtransact transactiontype.enter_edit_lab_procedur loggedinmid uap procedur id b.getprocedureid send inform procedur updat procedur updat patient notic throw dbexcept email makeemail labprocedurebean throw dbexcept patientbean patientdao factori .getpati b.getpid email email email email.setfrom itrust.com arrays.aslist p.getemail email.setsubject lab procedur wa updat email.setbodi string.format dear \n your lab procedur updat statu log view b.getloinc b.getstatu return email return list lab procedur param mid uap view procedur return lab procedur uap throw dbexcept list labprocedurebean viewprocedur throw dbexcept transdao.logtransact transactiontype.view_lab_procedur loggedinmid uap view procedur return id 
packag import java.util.local provid singleton access local itrust could load countri languag file class local local currentlocal local local us return return local getcurrentlocal return currentlocal local currentinst singleton method want make know itrust multithread return local instanc local instanc currentinst == currentinst local return currentinst 
packag edu.ncsu.csc.itrust.act import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.authdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept pleas note mitig denial servic attack way keep track password failur attempt user account not ip address reason featur implement address limit tomcat authent jsp fault specifi form account lockout br authent applic done contain tomcat support account so option implement authent jdbcrealm class tomcat sourc code 've look onli reason implement code buri tomcat instal want learn authent feel chang extend author andi /public class loginfailureact int max_login_attempt authdao authdao string ipaddr transactiondao transactiondao set default factori daofactori use creat dao use action param ipaddr ip address user make loginfailureact daofactori factori string ipaddr factory.getauthdao this.ipaddr ipaddr this.transactiondao factory.gettransactiondao call authdao record login failur databas return how login failur attempt dbexcept messag string recordloginfailur tri authdao.recordloginfailur ipaddr int loginfailur authdao.getloginfailur transactiondao.logtransact transactiontype.login_failur ip + ipaddr return login fail attempt loginfailur catch dbexcept e.printstacktrac return e.getmessag check see login failur return user login boolean isvalidforlogin tri return authdao.getloginfailur ipaddr catch dbexcept e system.err.println deni access dbexcept return 
packag edu.ncsu.csc.itrust.bean store data lab procedur code a bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class loincbean string labprocedurecod string compon string kindofproperti string timeaspect string system string scaletyp string methodtyp loincbean string getlabprocedurecod return labprocedurecod setlabprocedurecod string alabprocedurecod string getcompon return compon setcompon string acompon string getkindofproperti return kindofproperti setkindofproperti string akindofproperti kindofproperty=akindofproperti string gettimeaspect return timeaspect settimeaspect string atimeaspect string getsystem return system setsystem string asystem system=asystem string getscaletyp return scaletyp setscaletyp string ascaletyp string getmethodtyp return methodtyp setmethodtyp string amethodtyp methodtype=amethodtyp
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.loincbean loader loincbean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class loincbeanload implement beanload loincbean list loincbean loadlist resultset rs throw sqlexcept arraylist loincbean list arraylist loincbean rs.next loadsingl rs return list loincbean loadsingl resultset rs throw sqlexcept loincbean loinc loincbean loinc.setlabprocedurecod rs.getstr laboratoryprocedurecod loinc.setcompon rs.getstr compon loinc.setkindofproperti rs.getstr kindofproperti loinc.settimeaspect rs.getstr timeaspect loinc.setsystem rs.getstr system loinc.setscaletyp rs.getstr scaletyp loinc.setmethodtyp rs.getstr methodtyp return loinc preparedstat loadparamet preparedstat ps loincbean bean throw sqlexcept throw illegalstateexcept unimpl 
packag edu.ncsu.csc.itrust.valid import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept valid use loincbean /public class loincbeanvalid extend beanvalid loincbean default constructor loincbeanvalid perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid loincbean throw formvalidationexcept errorlist errorlist errorlist m.getlabprocedurecod ==null || m.getcompon ==null || m.getkindofproperti ==null throw formvalidationexcept lab procedur code compon kind properti errorlist.addifnotnul laboratoryprocedurecod m.getlabprocedurecod validationformat.loinc errorlist.addifnotnul checkformat compon m.getcompon validationformat.loinc_item errorlist.addifnotnul checkformat kindofproperti m.getkindofproperti validationformat.loinc_item errorlist.addifnotnul checkformat timeaspect m.gettimeaspect validationformat.loinc_item errorlist.addifnotnul checkformat system m.getsystem validationformat.loinc_item errorlist.addifnotnul checkformat scaletyp m.getscaletyp validationformat.loinc_item errorlist.addifnotnul checkformat methodtyp m.getmethodtyp validationformat.loinc_item errorlist.haserror throw formvalidationexcept errorlist 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.loincbeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao logic observ identifi name code loinc databas standard identifi laboratori observ see //loinc.org/ author ben smith /public class loincdao daofactori factori loincbeanload loincload constructor param factori link daofactori associ dao use obtain sql connect etc loincdao daofactori factori factori loincload loincbeanload add loinc param hosp loincbean repres code ad throw dbexcept throw itrustexcept void loincbean hosp throw dbexcept itrustexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into loinc laboratoryprocedurecod compon kindofproperti timeaspect system scaletyp methodtyp + valu ps.setstr hosp.getlabprocedurecod ps.setstr ps.setstr hosp.getkindofproperti ps.setstr ps.setstr hosp.getsystem ps.setstr ps.setstr ps.executeupd catch sqlexcept e e.printstacktrac == e.geterrorcod throw itrustexcept error loinc exist throw dbexcept e dbutil.closeconnect conn ps return loinc associ laboratoryprocedurecod param visitid code laboratori procedur code string return a java.util.list loincbean match laboratori procedur code throw dbexcept list loincbean getprocedur string visitid throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from loinc where laboratoryprocedurecod ps.setstr resultset rs ps.executequeri return loincloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps updat inform loinc param ov throw dbexcept int loincbean ov throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat updat loinc set component= kindofproperty= timeaspect= system= scaletype= methodtype= where laboratoryprocedurecode= ps.setstr ps.setstr ps.setstr ps.setstr ov.getsystem ps.setstr ps.setstr ps.setstr return ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return loinc list return a java.util.list loincbean throw dbexcept list loincbean getallloinc throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from loinc resultset rs ps.executequeri return loincloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.valid import edu.ncsu.csc.itrust.exception.formvalidationexcept import org.apache.commons.valid class mailvalid extend emailvalid default constructor mailvalid perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid validateemail string email throw formvalidationexcept mailvalid mailvalid return email 
packag edu.ncsu.csc.itrust.act import java.util.list import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.hospitalsdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.itrustexcept manag assign hcp hospit use hospitalassignments.jsp author class managehospitalassignmentsact transactiondao transdao personneldao personneldao hospitalsdao hospitalsdao set default factori daofactori use creat dao use action param loggedinmid mid user manag hospit managehospitalassignmentsact daofactori factori this.loggedinmid loggedinmid this.transdao factory.gettransactiondao this.personneldao factory.getpersonneldao this.hospitalsdao factory.gethospitalsdao return list hospit given mid assign param midstr list hospitalbean throw itrustexcept list hospitalbean getavailablehospit string midstr throw itrustexcept tri mid long.valueof midstr list hospitalbean allhospit hospitalsdao.getallhospit list hospitalbean ourhospit personneldao.gethospit mid allhospitals.remov return allhospit catch numberformatexcept throw itrustexcept hcp mid number return list hospit given mid assign param midstr list hosptialbean throw itrustexcept list hospitalbean getassignedhospit string midstr throw itrustexcept tri mid long.valueof midstr return personneldao.gethospit mid catch numberformatexcept throw itrustexcept hcp mid number assign hospit param midstr mid person assign string param hospitalid id hospit return messag indic statu assign throw string assignhcptohospit string midstr string hospitalid throw itrustexcept tri hcpid long.valueof midstr confirm hospitalsdao.assignhospit hcpid hospitalid confirm patient mention transact type look personnel includ transdao.logtransact transactiontype.enter_edit_demograph loggedinmid hcpid hcp assign hospit return hcp assign return assign occur catch numberformatexcept throw itrustexcept hcp mid number remov hcp assign design param midstr hcp mid param hospitalid hospit id remov return statu messag throw string removehcpassignmenttohospit string midstr string hospitalid throw itrustexcept tri hcpid long.valueof midstr confirm hospitalsdao.removehospitalassign hcpid hospitalid confirm transdao.logtransact transactiontype.enter_edit_demograph loggedinmid hcpid hcp unassign hospit return hcp unassign return hcp catch numberformatexcept throw itrustexcept hcp mid number remov assign given hcp midstr hcp return statu messag throw int removeallassignmentsfromhcp string midstr throw itrustexcept tri hcpid long.valueof midstr int numassign hospitalsdao.removeallhospitalassignmentsfrom numassign transdao.logtransact transactiontype.enter_edit_demograph loggedinmid hcpid hcp unassign hospit return numassign catch numberformatexcept throw itrustexcept hcp mid number check param hcp param hcpid string check return mid hcpid hcp mid throw string hcpid throw itrustexcept tri long.valueof hcpid personneldao.checkpersonnelexist pid return throw itrustexcept hcp exist catch numberformatexcept throw itrustexcept hcp id number e.getmessag 
packag edu.ncsu.csc.itrust.bean medic thing nd code aspirin medic associ offic visit prescript see link prescriptionbean author andi mene class medicationbean string ndcode string descript medicationbean medicationbean string code ndcode code medicationbean string code string descript ndcode code this.descript descript get nd code procedur return nd code procedur string getndcod return ndcode setndcod string code ndcode code get descript procedur return nd descript procedur string getdescript return descript setdescript string descript this.descript descript string getndcodeformat string code getndcod code.length return code.substr + + code.substr return code overrid boolean equal object return this.getclass .equal other.getclass this.equ medicationbean int hashcod hashcod design return equal medicationbean return description.equ other.descript ndcode.equ other.ndcod 
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.medicationbean loader medicationbean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class medicationbeanload implement beanload medicationbean medicationbeanload list medicationbean loadlist resultset rs throw sqlexcept arraylist medicationbean list arraylist medicationbean rs.next loadsingl rs return list medicationbean loadsingl resultset rs throw sqlexcept medicationbean med medicationbean medicationbean med medicationbean rs.getstr code med.setdescript rs.getstr descript return med preparedstat loadparamet preparedstat ps medicationbean bean throw sqlexcept throw illegalstateexcept unimpl 
packag edu.ncsu.csc.itrust.valid import edu.ncsu.csc.itrust.action.updatendcodelistact import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept valid nd code bean link updatendcodelistact author andi /public class medicationbeanvalid extend beanvalid medicationbean default constructor medicationbeanvalid perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid medicationbean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat nd code m.getndcod validationformat.nd errorlist.addifnotnul checkformat descript m.getdescript validationformat.nd_code_descript errorlist.haserror throw formvalidationexcept errorlist 
packag edu.ncsu.csc.itrust.bean import java.sql.timestamp a bean store data messag user a bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class messagebean parentmsgid string string bodi timestamp timestamp int read get mid recipi messag return return set mid recipi messag param void this.to return id setmessageid id return this.parentmsgid setparentmessageid parentmsgid get mid sender messag return return set mid sender messag param void setfrom get messag return string getsubject return set messag param void setsubject string this.subject subject get messag return string getbodi return bodi set messag bodi void setbodi string bodi this.bodi bodi get time messag return timestamp getsentd return this.timestamp set time messag param timestamp void setsentd timestamp timestamp timestamp get messag return int getread return this.read set messag int read read
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.messagebean loader messagebean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class messagebeanload implement beanload messagebean list messagebean loadlist resultset rs throw sqlexcept list messagebean list arraylist messagebean rs.next list.add loadsingl rs return list preparedstat loadparamet preparedstat ps messagebean messag throw sqlexcept message.getfrom message.getto ps.setstr message.getbodi ps.setstr ps.setint message.getread message.getparentmessageid message.getparentmessageid return messagebean loadsingl resultset rs throw sqlexcept messagebean messag messagebean message.setmessageid rs.getlong message_id message.setfrom message.setto to_id message.setsubject rs.getstr message.setbodi rs.getstr messag message.setsentd rs.gettimestamp sent_dat message.setread rs.getint been_read message.setparentmessageid parent_msg_id return messag 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.messagebeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept use log mechan dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao author andi /public class messagedao daofactori factori messagebeanload mbloader constructor param factori link daofactori associ dao use obtain sql connect etc messagedao daofactori factori factori this.mbload messagebeanload get messag mid param mid mid user look return a java.util.list messagebean throw sqlexcept list messagebean getmessagesfor throw sqlexcept connect conn preparedstat ps null conn factory.getconnect conn.preparestat select from messag where to_id order by sent_dat desc resultset rs ps.executequeri list messagebean mblist this.mbloader.loadlist rs dbutil.closeconnect conn ps return mblist get messag mid sort ascend time param mid mid user look return a java.util.list messagebean throw sqlexcept list messagebean getmessagestimeascend throw sqlexcept connect conn preparedstat ps null conn factory.getconnect conn.preparestat select from messag where to_id order by sent_dat asc resultset rs ps.executequeri list messagebean mblist this.mbloader.loadlist rs dbutil.closeconnect conn ps return mblist get messag mid sort name ascend param mid mid user look return a java.util.list messagebean throw sqlexcept list messagebean getmessagesnameascend throw sqlexcept connect conn preparedstat ps null resultset rs conn factory.getconnect mid ps conn.preparestat messag from messag patient where message.from_id=patients.mid and message.to_id= order by patients.lastnam asc patients.firstnam asc message.sent_d asc rs ps.executequeri ps conn.preparestat messag from messag personnel where message.from_id=personnel.mid and message.to_id= order by personnel.lastnam asc personnel.firstnam asc message.sent_d asc rs ps.executequeri list messagebean mblist this.mbloader.loadlist rs dbutil.closeconnect conn ps return mblist get messag mid sort name descend param mid mid user look return a java.util.list messagebean throw sqlexcept list messagebean getmessagesnamedescend throw sqlexcept connect conn preparedstat ps null resultset rs conn factory.getconnect mid ps conn.preparestat messag from messag patient where message.from_id=patients.mid and message.to_id= order by patients.lastnam desc patients.firstnam desc message.sent_d desc rs ps.executequeri ps conn.preparestat messag from messag personnel where message.from_id=personnel.mid and message.to_id= order by personnel.lastnam desc personnel.firstnam desc message.sent_d desc rs ps.executequeri list messagebean mblist this.mbloader.loadlist rs dbutil.closeconnect conn ps return mblist get messag mid param mid mid user look return a java.util.list messagebean throw sqlexcept list messagebean getmessagesfrom throw sqlexcept connect conn preparedstat ps null conn factory.getconnect conn.preparestat select from messag where from_id order by sent_dat desc resultset rs ps.executequeri list messagebean mblist this.mbloader.loadlist rs dbutil.closeconnect conn ps return mblist get messag mid sort ascend time param mid mid user look return a java.util.list messagebean throw sqlexcept list messagebean getmessagesfromtimeascend throw sqlexcept connect conn preparedstat ps null conn factory.getconnect conn.preparestat select from messag where from_id order by sent_dat asc resultset rs ps.executequeri list messagebean mblist this.mbloader.loadlist rs dbutil.closeconnect conn ps return mblist get messag mid sort name ascend param mid mid user look return a java.util.list messagebean throw sqlexcept list messagebean getmessagesfromnameascend throw sqlexcept connect conn preparedstat ps null resultset rs conn factory.getconnect mid ps conn.preparestat messag from messag patient where message.to_id=patients.mid and message.from_id= order by patients.lastnam asc patients.firstnam asc message.sent_d asc rs ps.executequeri ps conn.preparestat messag from messag personnel where message.to_id=personnel.mid and message.from_id= order by personnel.lastnam asc personnel.firstnam asc message.sent_d asc rs ps.executequeri list messagebean mblist this.mbloader.loadlist rs dbutil.closeconnect conn ps return mblist get messag mid sort name descend param mid mid user look return a java.util.list messagebean throw sqlexcept list messagebean getmessagesfromnamedescend throw sqlexcept connect conn preparedstat ps null resultset rs conn factory.getconnect mid ps conn.preparestat messag from messag patient where message.to_id=patients.mid and message.from_id= order by patients.lastnam desc patients.firstnam desc message.sent_d desc rs ps.executequeri ps conn.preparestat messag from messag personnel where message.to_id=personnel.mid and message.from_id= order by personnel.lastnam desc personnel.firstnam desc message.sent_d desc rs ps.executequeri list messagebean mblist this.mbloader.loadlist rs dbutil.closeconnect conn ps return mblist add messag databas mbean repres messag ad sqlexcept public void addmessag mbean throw sqlexcept connect conn preparedstat ps null conn factory.getconnect mbean.getparentmessageid == ps conn.preparestat insert into messag from_id to_id messag been_read valu now this.mbloader.loadparamet ps conn.preparestat insert into messag from_id to_id messag been_read parent_msg_id valu now this.mbloader.loadparamet ps dbutil.closeconnect conn ps messagebean mbean throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat messag set been_read=1 where message_id= mbean.getmessageid ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag import java.util.missingresourceexcept import java.util.resourcebundl class messag string bundle_nam edu.ncsu.csc.itrust.messag resourcebundl resource_bundl resourcebundle.getbundl bundle_nam localization.inst .getcurrentlocal string getstr string key tri return resource_bundle.getstr catch missingresourceexcept return + + 
packag edu.ncsu.csc.itrust.valid import edu.ncsu.csc.itrust.action.editofficevisitact import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept use valid updat offic visit editofficevisitact author andi /public class messagevalid extend beanvalid messagebean messagevalid valid messagebean mbean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat bodi mbean.getbodi validationformat.messages_bodi errorlist.addifnotnul checkformat mbean.getsubject validationformat.messages_subject errorlist.haserror throw formvalidationexcept errorlist 
packag edu.ncsu.csc.itrust.act use pha view report event java.sql.sqlexcept import java.text.parseexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.emailutil import edu.ncsu.csc.itrust.beans.email import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.adverseeventdao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept class monitoradverseeventact emailutil email patientdao patientdao adverseeventdao adverseeventdao transactiondao transactiondao sendmessageact messeng constructor param factori param loggedinmid monitoradverseeventact daofactori factori this.loggedinmid loggedinmid this.transactiondao factory.gettransactiondao this.patientdao factory.getpatientdao this.email emailutil factori this.adverseeventdao factory.getadverseeventdao this.messeng sendmessageact factori loggedinmid return list report specifi date isprescript boolean return prescript immun param start start date end end date return list event throw itrustexcept throw formvalidationexcept throw sqlexcept throw parseexcept list adverseeventbean getreport isprescript string start string end throw itrustexcept formvalidationexcept sqlexcept parseexcept isprescript transactiondao.logtransact transactiontype.adverse_ev loggedinmid prescript report request return adverseeventdao.getperscript start end immun transactiondao.logtransact transactiontype.adverse_ev loggedinmid immun report request return adverseeventdao.getimmun start end return patient name param mid mid return name return string getnam mid tri return patientdao.getnam mid catch dbexcept return catch itrustexcept return patient longer exist send patient request inform param patientmid patient messag param messag messag return string test purpos throw dbexcept string sendemail string messag throw dbexcept string list string arraylist string patientbean receiv patientdao.getpati patientmid tolist.add receiver.getemail email mail email mail.setbodi messag mail.setfrom loggedinmid + mail.settolist tolist mail transactiondao.logtransact transactiontype.adverse_ev loggedinmid request inform rvalu + mail.getfrom + mail.getbodi return method use remov event report param report remov throw dbexcept throw itrustexcept void remov int id throw dbexcept itrustexcept formvalidationexcept hcpmid tri adverseeventdao.getreport id adverseeventdao.removereport id hcpmid adverseeventdao.gethcpmid messagebean mbeantwo messagebean messagebean mbeanon messagebean string bodi event aebean.getdrug + perscrib patientdao.getnam long.parselong aebean.getmid + descript aebean.getdescript remov long.parselong aebean.getmid mbeantwo.setto hcpmid mbeanone.setsubject mbeantwo.setsubject mbeanone.setbodi bodi mbeantwo.setbodi bodi mbeanone.setfrom loggedinmid mbeantwo.setfrom messenger.sendmessag mbeanon messenger.sendmessag transactiondao.logtransact transactiontype.adverse_ev loggedinmid event report remov catch sqlexcept throw dbexcept e 
packag edu.ncsu.csc.itrust.act import import java.util import import import import import import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.dao.mysql.officevisitdao import edu.ncsu.csc.itrust.dao.mysql.surveydao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.labproceduredao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept edit privaci level diagnos use mydiagnoses.jsp author class mydiagnosisact officevisitdao officevisitdao patientdao patientdao personneldao personneldao surveydao surveydao transactiondao transactiondao labproceduredao labprocdao set default factori daofactori use creat dao use action param loggedinmid mid user look diagnos throw itrustexcept mydiagnosisact daofactori factori throw itrustexcept this.loggedinmid loggedinmid this.patientdao factory.getpatientdao this.officevisitdao factory.getofficevisitdao this.personneldao factory.getpersonneldao this.surveydao factory.getsurveydao this.transactiondao factory.gettransactiondao this.labprocdao factory.getlabproceduredao return list diagnosisbean return list diagnosisbean throw dbexcept list diagnosisbean getdiagnos throw dbexcept return patientdao.getdiagnos return list hcp diagnosi param icdcod diagnosi interest return list hcp throw dbexcept list hcpdiagnosisbean gethcpbydiagnosi string icdcod throw dbexcept int medmatch hashmap long hcpdiagnosisbean hcphash hashmap long hcpdiagnosisbean hashmap long long hashmap long long transactiondao.logtransact transactiontype.find_hcps_with_exp loggedinmid hcpdiagnosisbean diag list officevisitbean bean bean bean check hcp-patient local base digit zip patientdao.getpati loggedinmid .getzip1 .substr equal personneldao.getpersonnel bean.gethcpid .getzip1 .substr continu check see hcp associ visit hcphash.containskey bean.gethcpid hcpdiagnosisbean hcphash.get bean.gethcpid prescriptionbean bean.getprescript medicationbean mlist diag.getmedlist medicationbean mlist p.getmed .getdescript .equal b.getdescript medmatch++ medmatch mlist.add p.getmed diag.setmedlist mlist medmatch get lab procedur list labprocedurebean labproc list labprocedurebean lpbean labprocedurebean lpbean labprocs.add diag.setlablist surveydao.issurveycomplet surveybean survey surveydao.getsurveydata survey.getvisitsatisfact diag.settreatmentsat survey.gettreatmentsatisfact check patient seen time diagnosi bean.getpatientid patienthash.put bean.getpatientid bean.gethcpid diag.incnumpati diag hcpdiagnosisbean list medicationbean mlist arraylist medicationbean diag.sethcp bean.gethcpid tri diag.sethcpnam personneldao.getnam bean.gethcpid catch itrustexcept diag.sethcpnam diag.incnumpati bean.getprescript mlist.add p.getmed diag.setlablist labprocdao.getalllabproceduresfordocov bean.getvisitid surveydao.issurveycomplet surveybean survey surveydao.getsurveydata survey.getvisitsatisfact diag.settreatmentsat survey.gettreatmentsatisfact patienthash.put bean.gethcpid hcphash.put bean.gethcpid diag list hcpdiagnosisbean list arraylist hcpdiagnosisbean hcphash.valu collections.sort list hcpdiagnosisbeancompar return list look prescript given hcp icd code param hcpid mid hcp param icdcod icd code prescript look return a java.util.list prescriptionbean made hcp icd code throw dbexcept list prescriptionbean getprescriptionsbyhcpandicd string icdcod throw dbexcept list prescriptionbean list arraylist prescriptionbean list officevisitbean officevisitdao.getallofficevisitsfordiagnosi int ovs.siz i++ ovs.get .gethcpid == ovs.get .getprescript return check see hcp experi diagnosi class hcpdiagnosisbeancompar implement compar hcpdiagnosisbean serializ long serialversionuid -6328390386684022934l compar hcp param hcp hcp return -1 patient patient int compar hcpdiagnosisbean hcpdiagnosisbean int ret a.getnumpati b.getnumpati ret -1 a.getnumpati b.getnumpati ret return ret 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.medicationbeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept use manag nd code dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao nation drug code ndc product identifi use unit state drug intend use see //www.fda.gov/drugs/informationondrugs/ucm142438.htm author andi /public class ndcodesdao daofactori factori medicationbeanload medicationload medicationbeanload constructor param factori link daofactori associ dao use obtain sql connect etc ndcodesdao daofactori factori factori return list nd code return java.util.list medicationbean throw dbexcept list medicationbean getallndcod throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from ndcode order by code resultset rs ps.executequeri return medicationloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return descript given code param code nd code look return a repres medic look dbexcept medicationbean getndcod string code throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from ndcode where code ps.setstr code resultset rs ps.executequeri return medicationloader.loadsingl rs return catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps add nd code return chang made exist itrustexcept param med medic bean ad return indic success failur throw dbexcept throw itrustexcept addndcod medicationbean med throw dbexcept itrustexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into ndcode code descript + valu ps.setstr med.getndcod ps.setstr med.getdescript return == ps.executeupd catch sqlexcept e e.printstacktrac == e.geterrorcod throw itrustexcept error code exist throw dbexcept e dbutil.closeconnect conn ps updat code descript param med a bean repres medic updat return int repres number updat row throw dbexcept int medicationbean med throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat updat ndcode set descript + where code ps.setstr med.getdescript ps.setstr return ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.except error messag thrown check health risk indic patient health record enter case itrustexcept error handl class nohealthrecordsexcept extend itrustexcept string messag patient health record recorded. no risk calcul record exist long serialversionuid default constructor pass messag itrustexcept nohealthrecordsexcept messag 
packag edu.ncsu.csc.itrust.action.bas import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.officevisitdao import edu.ncsu.csc.itrust.exception.itrustexcept class contain function action relat insert edit offic visit offic visit officevisitbaseact extend patientbaseact use class whenev page requir mid offic visit id pass id constructor except id kick user home page method creat class allow associ given offic visit identifi verifi exist veri link patientbaseact personnelbaseact /abstract class officevisitbaseact extend patientbaseact databas access object deal offic visit officevisitdao identifi offic visit action associ protect default constructor param factori a databas access factori suppli param pidstr patient mid string pass constructor patientbaseact param ovidstr identifi offic visit string throw itrustexcept suppli paramet incorrect db problem public officevisitbaseact daofactori factori string pidstr string ovidstr throw itrustexcept factori pidstr factory.getofficevisitdao this.ovid checkofficevisitid ovidstr assert offic visit identifi exist associ databas param input presum identifi string return identifi exist offic visit throw itrustexcept visit exist db problem checkofficevisitid string input throw itrustexcept tri encod input long.valueof input ovdao.checkofficevisitexist ovid return ovid throw itrustexcept offic visit + + patient mid + + exist catch numberformatexcept throw itrustexcept offic visit id number e.getmessag obtain offic visit action associ return return ovid convert charact input string html charact represent becom lt symbol becom feed becom param input string encod return string string encod string input string str lt str str.replaceal gt str str.replaceal \n br return str 
packag edu.ncsu.csc.itrust.bean java.text.parseexcept import java.text.simpledateformat import java.util.arraylist import java.util.d import java.util.list a bean store data offic visit hospit bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class officevisitbean visitid patientid hcpid string note string visitdatestr simpledateformat mm/dd/yyyy .format date string hospitalid list diagnosisbean diagnos arraylist diagnosisbean list prescriptionbean prescript arraylist prescriptionbean list procedurebean procedur arraylist procedurebean officevisitbean use onli dao param officevisitbean visitid return visitid return this.patientid return this.hcpid string getnot return this.not date getvisitd date tri simpledateformat mm/dd/yyyy .pars visitdatestr catch parseexcept e system.out.println e.tostr return string getvisitdatestr return visitdatestr list diagnosisbean getdiagnos return diagnos list prescriptionbean getprescript return prescript list procedurebean getprocedur return procedur return visitid setdiagnos diagnosisbean diagnos this.diagnos diagnos sethcpid hcpid setprescript list prescript this.prescript prescript void setnot string note this.not note setpatientid patientid setprocedur procedurebean procedur this.procedur procedur setvisitdatestr string visitd visitd string gethospitalid return hospitalid void sethospitalid string hospitalid this.hospitalid hospitalid
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.text.simpledateformat import java.util.d import java.util.list import java.util.arraylist import edu.ncsu.csc.itrust.dbutil import import import import import import edu.ncsu.csc.itrust.beans.loaders.diagnosisbeanload import edu.ncsu.csc.itrust.beans.loaders.officevisitload import edu.ncsu.csc.itrust.beans.loaders.prescriptionbeanload import edu.ncsu.csc.itrust.beans.loaders.prescriptionreportbeanload import edu.ncsu.csc.itrust.beans.loaders.procedurebeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept use task offic visit use link diagnos offic visit task dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao author andi /public class officevisitdao daofactori factori officevisitload officevisitload diagnosisbeanload diagnosisload diagnosisbeanload prescriptionbeanload prescriptionload prescriptionbeanload prescriptionreportbeanload prescriptionreportbeanload prescriptionreportbeanload procedurebeanload procedurebeanload procedurebeanload constructor param factori link daofactori associ dao use obtain sql connect etc officevisitdao daofactori factori factori add return id param ov officevisitbean ad return a indic id offic visit throw dbexcept officevisitbean ov throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn .preparestat insert into officevisit visitd note hcpid patientid hospitalid valu setvalu ps.executeupd return dbutil.getlastinsert conn catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps setvalu preparedstat ps officevisitbean ov throw sqlexcept ps.setdat java.sql.d ov.getvisitd .gettim ps.setstr ov.getnot ov.gethcpid ps.setstr updat inform offic visit param offic visit bean repres chang throw dbexcept void officevisitbean ov throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat officevisit set visitdate= notes= hcpid= + patientid= hospitalid= where id= setvalu ps ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return offic visit given id param visitid id offic visit return officevisitbean specif offic visit throw dbexcept officevisitbean getofficevisit throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from officevisit where id resultset rs ps.executequeri return loadfullofficevist rs visitid return catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps loadfullofficevist resultset rs throw sqlexcept dbexcept officevisitbean ov officevisitbean visitid ov.setvisitdatestr simpledateformat mm/dd/yyyy .format date rs.getdat visitd .gettim ov.sethcpid hcpid ov.setnot rs.getstr note ov.setpatientid patientid ov.sethospitalid rs.getstr hospitalid ov.setdiagnos getdiagnos ov.setprescript getprescript visitid ov.setprocedur getprocedur visitid return ov return procedur associ given offic visit param id offic visit return java.util.list procedur throw dbexcept list procedurebean getprocedur visitid throw dbexcept connect conn preparedstat ps list procedurebean proc tri factory.getconnect ps conn.preparestat ovprocedur ovp officevisit cptcode cpt ovp.visitid= cpt.code=ovp.cptcod visitid resultset rs ps.executequeri proc procedurebeanloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return proc return prescript associ given offic visit param id offic visit return java.util.list prescript throw dbexcept list prescriptionbean getprescript throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from ovmed ndcode where ovmedication.visitid + ndcodes.code=ovmedication.ndcod resultset rs ps.executequeri return prescriptionloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return diagnos associ given offic visit param id offic visit return java.util.list diagnos throw dbexcept list diagnosisbean getdiagnos throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from ovdiagnosi icdcod where ovdiagnosis.visitid + icdcodes.code=ovdiagnosis.icdcod resultset rs ps.executequeri return diagnosisloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps add given cpt code given offic visit param cptcode param return throw dbexcept string cptcode visitid string hcpid throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into ovprocedur cptcode visitid hcpid valu ps.setstr cptcode visitid ps.setstr ps.executeupd return dbutil.getlastinsert conn catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps remov given procedur offic visit param id offic visit procedur throw dbexcept removeprocedurefromofficevisit throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat delet from ovprocedur where id= ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps add prescript bean databas param pre prescript bean ad return id ad throw dbexcept public prescriptionbean pre throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn .preparestat insert into ovmed visitid ndcode startdat enddat dosag instruct valu prescriptionloader.loadparamet ps pre ps.executeupd return dbutil.getlastinsert conn catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps edit exist prescript param pre updat prescript return indic id updat prescript bean throw dbexcept editprescript prescriptionbean pre throw dbexcept connect conn preparedstat ps tri factory.getconnect //p conn.preparestat updat ovmed visitid ndcode startdat enddat dosag instruct valu string statement updat ovmed + set visitid= ndcode= startdate= enddate= dosage= instructions= + where id= conn.preparestat statement prescriptionloader.loadparamet ps pre ps.executeupd return dbutil.getlastinsert conn catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps remov given medic offic visit param id medic remov throw dbexcept void removeprescript throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat delet from ovmed where id= ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps add given cpt code given offic visit param icd repres icd code ad param id offic visit ad return a icd code id throw dbexcept icd throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into ovdiagnosi icdcod visitid valu icd ps.executeupd return dbutil.getlastinsert conn catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps remov diagnosi offic visit param id offic visit diagnosi remov throw dbexcept removediagnosisfromofficevisit throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat delet from ovdiagnosi where id= ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps add loinccod offic visit param loinccod a string code ad param id offic visit code ad param patient mid transact return id code ad throw dbexcept public string loinccod visitid throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into labprocedur laboratoryprocedurecod officevisitid + commentari result patientmid statu right valu ps.setstr loinccod visitid ps.setstr ps.setstr ps.setstr labprocedurebean.not_receiv ps.setstr allow ps.executeupd return dbutil.getlastinsert conn catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps remov given procedur param labprocedureid id lab procedur throw dbexcept removelabprocedurefromofficevisit throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat delet from labprocedur where laboratoryprocedureid= ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return offic visit exist param id offic visit check mid patient associ transact return a indic exist throw dbexcept boolean checkofficevisitexist throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from officevisit where id= and patientid= ovid resultset rs ps.executequeri return rs.next catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return list offic visit given param pid mid question return a java.util.list officevisitbean throw dbexcept list officevisitbean getallofficevisit throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn .preparestat select from officevisit where patientid= order by visitd desc resultset rs ps.executequeri return officevisitloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return list offic visit given param mid mid lhcp look return a java.util.list offic visit throw dbexcept list officevisitbean getallofficevisitsforlhcp throw dbexcept connect conn preparedstat ps tri mid sqlexcept hcpid null conn factory.getconnect ps conn .preparestat select from officevisit where hcpid= order by visitd desc resultset rs ps.executequeri return officevisitloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return list offic visit given param pid mid return a java.util.list offic visit throw dbexcept list officevisitbean getofficevisitswithnosurvey throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn .preparestat select from officevisit id select visitid ovsurvey patientid order by visitd desc resultset rs ps.executequeri return officevisitloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return inform relat prescript report given offic visit patient id patient id case offic visit id patient disambigu secur reason param a java.util.list long offic visit param patientid a repres mid question return a prescript report throw dbexcept list prescriptionreportbean getprescriptionreportsbyd string startdat string enddat throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from ndcode ovmed officevisit + where ndcodes.code=ovmedication.ndcod and ovmedication.visitid=officevisits.id + and patientid= and date ovmedication.endd and date ovmedication.startd + or date ovmedication.startd and date ovmedication.endd or date ovmedication.startd and date ovmedication.startd + order by visitd desc patientid ps.setstr ps.setstr ps.setstr ps.setstr ps.setstr ps.setstr resultset rs ps.executequeri return prescriptionreportbeanloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return inform relat prescript report given offic visit patient id patient id case offic visit id patient disambigu secur reason param a java.util.list long offic visit param patientid a repres mid question return a prescript report throw dbexcept list prescriptionreportbean getprescriptionreport list long throw dbexcept connect conn preparedstat ps tri factory.getconnect string prep buildprep ovids.s conn.preparestat select from ndcode ovmed officevisit + where ndcodes.code=ovmedication.ndcod and ovmedication.visitid=officevisits.id + and patientid= and visitid in prep + order by visitd desc prepareovid ps ovid resultset rs ps.executequeri return prescriptionreportbeanloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps prepareovid preparedstat ps list long ovid throw sqlexcept int ovids.s i++ ovids.get string buildprep int size string prep int size i++ += prep.length return prep.substr return prep return list offic visit given param hospitalid hospit return list officevisitbean hold offic visit throw dbexcept event databas error list officevisitbean string hospitalid throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from officevisit where hospitalid order by id desc ps.setstr resultset rs ps.executequeri return officevisitloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps get offic visit correspond icd diagnosi param icdcod a string represnt icd diagnosi look return a java.util.list offic visit throw dbexcept list officevisitbean getallofficevisitsfordiagnosi string icdcod throw dbexcept list diagnosisbean diag list officevisitbean ov arraylist officevisitbean connect conn preparedstat ps null resultset rs= tri icdcod == throw sqlexcept null conn factory.getconnect conn.preparestat select from ovdiagnosi ovd icdcod icd where ovd.icdcode= icd.code= ps.setstr ps.setstr rs ps.executequeri diagnosisloader.loadlist rs rs.close ps rs diagnosisbean bean diag ps conn.preparestat select from officevisit ov where ov.id= int bean.getvisitid rs ps.executequeri rs.next loadfullofficevist rs bean.getvisitid rs.close return catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.text.simpledateformat import java.util.arraylist import java.util.d import java.util.list import edu.ncsu.csc.itrust.beans.officevisitbean loader officevisitbean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class officevisitload implement beanload officevisitbean list officevisitbean loadlist resultset rs throw sqlexcept list officevisitbean list arraylist officevisitbean rs.next loadsingl rs return list officevisitbean loadsingl resultset rs throw sqlexcept officevisitbean ov officevisitbean rs.getint id ov.sethcpid hcpid ov.setnot rs.getstr note ov.setpatientid patientid ov.sethospitalid rs.getstr hospitalid ov.setvisitdatestr simpledateformat mm/dd/yyyy .format date rs.getdat visitd .gettim return preparedstat loadparamet preparedstat ps officevisitbean throw sqlexcept throw illegalstateexcept unimpl 
packag edu.ncsu.csc.itrust.bean java.util.hashmap import edu.ncsu.csc.itrust.enums.transactiontyp store profil data bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class operationalprofil int numtotaltransact int numpatienttransact int numpersonneltransact hashmap transactiontyp integ totalcount hashmap transactiontyp integ personnelcount hashmap transactiontyp integ patientcount operationalprofil totalcount createemptymap personnelcount createemptymap patientcount createemptymap hashmap transactiontyp integ createemptymap hashmap transactiontyp integ map hashmap transactiontyp integ transactiontyp .valu .length transactiontyp type transactiontype.valu map.put return hashmap transactiontyp integ gettotalcount return totalcount settotalcount hashmap transactiontyp integ totalcount this.totalcount totalcount hashmap transactiontyp integ getpersonnelcount return personnelcount setpersonnelcount hashmap transactiontyp integ personnelcount this.personnelcount personnelcount hashmap transactiontyp integ getpatientcount return patientcount setpatientcount hashmap transactiontyp integ patientcount this.patientcount patientcount setnumtotaltransact int numtransact this.numtotaltransact numtransact int getnumtotaltransact return numtotaltransact int getnumpatienttransact return numpatienttransact setnumpatienttransact int numpatienttransact this.numpatienttransact numpatienttransact int getnumpersonneltransact return numpersonneltransact setnumpersonneltransact int numpersonneltransact this.numpersonneltransact numpersonneltransact
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.list import import edu.ncsu.csc.itrust.enums.transactiontyp profil load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class operationalprofileload implement beanload operationalprofil list operationalprofil loadlist resultset rs throw sqlexcept throw illegalstateexcept unimpl preparedstat loadparamet preparedstat ps operationalprofil bean throw sqlexcept throw illegalstateexcept unimpl operationalprofil loadsingl resultset rs throw sqlexcept operationalprofil op operationalprofil int grandtot int grandpati int grandpersonnel transactiontyp type transactiontype.pars rs.getint transactioncod int totalcount rs.getint totalcount int patientcount rs.getint patientcount int personnelcount rs.getint personnelcount op.gettotalcount .put totalcount op.getpatientcount .put type patientcount op.getpersonnelcount .put type personnelcount += totalcount grandpati += patientcount grandpersonnel += personnelcount op.setnumtotaltransact op.setnumpatienttransact op.setnumpersonneltransact grandpersonnel return op 
packag import java.util.hashmap import java.util.map provid util method convert map jsp contain hashmap author andi /public class parameterutil provid util method convert map jsp contain hashmap param param map convert return convert map suppresswarn hashmap string string convertmap map param hashmap string string mymap hashmap string string object params.keyset string valu string params.get valu null mymap.put key.tostr valu mymap.put key.tostr return mymap 
packag edu.ncsu.csc.itrust.action.bas import edu.ncsu.csc.itrust.htmlencod import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.itrustexcept class deal action requir associ function provid class allow assert exist patient mid use class whenev jsp requir id load editpatient.jsp patient string pass constructor class check exist id way except result get kick home page link personnelbaseact officevisitbaseact subclass need function held contract class class patientbaseact databas access factori runtim daofactori factori store mid patient associ action protect default constructor param factori a factori creat databas access param pidstr patient id action throw itrustexcept patient id incorrect db problem public patientbaseact daofactori factori string pidstr throw itrustexcept factori checkpatientid pidstr assert input exist patient mid param input mid return exist patient id throw itrustexcept exist db problem checkpatientid string input throw itrustexcept tri long.valueof input factory.getpatientdao .checkpatientexist return throw itrustexcept exist catch numberformatexcept throw itrustexcept patient id number htmlencoder.encod input retriev patient return patient mid public return 
packag edu.ncsu.csc.itrust.bean import import java.text.parseexcept import java.text.simpledateformat import java.util.d import edu.ncsu.csc.itrust.enums.bloodtyp import edu.ncsu.csc.itrust.enums.ethn import edu.ncsu.csc.itrust.enums.gend store data patient a bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class patientbean implement long serialversionuid -6474182977342257877l mid string firstnam string lastnam string email string securityquest string securityansw string password string confirmpassword string streetaddress1 string streetaddress2 string citi string state ak string zip1 string zip2 string phone1 string phone2 string phone3 string emergencynam string emergencyphone1 string emergencyphone2 string emergencyphone3 string icnam string icaddress1 string icaddress2 string icciti string icstat ak string iczip1 string iczip2 string icphone1 string icphone2 string icphone3 string icid string creditcardtyp string creditcardnumb topic health inform string dateofbirthstr simpledateformat mm/dd/yyyy .format date string dateofdeathstr string causeofdeath string mothermid string fathermid bloodtyp bloodtyp bloodtype.n ethnic ethnic ethnicity.notspecifi gender gender gender.notspecifi string topicalnot string messagefilter= string getmessagefilt return messagefilt setmessagefilt string messagefilt this.messagefilt messagefilt bloodtyp getbloodtyp return bloodtyp setbloodtypestr string bloodtyp bloodtype.pars bloodtyp setbloodtyp bloodtyp bloodtyp bloodtyp string getcauseofdeath return causeofdeath setcauseofdeath string causeofdeath causeofdeath string getciti return citi setciti string citi this.citi citi string getdateofbirthstr return dateofbirthstr date getdateofbirth tri return simpledateformat mm/dd/yyyy .pars dateofbirthstr catch parseexcept e return null date getdateofdeath tri return simpledateformat mm/dd/yyyy .pars dateofdeathstr catch parseexcept e return null setdateofbirthstr string dateofbirthstr dateofbirthstr int getag tri ageinm system.currenttimemilli simpledateformat mm/dd/yyyy .pars dateofbirthstr .gettim age ageinm return int age catch parseexcept e return -1 getageinday age tri ageinm system.currenttimemilli simpledateformat mm/dd/yyyy .pars dateofbirthstr .gettim age ageinm catch parseexcept e return -1 return age age tri ageinm system.currenttimemilli simpledateformat mm/dd/yyyy .pars dateofbirthstr .gettim age ageinm catch parseexcept e return -1 return age string getdateofdeathstr return dateofdeathstr setdateofdeathstr string dateofdeathstr dateofdeathstr string getemail return email setemail string email email string getemergencynam return emergencynam setemergencynam string emergencynam this.emergencynam emergencynam ethnic getethn return ethnic setethnicitystr string ethnic this.ethn ethnicity.pars ethnic setethn ethnic ethnic this.ethn ethnic string getfathermid return fathermid void setfathermid string fathermid this.fathermid fathermid string getfullnam return getfirstnam + getlastnam string getfirstnam return firstnam setfirstnam string firstnam this.firstnam firstnam gender getgend return gender setgenderstr string gender this.gend gender.pars gender setgend gender gender this.gend gender string geticaddress1 return icaddress1 seticaddress1 string icaddress1 icaddress1 string geticaddress2 return icaddress2 seticaddress2 string icaddress2 icaddress2 composit citi state zip string geticaddress3 return geticc + geticst + geticzip string geticc return icciti seticc string icciti this.icc icciti string geticid return icid seticid string icid icid string getcreditcardtyp return creditcardtyp setcreditcardtyp string creditcardtyp creditcardtyp string getcreditcardnumb return creditcardnumb setcreditcardnumb string creditcardnumb this.creditcardnumb creditcardnumb string geticnam return icnam seticnam string icnam this.icnam icnam string geticzip null .equal geticzip2 return geticzip1 + geticzip2 return geticzip1 string geticzip1 return iczip1 seticzip1 string iczip1 iczip1 string geticzip2 return iczip2 seticzip2 string iczip2 iczip2 string geticst return icstat seticst string icstat icstat string getlastnam return lastnam setlastnam string lastnam this.lastnam lastnam return mid void setmid mid mid string getmothermid return mothermid void setmothermid string mothermid this.mothermid mothermid note databas column string getphon return getphone1 + getphone2 + + getphone3 string getphone1 return phone1 string getphone2 return phone2 string getphone3 return phone3 setphone1 string phone1 phone1 setphone2 string phone2 phone2 setphone3 string phone3 phone3 string getsecurityansw return setsecurityansw string this.securityansw securityansw string getsecurityquest return securityquest setsecurityquest string securityquest this.securityquest securityquest string getstat return state setstat string state this.stat state string getstreetaddress1 return streetaddress1 setstreetaddress1 string streetaddress1 streetaddress1 string getstreetaddress2 return streetaddress2 setstreetaddress2 string streetaddress2 streetaddress2 composit citi state zip string getstreetaddress3 return getciti + getstat + getzip string gettopicalnot return topicalnot void settopicalnot string topicalnot this.topicalnot topicalnot string getzip null .equal getzip2 return getzip1 + getzip2 return getzip1 string getzip1 return zip1 setzip1 string zip1 this.zip1 zip1 string getzip2 return zip2 setzip2 string zip2 this.zip2 zip2 same idea phone string getemergencyphon return getemergencyphone1 + getemergencyphone2 + + getemergencyphone3 string getemergencyphone1 return emergencyphone1 setemergencyphone1 string emergencyphone1 emergencyphone1 string getemergencyphone2 return emergencyphone2 setemergencyphone2 string emergencyphone2 emergencyphone2 string getemergencyphone3 return emergencyphone3 setemergencyphone3 string emergencyphone3 emergencyphone3 same idea phone string geticphon return geticphone1 + geticphone2 + + geticphone3 string geticphone1 return icphone1 seticphone1 string icphone1 icphone1 string geticphone2 return icphone2 seticphone2 string icphone2 icphone2 string geticphone3 return icphone3 seticphone3 string icphone3 icphone3 string getconfirmpassword return confirmpassword void setconfirmpassword string confirmpassword this.confirmpassword confirmpassword string getpassword return password void setpassword string password this.password password
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.list import java.util.vector import edu.ncsu.csc.itrust.dbutil import import import import import edu.ncsu.csc.itrust.beans.loaders.diagnosisbeanload import edu.ncsu.csc.itrust.beans.loaders.patientload import edu.ncsu.csc.itrust.beans.loaders.personnelload import edu.ncsu.csc.itrust.beans.loaders.prescriptionbeanload import edu.ncsu.csc.itrust.beans.loaders.procedurebeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.dateutil use manag inform relat patient inform relat aspect care see dao dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao author andi /public class patientdao daofactori factori patientload patientload personnelload personnelload diagnosisbeanload diagnosisload prescriptionbeanload prescriptionload procedurebeanload procedureload constructor param factori link daofactori associ dao use obtain sql connect etc patientdao daofactori factori factori this.patientload patientload this.personnelload personnelload this.diagnosisload diagnosisbeanload this.prescriptionload prescriptionbeanload this.procedureload procedurebeanload return name given mid param mid mid question return string repres patient name name throw itrustexcept throw dbexcept string getnam throw itrustexcept dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select firstnam lastnam from patient where mid= resultset rs rs ps.executequeri rs.next return rs.getstr firstnam + + rs.getstr lastnam throw itrustexcept user exist catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return role patient patientdao authdao param mid mid question param role a string repres role return string repres patient role throw itrustexcept throw dbexcept string getrol string role throw itrustexcept dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select role from user where mid= and role= mid ps.setstr role resultset rs rs ps.executequeri rs.next return rs.getstr role throw itrustexcept user exist design role catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps add patient tabl return mid return mid patient throw dbexcept throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into patient mid valu null ps.executeupd return dbutil.getlastinsert conn catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return patient inform given id param mid mid retriev return patientbean repres throw dbexcept patientbean getpati throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from patient where mid resultset rs ps.executequeri pdao.logtransact type loggedinmid secondarymid return patientloader.loadsingl rs return catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps updat patient inform given mid param bean repres inform patient throw dbexcept patientbean throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat patient set firstname= email= + address2= city= state= zip1= zip2= phone1= phone2= phone3= + ephone1= ephone2= ephone3= icname= icaddress1= icaddress2= iccity= + icstate= iczip1= iczip2= icphone1= icphone2= icphone3= icid= dateofbirth= + dateofdeath= causeofdeath= mothermid= fathermid= + bloodtype= ethnicity= gender= topicalnotes= creditcardtype= creditcardnumber= messagefilter= where mid= patientloader.loadparamet ps p.getmid ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return exist param mid question return indic exist throw dbexcept boolean checkpatientexist throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from patient where mid= resultset rs ps.executequeri return rs.next catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return list hcp declar given param pid mid question return a java.util.list personnel bean throw dbexcept list personnelbean getdeclaredhcp throw dbexcept connect conn preparedstat ps tri sqlexcept conn factory.getconnect conn.preparestat select from declaredhcp personnel + where patientid= and personnel.mid=declaredhcp.hcpid resultset rs ps.executequeri return personnelloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps declar hcp patient param pid mid question param hcpid hcp mid return a boolean insert throw dbexcept throw itrustexcept declarehcp throw dbexcept itrustexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into declaredhcp patientid hcpid valu return == ps.executeupd catch sqlexcept == e.geterrorcod throw itrustexcept hcp + hcpid + declar patient e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps undeclar hcp given param pid mid question param hcpid mid hcp question return indic action throw dbexcept boolean undeclarehcp throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat delet from declaredhcp where patientid= and hcpid= return == ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps check patient declar given hcp param pid mid question hcpid mid hcp question return throw dbexcept boolean checkdeclaredhcp throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from declaredhcp where patientid= and hcpid= return ps.executequeri catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return list patient given repres mid question return a java.util.list patientbean throw dbexcept list patientbean getrepres throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat patient repres patient + where representermid= and representeemid=patients.mid resultset rs ps.executequeri return patientloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return list patient given repres param pid mid question return a java.util.list patientbean throw dbexcept list patientbean getrepres throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat patient repres patient + where representeemid= and representermid=patients.mid resultset rs ps.executequeri return patientloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps check given represent repres represente param represent mid represent question param represente mid represente question return indic represen place throw dbexcept boolean repres represente throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn .preparestat select from repres where representermid= and representeemid= represent represente resultset rs ps.executequeri return rs.next catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps assign represente param represent mid represent represente mid represente return a insert correct throw dbexcept throw itrustexcept addrepres represente throw dbexcept itrustexcept connect conn preparedstat ps tri factory.getconnect ps conn .preparestat insert into repres representermid representeemid valu represent represente return == ps.executeupd catch sqlexcept == e.geterrorcod throw itrustexcept patient + represent + repres represente e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps unassign represent param represent mid represent question param represente mid represente question return indic throw dbexcept boolean represent represente throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn .preparestat delet from repres where representermid= and representeemid= represent represente return == ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return list diagnos given param pid mid question return a java.util.list diagnos throw dbexcept list diagnosisbean getdiagnos throw dbexcept connect conn preparedstat ps tri sqlexcept conn factory.getconnect conn.preparestat select from ovdiagnosi officevisit ov icdcod where ovd.visitid=ov.id icd.code=ovd.icdcod order by ov.visitd desc resultset rs ps.executequeri return diagnosisloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return list procedur given param pid mid question return a java.util.list procedur throw dbexcept list procedurebean getprocedur throw dbexcept connect conn preparedstat ps tri sqlexcept conn factory.getconnect conn.preparestat select from ovprocedur ovp officevisit ov cptcode cpt + where ovp.visitid=ov.id cpt.code=ovp.cptcod order by ov.visitd desc resultset rs ps.executequeri return procedureloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return immun procedur given param pid mid question return a java.util.list procedur throw dbexcept list procedurebean getimmunizationprocedur throw dbexcept connect conn preparedstat ps tri sqlexcept conn factory.getconnect conn.preparestat select from ovprocedur ovp officevisit ov cptcode cpt + where ovp.visitid=ov.id cpt.code=ovp.cptcod cpt.attribute='immun order by ov.visitd desc resultset rs ps.executequeri return procedureloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return prescript param patientid mid question return a java.util.list prescript throw dbexcept list prescriptionbean getprescript throw dbexcept connect conn preparedstat ps tri patientid sqlexcept conn factory.getconnect conn.preparestat select from ovmed ndcode officevisit + where officevisits.patientid and ovmedication.visitid + officevisits.id and ndcodes.code=ovmedication.ndcod + order by officevisits.visitd desc ovmedication.ndcod asc resultset rs ps.executequeri return prescriptionloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return prescript prescrib param patientid mid question return a java.util.list prescript bean throw dbexcept list prescriptionbean getcurrentprescript throw dbexcept connect conn preparedstat ps tri patientid sqlexcept conn factory.getconnect conn.preparestat select from ovmed ndcode officevisit + where officevisits.patientid and ovmedication.visitid + officevisits.id and ndcodes.code=ovmedication.ndcod and + ovmedication.endd + order by ovmedication.id desc ps.setdat dateutil.getsqldatexdaysagofromnow resultset rs ps.executequeri return prescriptionloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return prescript expir prescript patient param patientid mid question return a java.util.list prescript throw dbexcept list prescriptionbean getexpiredprescript throw dbexcept connect conn preparedstat ps tri patientid sqlexcept conn factory.getconnect conn.preparestat select from ovmed ndcode officevisit + where officevisits.patientid and ovmedication.visitid + officevisits.id and ndcodes.code=ovmedication.ndcod and + ovmedication.endd + order by ovmedication.id desc ps.setdat dateutil.getsqldatexdaysagofromnow resultset rs ps.executequeri return prescriptionloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps list patient databas return a java.util.list patientbean repres patient dbexcept list patientbean getallpati throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from patient resultset rs ps.executequeri return patientloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return patient hcp dhcp medic go expir day hcpmid mid log hcp return a list patient satisfi condit throw dbexcept list patientbean getrenewalneedspati throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from + select distinct patient patient ovdiagnosi officevisit ovmed + + declaredhcp.hcpid + patients.mid declaredhcp.patientid + ovdiagnosis.visitid officevisits.id and officevisits.patientid declaredhcp.patientid + ovdiagnosis.icdcod and ovdiagnosis.icdcod ovdiagnosis.icdcod ovdiagnosis.icdcod ovdiagnosis.icdcod ovdiagnosis.icdcod union all + select distinct patient patient ovdiagnosi officevisit ovmed + + declaredhcp.hcpid + patients.mid declaredhcp.patientid + declaredhcp.patientid officevisits.patientid and officevisits.id + + ovmedication.endd between curdat and date_add curdat interv day + group by final.mid have count + order by final.lastnam asc final.firstnam asc hcpmid ps.setfloat ps.setfloat ps.setfloat ps.setfloat ps.setfloat ps.setfloat hcpmid resultset rs ps.executequeri return patientloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return patient name like sql pass paramet param patient name param patient name return a java.util.list patientbean throw dbexcept list patientbean searchforpatientswithnam string string dbexcept connect conn preparedstat ps null first.equ last.equ return vector patientbean tri factory.getconnect ps conn.preparestat select from patient where firstnam like and lastnam like ps.setstr ps.setstr resultset rs ps.executequeri return patientloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.beans.load import java.sql.d import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.text.parseexcept import java.text.simpledateformat import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.patientbean loader patientbean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class patientload implement beanload patientbean list patientbean loadlist resultset rs throw sqlexcept list patientbean list arraylist patientbean rs.next loadsingl rs return list patientbean loadsingl resultset rs throw sqlexcept patientbean patientbean p.setmid rs.getint mid p.setfirstnam rs.getstr firstnam p.setlastnam rs.getstr lastnam date dateofbirth rs.getdat dateofbirth dateofbirth simpledateformat mm/dd/yyyy .format dateofbirth date dateofdeath rs.getdat dateofdeath dateofdeath simpledateformat mm/dd/yyyy .format dateofdeath p.setcauseofdeath rs.getstr causeofdeath p.setemail rs.getstr email p.setstreetaddress1 rs.getstr address1 p.setstreetaddress2 rs.getstr address2 p.setciti rs.getstr citi p.setstat rs.getstr state p.setzip1 rs.getstr zip1 p.setzip2 rs.getstr zip2 p.setphone1 rs.getstr phone1 p.setphone2 rs.getstr phone2 p.setphone3 rs.getstr phone3 p.setemergencynam rs.getstr enam p.setemergencyphone1 rs.getstr ephone1 p.setemergencyphone2 rs.getstr ephone2 p.setemergencyphone3 rs.getstr ephone3 p.seticnam rs.getstr icnam p.seticaddress1 rs.getstr icaddress1 p.seticaddress2 rs.getstr icaddress2 p.seticc rs.getstr icciti p.seticst rs.getstr icstat p.seticzip1 rs.getstr iczip1 p.seticzip2 rs.getstr iczip2 p.seticphone1 rs.getstr icphone1 p.seticphone2 rs.getstr icphone2 p.seticphone3 rs.getstr icphone3 p.seticid rs.getstr icid p.setmothermid rs.getstr mothermid p.setfathermid rs.getstr fathermid p.setbloodtypestr rs.getstr bloodtyp p.setethnicitystr rs.getstr ethnic p.setgenderstr rs.getstr gender p.settopicalnot rs.getstr topicalnot p.setcreditcardtyp rs.getstr creditcardtyp p.setcreditcardnumb rs.getstr creditcardnumb p.setmessagefilt rs.getstr messagefilt return preparedstat loadparamet preparedstat ps patientbean throw sqlexcept int ps.setstr i++ p.getfirstnam ps.setstr p.getlastnam ps.setstr p.getemail ps.setstr p.getsecurityquest ps.setstr p.getsecurityansw ps.setstr p.getstreetaddress1 ps.setstr p.getstreetaddress2 ps.setstr p.getciti ps.setstr p.getstat ps.setstr p.getzip1 ps.setstr p.getzip2 ps.setstr p.getphone1 ps.setstr p.getphone2 ps.setstr p.getphone3 ps.setstr p.getemergencynam ps.setstr p.getemergencyphone1 ps.setstr p.getemergencyphone2 ps.setstr p.getemergencyphone3 ps.setstr p.geticnam ps.setstr p.geticaddress1 ps.setstr p.geticaddress2 ps.setstr p.geticc ps.setstr p.geticst ps.setstr p.geticzip1 ps.setstr p.geticzip2 ps.setstr p.geticphone1 ps.setstr p.geticphone2 ps.setstr p.geticphone3 ps.setstr p.geticid date date null tri date java.sql.d simpledateformat mm/dd/yyyy .pars p.getdateofbirthstr .gettim catch parseexcept e e.printstacktrac ps.setdat date date tri date java.sql.d simpledateformat mm/dd/yyyy .pars p.getdateofdeathstr .gettim catch parseexcept e .equal p.getdateofdeathstr date null e.printstacktrac ps.setdat date ps.setstr p.getcauseofdeath ps.setstr i++ p.getmothermid ps.setstr i++ p.getfathermid ps.setstr p.getbloodtyp .getnam ps.setstr p.getethn .getnam ps.setstr p.getgend .getnam ps.setstr p.gettopicalnot ps.setstr p.getcreditcardtyp ps.setstr p.getcreditcardnumb ps.setstr p.getmessagefilt return ps 
packag edu.ncsu.csc.itrust.tag import java.io.ioexcept import javax.servlet.jsp.jspexcept import javax.servlet.jsp.jspwrit import javax.servlet.jsp.pagecontext import javax.servlet.jsp.tagext.tag jsp tag use navig bar bottom screen add page add array make page accept pid author andi /public class patientnavig implement tag pagecontext pagecontext tag parent a solut use enum displaynam string pagetitl health record basic health histori demograph document offic visit risk factor prescript string pageurl editphr.jsp documentofficevisit.jsp chronicdiseaserisks.jsp getprescriptionreport.jsp string patientnavig int dostarttag throw jspexcept tri jspwriter pagecontext.getout class=\ navigation\ int pagetitles.length i++ pagetitl .equal pagetitl href=\ /itrust/auth/hcp-uap/ pageurl + + pagetitl out.writ switch=true\ switch patient /a /span catch ioexcept e.printstacktrac return skip_bodi int doendtag throw jspexcept return skip_bodi releas setpagecontext pagecontext pagecontext pagecontext setpar tag parent parent tag getpar return parent string getthistitl return setthistitl string thispag thispag 
packag edu.ncsu.csc.itrust.risk.factor abstract class risk factor hasriskfactor deleg protect version cach result case get check author andi /abstract class patientriskfactor boolean hasrisk return a descript patient statu caus risk string getdescript return indic patient increas risk abstract protect hasfactor return indic patient increas risk hasriskfactor == null hasrisk hasfactor return hasrisk 
packag edu.ncsu.csc.itrust.valid import edu.ncsu.csc.itrust.action.editpatientact import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept import org.apache.commons.validator.creditcardvalid import java.util.d valid bean link editpatientact author andi /public class patientvalid extend beanvalid patientbean default constructor patientvalid perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid patientbean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat name p.getfirstnam validationformat.nam errorlist.addifnotnul checkformat name p.getlastnam validationformat.nam errorlist.addifnotnul checkformat date birth p.getdateofbirthstr validationformat.d errorlist.addifnotnul checkformat date death p.getdateofdeathstr validationformat.d tri == null .equal p.getdateofdeathstr date errorlist.addifnotnul birth date futur p.getdateofdeath death date birth date p.getdateofdeath date errorlist.addifnotnul death date futur p.getdateofbirth date errorlist.addifnotnul birth date futur catch nullpointerexcept ignor null == p.getdateofdeathstr || p.getdateofdeathstr .equal errorlist.addifnotnul checkformat caus death p.getcauseofdeath validationformat.icd9cm deathcausenul errorlist.addifnotnul checkformat email p.getemail validationformat.email errorlist.addifnotnul checkformat street address p.getstreetaddress1 validationformat.address errorlist.addifnotnul checkformat street address p.getstreetaddress2 validationformat.address errorlist.addifnotnul checkformat citi p.getciti validationformat.c errorlist.addifnotnul checkformat state p.getstat validationformat.st errorlist.addifnotnul checkformat zip code p.getzip validationformat.zipcod errorlist .addifnotnul checkformat phone number p.getphon validationformat.phone_numb errorlist.addifnotnul checkformat emerg contact name p.getemergencynam validationformat.nam errorlist.addifnotnul checkformat emerg contact phone p.getemergencyphon validationformat.phone_numb errorlist.addifnotnul checkformat insur compani name p.geticnam validationformat.nam errorlist.addifnotnul checkformat insur compani address p.geticaddress1 validationformat.address errorlist.addifnotnul checkformat insur compani address p.geticaddress2 validationformat.address errorlist.addifnotnul checkformat insur compani citi p.geticc validationformat.c errorlist.addifnotnul checkformat insur compani state p.geticst validationformat.st errorlist.addifnotnul checkformat insur compani zip p.geticzip validationformat.zipcod errorlist.addifnotnul checkformat insur compani phone p.geticphon validationformat.phone_numb errorlist.addifnotnul checkformat insur compani id p.geticid validationformat.insurance_id errorlist.addifnotnul checkformat mother mid p.getmothermid validationformat.mid errorlist.addifnotnul checkformat father mid p.getfathermid validationformat.mid errorlist .addifnotnul checkformat note p.gettopicalnot validationformat.not block ad theme tyler arehart p.getcreditcardnumb .equal p.getcreditcardtyp .equal string creditcardvalid c int type -1 p.getcreditcardtyp .equal visa type creditcardvalidator.visa p.getcreditcardtyp .equal mastercard type creditcardvalidator.mastercard p.getcreditcardtyp .equal discov type creditcardvalidator.discov p.getcreditcardtyp .equal amex type creditcardvalidator.amex type -1 c creditcardvalid type c.isvalid p.getcreditcardnumb credit card number credit card type errorlist.haserror throw formvalidationexcept errorlist 
packag edu.ncsu.csc.itrust.bean store data patient visit a bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class patientvisitbean patientbean patient string patientnam string address1 string address2 string lastovdatem string lastovd string lastovdatey string lastovd string getlastovd return lastovd setlastovd string lastovd lastovd lastovd string getlastovdatem return lastovdatem setlastovdatem string lastovdatem lastovdatem lastovdatem string getlastovd return lastovd void setlastovd string lastovd lastovd lastovd string getlastovdatey return lastovdatey setlastovdatey string lastovdatey lastovdatey lastovdatey patientvisitbean string getpatientnam return patientnam setpatientnam string patientnam patientnam patientnam string getaddress1 return address1 setaddress1 string address1 address1 address1 string getaddress2 return address2 setaddress2 string address2 address2 address2 patientbean getpati return patientbean patient patient
packag edu.ncsu.csc.itrust.action.bas import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.itrustexcept class deal action requir associ personnel function provid class allow assert correct exist personnel mid use class whenev jsp requir personnel id load editpatient.jsp patient string pass constructor class check exist id way except result get kick home page subclass need function held contract class veri link patientbaseact class personnelbaseact databas access factori runtim daofactori factori store mid personnel associ action protect default constructor param factori a factori creat databas access param pidstr personnel id action throw itrustexcept personnel id incorrect db problem public personnelbaseact daofactori factori string pidstr throw itrustexcept factori checkpersonnelid pidstr assert input exist personnel mid param input mid return exist personnel id throw itrustexcept personnel exist db problem checkpersonnelid string input throw itrustexcept tri long.valueof input factory.getpersonneldao .checkpersonnelexist return throw itrustexcept personnel exist catch numberformatexcept throw itrustexcept personnel id number e.getmessag retriev patient return patient mid public return 
packag edu.ncsu.csc.itrust.bean import import java.util.list a bean store data hospit employe bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class personnelbean implement long serialversionuid mid amid role role string firstnam string lastnam string password string confirmpassword string securityquest string securityansw string streetaddress1 string streetaddress2 string citi string state string zip1 string zip2 string phone1 string phone2 string phone3 string email string specialti string messagefilter= string getmessagefilt return messagefilt setmessagefilt string messagefilt this.messagefilt messagefilt string getemail return email setemail string email email return amid void setamid amid string getciti return citi setciti string citi this.citi citi string getconfirmpassword return confirmpassword void setconfirmpassword string confirmpassword this.confirmpassword confirmpassword string getfirstnam return firstnam setfirstnam string firstnam this.firstnam firstnam string getlastnam return lastnam setlastnam string lastnam this.lastnam lastnam string getfullnam return getfirstnam + getlastnam return mid void setmid mid mid string getpassword return password void setpassword string password this.password password string getphon return phone1 + phone2 + + phone3 string getphone1 return phone1 setphone1 string phone1 phone1 string getphone2 return phone2 setphone2 string phone2 phone2 string getphone3 return phone3 setphone3 string phone3 phone3 role getrol return role role role role string getsecurityansw return setsecurityansw string this.securityansw securityansw string getsecurityquest return securityquest setsecurityquest string securityquest this.securityquest securityquest string getstat return state setstat string state this.stat state string getstreetaddress1 return streetaddress1 setstreetaddress1 string streetaddress1 streetaddress1 string getstreetaddress2 return streetaddress2 setstreetaddress2 string streetaddress2 streetaddress2 string getzip null .equal getzip2 return getzip1 + getzip2 return getzip1 string getzip1 return zip1 setzip1 string zip1 this.zip1 zip1 string getzip2 return zip2 setzip2 string zip2 this.zip2 zip2 string getspecialti return specialti setspecialti string specialti this.specialti specialti int compareto personnelbean mid == other.getmid return mid return return -1 int getindexin list personnelbean list i++ list.get .mid == this.mid return return
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.vector import java.util.list import edu.ncsu.csc.itrust.dbutil import import import edu.ncsu.csc.itrust.beans.loaders.hospitalbeanload import edu.ncsu.csc.itrust.beans.loaders.personnelload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.enums.rol use manag inform relat personnel hcp uap admin dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao author andi /public class personneldao daofactori factori personnelload personnelload hospitalbeanload hospitalbeanload constructor param factori link daofactori associ dao use obtain sql connect etc personneldao daofactori factori factori personnelload personnelload hospitalbeanload hospitalbeanload return name given mid param mid mid personnel question return string repres name personnel throw itrustexcept throw dbexcept string getnam throw itrustexcept dbexcept connect conn preparedstat pstmt tri factory.getconnect pstmt conn.preparestat select firstnam lastnam from personnel where mid= resultset rs rs pstmt.executequeri rs.next return rs.getstr firstnam + + rs.getstr lastnam throw itrustexcept user exist catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn pstmt add personnel return mid return a indic mid param role link role enum indic personnel role throw dbexcept throw itrustexcept role role throw dbexcept itrustexcept connect conn preparedstat ps null tri factory.getconnect ps conn.preparestat insert into personnel role valu ps.setstr ps.executeupd newid dbutil.getlastinsert conn return newid catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps retriev personnelbean inform given employe param mid mid personnel question return personnelbean repres employe throw dbexcept personnelbean getpersonnel throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from personnel where mid resultset rs ps.executequeri rs.next return personnelloader.loadsingl rs return catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps updat demograph personnel param personnel bean inform throw dbexcept void editpersonnel personnelbean throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat personnel set amid= firstname= lastname= + phone2= phone3= address1= address2= city= state= zip= zip1= zip2= email= messagefilter= + where mid= personnelloader.loadparamet ps p.getmid ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps indic personnel databas param pid mid personnel question return indic personnel exist throw dbexcept boolean checkpersonnelexist throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from personnel where mid= resultset rs ps.executequeri return rs.next catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return hospit lhcp associ param mid mid personnel question return java.util.list hospitalbean throw dbexcept list hospitalbean gethospit throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from hcpassignedho hah hospit h + where hah.hcpid= and hah.hosid=h.hospitalid order by hospitalnam asc resultset rs ps.executequeri return hospitalbeanloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return personnel databas return java.util.list personnel throw dbexcept list personnelbean getallpersonnel throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from personnel role 'er resultset rs ps.executequeri return personnelloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return list uap work lhcp param hcpid mid personnel question return java.util.list uap throw dbexcept list personnelbean getuapsforhcp throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from personnel where mid in select uap from hcprelat where hcp= resultset rs ps.executequeri return personnelloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps given prescript given return inform doctor author prescript param prescript prescriptionbean describ prescript question return personnelbean describ doctor author throw dbexcept personnelbean getprescribingdoctor prescriptionbean prescript throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from personnel where mid in select hcpid from officevisit where id= resultset rs ps.executequeri return personnelloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps match personnel name like sql name pass param name search name search return a java.util.list personnel match name throw dbexcept list personnelbean searchforpersonnelwithnam string string dbexcept connect conn preparedstat ps null first.equ last.equ return vector personnelbean tri factory.getconnect ps conn.preparestat select from personnel where firstnam like and lastnam like ps.setstr ps.setstr resultset rs ps.executequeri return personnelloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import import edu.ncsu.csc.itrust.enums.rol loader personnelbean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class personnelload implement beanload personnelbean list personnelbean loadlist resultset rs throw sqlexcept list personnelbean list arraylist personnelbean rs.next loadsingl rs return list personnelbean loadsingl resultset rs throw sqlexcept personnelbean personnelbean p.setmid rs.getlong mid p.setamid role.pars rs.getstr role p.setlastnam rs.getstr lastnam p.setfirstnam rs.getstr firstnam p.setphone1 rs.getstr phone1 p.setphone2 rs.getstr phone2 p.setphone3 rs.getstr phone3 p.setstreetaddress1 rs.getstr address1 p.setstreetaddress2 rs.getstr address2 p.setciti rs.getstr citi p.setstat rs.getstr state p.setzip1 rs.getstr zip1 p.setzip2 rs.getstr zip2 p.setemail rs.getstr email p.setspecialti rs.getstr specialti p.setmessagefilt rs.getstr messagefilt return preparedstat loadparamet preparedstat ps personnelbean throw sqlexcept int i++ p.getamid ps.setstr p.getfirstnam ps.setstr p.getlastnam ps.setstr p.getphone1 ps.setstr p.getphone2 ps.setstr p.getphone3 ps.setstr p.getstreetaddress1 ps.setstr p.getstreetaddress2 ps.setstr p.getciti ps.setstr p.getstat ps.setstr p.getzip ps.setstr p.getzip1 ps.setstr p.getzip2 //ps.setstr i++ p.getspecialti ps.setstr p.getemail ps.setstr p.getmessagefilt return ps 
packag edu.ncsu.csc.itrust.valid import edu.ncsu.csc.itrust.action.editpersonnelact import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept valid personnel link editpersonnelact author andi /public class personnelvalid extend beanvalid personnelbean default constructor personnelvalid perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid personnelbean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat name p.getfirstnam validationformat.nam errorlist.addifnotnul checkformat name p.getlastnam validationformat.nam errorlist.addifnotnul checkformat street address p.getstreetaddress1 validationformat.address errorlist.addifnotnul checkformat street address p.getstreetaddress2 validationformat.address errorlist.addifnotnul checkformat citi p.getciti validationformat.c errorlist.addifnotnul checkformat state p.getstat validationformat.st errorlist.addifnotnul checkformat zip code p.getzip validationformat.zipcod errorlist .addifnotnul checkformat phone number p.getphon validationformat.phone_numb errorlist .addifnotnul checkformat email p.getemail validationformat.email errorlist.haserror throw formvalidationexcept errorlist 
packag edu.ncsu.csc.itrust.enum prescript alert emerg report futur abstract databas tabl chang andi /public enum prescriptionalert tetracyclin tetracyclin prioglitazon prioglitazon string name string ndcode prescriptionalert string rname string rndcode rname this.ndcod rndcode string getnam return name string getndcod return this.ndcod boolean isalert string code prescriptionalert thison valu thisone.getndcod .equal code return return 
packag edu.ncsu.csc.itrust.bean java.text.parseexcept import java.text.simpledateformat import java.util.d a bean store data prescript bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class prescriptionbean id medicationbean medic medicationbean string startdatestr simpledateformat mm/dd/yyyy .format date string enddatestr simpledateformat mm/dd/yyyy .format date int dosag string instruct prescriptionbean overrid boolean equal object return this.getclass .equal other.getclass this.equ prescriptionbean equal prescriptionbean return medic == other.med || medic null medication.equ other.med == other.visitid startdatestr.equ other.startdatestr enddatestr.equ dosag other.dosag instructions.equ other.instruct int hashcod hashcod design return int getdosag return dosag setdosag int dosag this.dosag dosag date getendd tri return simpledateformat mm/dd/yyyy .pars enddatestr catch java.text.parseexcept return null setenddatestr string enddat enddat string getinstruct return instruct setinstruct string instruct this.instruct instruct medicationbean getmed return medic setmed medicationbean medic this.med medic date getstartd tri return simpledateformat mm/dd/yyyy .pars startdatestr catch parseexcept e return null string getstartdatestr return startdatestr string getenddatestr return enddatestr setstartdatestr string startdat startdat return visitid setvisitid visitid return id setid id
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.text.simpledateformat import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.prescriptionbean loader prescriptionbean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class prescriptionbeanload implement beanload prescriptionbean medicationbeanload medload public prescriptionbeanload medload medicationbeanload list prescriptionbean loadlist resultset rs throw sqlexcept arraylist prescriptionbean list arraylist prescriptionbean rs.next loadsingl rs return list prescriptionbean loadsingl resultset rs throw sqlexcept prescriptionbean pre prescriptionbean pres.setid rs.getlong id pres.setvisitid visitid pres.setstartdatestr simpledateformat mm/dd/yyyy .format java.util.d rs.getdat startdat .gettim pres.setenddatestr simpledateformat mm/dd/yyyy .format java.util.d rs.getdat enddat .gettim pres.setdosag rs.getint dosag pres.setinstruct rs.getstr instruct pres.setmed rs return pre preparedstat loadparamet preparedstat ps prescriptionbean pre throw sqlexcept pres.getvisitid ps.setstr pres.getmed .getndcod ps.setdat java.sql.d pres.getstartd .gettim ps.setdat java.sql.d pres.getendd .gettim ps.setint pres.getdosag ps.setstr pres.getinstruct return ps 
packag edu.ncsu.csc.itrust.act import java.util.arraylist import java.util.hashmap import java.util.list import java.util.map import edu.ncsu.csc.itrust.parameterutil edu.ncsu.csc.itrust.action.base.patientbaseact import import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.officevisitdao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.nohealthrecordsexcept import edu.ncsu.csc.itrust.exception.itrustexcept handl prescript report given pid use patient/getmyprescriptionreport.jsp patient/viewmyprescriptionrecord.jsp author class prescriptionreportact extend patientbaseact boolean isrepres officevisitdao ovdao transactiondao transdao patientdao patientdao super class valid pidstr factori daofactori use creat dao use action param loggedinmid mid user make report param pidstr mid question throw itrustexcept throw dbexcept throw nohealthrecordsexcept prescriptionreportact daofactori factori string pidstr throw itrustexcept dbexcept nohealthrecordsexcept factori pidstr factory.gettransactiondao this.ovdao factory.getofficevisitdao this.patientdao factory.getpatientdao this.loggedinmid loggedinmid take patient represente param return repres param input patient represente return represente mid throw itrustexcept string input throw itrustexcept tri reppeemid long.valueof input patientdao.repres loggedinmid reppeemid reppeemid isrepres return reppeemid throw itrustexcept repres reppeemid catch numberformatexcept e throw itrustexcept mid number return list offic visit pid list officevisitbean throw dbexcept list officevisitbean getallofficevisit throw dbexcept return ovdao.getallofficevisit use jsp pass map form list officevisitbean return list prescriptionreportbean param java.util.hashmap contain paramet map param officevisit a java.util.list officevisitbean visit return prescriptionreportbean throw dbexcept suppress warn jsp request.getparametermap suppresswarn list prescriptionreportbean getprescriptionreport map param list officevisitbean officevisit throw dbexcept hashmap string string myparam parameterutil.convertmap param list long arraylist long int officevisits.s i++ tri params.get offset integer.valueof myparams.get + ovids.add offset .getvisitid catch numberformatexcept skip transdao.logtransact transactiontype.view_prescription_report loggedinmid get report offic visit ovids.tostr return arraylist prescriptionreportbean return ovdao.getprescriptionreport ovid return patientbean return patientbean throw dbexcept patientbean getpati throw dbexcept return patientdao.getpati pid use jsp pass map html list officevisitbean return string use jsp pull param prescript report param parammap a java.util.hashmap paramet param officevisit a java.util.list officevisitbean return string use throw formvalidationexcept throw dbexcept suppress warn jsp request.getparametermap suppresswarn string getquerystr map parammap list officevisitbean officevisit throw formvalidationexcept dbexcept hashmap string string myparam parameterutil.convertmap parammap list integ ovoffset checkofficevisit myparam officevisit string querystr buildquerystr ovoffset isrepres querystr rep= return querystr check offic visit param myparam list paramet param officevisit list offic visit return return java.util.arraylist integ given offic visit arraylist integ checkofficevisit hashmap string string myparam list officevisitbean officevisit arraylist integ list arraylist integ int officevisits.s i++ .equal myparams.get + list.add return list build string offic visit param ovoffset offset offic visit return sql queri java string string buildquerystr list integ ovoffset int n == return string + n i++ += + + + ovoffsets.get return 
packag edu.ncsu.csc.itrust.bean contain prescript report requir contain turn contain medic bean offic visit bean br br made prescript report done query. br br see link prescriptionbean see link officevisitbean author andi mene class prescriptionreportbean prescriptionbean prescript officevisitbean officevisit prescriptionreportbean prescriptionbean getprescript return prescript setprescript prescriptionbean prescript this.prescript prescript officevisitbean getofficevisit return officevisit setofficevisit officevisitbean officevisit this.officevisit officevisit 
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.prescriptionreportbean loader prescriptionreportbean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class prescriptionreportbeanload implement beanload prescriptionreportbean prescriptionbeanload presload officevisitload public prescriptionreportbeanload ovload officevisitload presload prescriptionbeanload list prescriptionreportbean loadlist resultset rs throw sqlexcept arraylist prescriptionreportbean list arraylist prescriptionreportbean rs.next loadsingl rs return list prescriptionreportbean loadsingl resultset rs throw sqlexcept prescriptionreportbean pre prescriptionreportbean pres.setofficevisit ovloader.loadsingl rs pres.setprescript presloader.loadsingl rs return pre preparedstat loadparamet preparedstat ps prescriptionreportbean pre throw sqlexcept throw illegalstateexcept unimpl 
packag edu.ncsu.csc.itrust.risk.factor import import edu.ncsu.csc.itrust.exception.dbexcept check diagnos delegatin dao see link patientriskfactor detail method andi /public class priordiagnosisfactor extend patientriskfactor patientid daofactori factori lowericdcod priordiagnosisfactor daofactori factori lowericdcod factori this.patientid patientid this.lowericdcod lowericdcod this.uppericdcod string getdescript return patient diagnos hasfactor tri return .hadpriordiagnos patientid uppericdcod catch dbexcept e return 
packag edu.ncsu.csc.itrust.bean java.sql.d store data procedur bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class procedurebean string cptcode string descript string attribut date date string procedurebean procedurebean string code cptcode code procedurebean string code string descript cptcode code this.descript descript procedurebean string code string descript string attribut cptcode code this.descript descript this.attribut attribut procedurebean string code string descript string attribut string cptcode code this.descript descript hcpid get cpt code procedur return cpt code procedur string getcptcod return cptcode setcptcod string code cptcode code get cpt descript procedur return cpt descript procedur string getdescript return descript setdescript string descript this.descript descript get hcp id hcp administ immun return string string return string hcpid hcpid get cpt attribut use immun return string string getattribut return attribut set cpt attribut use immun string setattribut string attrib attrib return setovprocedureid ovprocedureid date getdat return date setdat date date
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.procedurebean loader procedurebean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class procedurebeanload implement beanload procedurebean loadovprocedureid procedurebeanload this.loadovprocedureid procedurebeanload boolean loadovprocedureid loadovprocedureid list procedurebean loadlist resultset rs throw sqlexcept arraylist procedurebean list arraylist procedurebean rs.next loadsingl rs return list procedurebean loadsingl resultset rs throw sqlexcept procedurebean procedur procedurebean rs.getstr code procedure.setdescript rs.getstr descript procedure.setattribut rs.getstr attribut loadovprocedureid procedure.setovprocedureid rs.getlong id procedure.setd rs.getdat visitd return preparedstat loadparamet preparedstat ps procedurebean bean throw sqlexcept ps.setstr bean.getdescript return ps 
packag edu.ncsu.csc.itrust.valid import edu.ncsu.csc.itrust.action.updatendcodelistact import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept valid nd code link updatendcodelistact author andi /public class procedurebeanvalid extend beanvalid procedurebean default constructor procedurebeanvalid perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid procedurebean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat cpt code p.getcptcod validationformat.cpt errorlist.addifnotnul checkformat descript p.getdescript validationformat.cpt_code_descript errorlist.haserror throw formvalidationexcept errorlist 
packag import java.sql.connect import java.sql.sqlexcept import javax.naming.context import javax.naming.initialcontext import javax.naming.namingexcept import javax.sql.datasourc produc jdbc connect tomcat jdbc connect pool defin produc except run unit test 're run tomcat author andi /public class productionconnectiondriv implement iconnectiondriv connect getconnect throw sqlexcept tri return datasourc context initialcontext .lookup java comp/env .lookup jdbc/itrust .getconnect catch namingexcept e throw sqlexcept context lookup name except e.getmessag 
packag import java.util.random gener random string charact author andi /public class randompassword random rand random return string charact return string random charact string getrandompassword string str int i++ += char rand.nextint + return 
packag edu.ncsu.csc.itrust.bean store data referr bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class referralbean id patientid senderid receiverid string referraldetail string consultationdetail referralstatu statu referralstatus.pend enum referralstatu pend finish declin referralbean overrid boolean equal object return this.getclass .equal other.getclass this.equ referralbean equal referralbean return id == other.id == receiverid == referraldetails.equ other.referraldetail consultationdetails.equ other.consultationdetail status.equ other.statu int hashcod hashcod design return return id setid id return senderid setsenderid senderid return receiverid setreceiverid receiverid string getreferraldetail return referraldetail void setreferraldetail string referraldetail this.referraldetail referraldetail string getconsultationdetail return consultationdetail void setconsultationdetail string consultationdetail this.consultationdetail consultationdetail referralstatu getstatu return statu setstatu referralstatu statu this.statu statu return patientid setpatientid patientid
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import import edu.ncsu.csc.itrust.beans.referralbean.referralstatu a loader referralbean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class referralbeanload implement beanload referralbean referralbeanload list referralbean loadlist resultset rs throw sqlexcept arraylist referralbean list arraylist referralbean rs.next loadsingl rs return list referralbean loadsingl resultset rs throw sqlexcept referralbean ref referralbean eric fix mysql databas bug plagu java ref.setid id //ref.setid ref.setsenderid senderid ref.setreceiverid receiverid ref.setpatientid patientid ref.setreferraldetail rs.getstr referraldetail ref.setconsultationdetail rs.getstr consultationdetail rs.getstr statu .equal pend ref.setstatu referralstatus.pend rs.getstr statu .equal finish ref.setstatu referralstatus.finish ref.setstatu referralstatus.declin return ref preparedstat loadparamet preparedstat ps referralbean ref throw sqlexcept ref.getpatientid ref.getsenderid ref.getreceiverid ps.setstr ref.getreferraldetail ps.setstr ref.getconsultationdetail ps.setstr ref.getstatu .tostr return ps 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.referralbeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept use referr fetch list referr sent hcp dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao class referraldao daofactori factori referralbeanload referralload constructor param factori link daofactori associ dao use obtain sql connect etc referraldao daofactori factori factori referralload referralbeanload get referr sent hcp param mid hcp return list referr sent throw dbexcept list referralbean getreferralssentfrom throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from referr where senderid resultset rs ps.executequeri return referralloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps get referr sent hcp param mid hcp return list referr sent throw dbexcept list referralbean getreferralssentto throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from referr where receiverid resultset rs ps.executequeri return referralloader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps updat given databas param r updat throw dbexcept referralbean r throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat referr set patientid= senderid= receiverid= + referraldetails= consultationdetails= status= where id= referralloader.loadparamet ps r r.getid ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps add given databas param r add throw dbexcept referralbean r throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into referr patientid senderid receiverid + referraldetail consultationdetail statu + valu referralloader.loadparamet ps r ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.act import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.referraldao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.exception.dbexcept import java.util.list use refer patient hcp call made /auth/hcp/hcpconsultation.jsp class referralmanagementact transactiondao transdao referraldao referraldao super class valid id param factori daofactori use creat dao use action param loggedinmid mid user manag param pidstr mid patient refer throw itrustexcept referralmanagementact daofactori factori throw itrustexcept factory.getreferraldao this.loggedinmid loggedinmid this.transdao factory.gettransactiondao add bean databas param r bean ad throw dbexcept referralbean r throw dbexcept r transdao.logtransact transactiontype.send_referr loggedinmid updat exist bean param r bean throw dbexcept referralbean r throw dbexcept r get referr log mid sent return a java.util.list referralbean mid sent throw dbexcept list referralbean getreferralssentfromm throw dbexcept return referraldao.getreferralssentfrom loggedinmid get referr mid receiv return a java.util.list referralbean mid receiv dbexcept list referralbean getreferralssenttom throw dbexcept return referraldao.getreferralssentto loggedinmid 
packag import java.sql.connect import java.util.d import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.sql.timestamp import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.remotemonitoringdatabeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept use keep remot monitor data dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao class remotemonitoringdao daofactori factori remotemonitoringdatabeanload loader remotemonitoringdatabeanload constructor param factori link daofactori associ dao use obtain sql connect etc remotemonitoringdao daofactori factori factori return data given hcp return throw dbexcept list remotemonitoringdatabean getpatientsdata throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from remotemonitoringlist where hcpmid= order by patientmid resultset patientr ps.executequeri ps conn.preparestat select from remotemonitoringdata where timelog current_d order by patientid timelog desc resultset datar ps.executequeri list string arraylist string patientlist.add patientmid + list remotemonitoringdatabean datalist datar int j //go patient remov monitor hcp datalist.s i++ patientlist.contain datalist.get .getpatientmid + datalist.remov valu list data today list boolean patientlist.s i++ j j datalist.s j++ datalist.get j .getpatientmid + .equal patientlist.get break datalist.add remotemonitoringdatabean long.parselong patientlist.get return catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps list remotemonitoringdatabean getpatientdatabyd date date throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from remotemonitoringdata where patientid= and timelog and timelog order by timelog desc patientmid ps.settimestamp timestamp lower.gettim add day includ ps.settimestamp timestamp + resultset rs ps.executequeri list remotemonitoringdatabean datalist rs return datalist catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps store data given remotemonitoringdata tabl param patientmid mid param systolicbloodpressur blood pressur param diastolicbloodpressur blood pressur param glucoselevel level patient param reporterrol role person report monitor stat param reportermid mid person report monitor stat throw dbexcept void storepatientdata int systolicbloodpressur int diastolicbloodpressur int glucoselevel string reporterrol throw dbexcept itrustexcept getnumberofdailyentri patientmid itrustexcept entri today exceed reporterrole.equ repres validatepr reportermid connect conn null preparedstat ps tri factory.getconnect ps conn.preparestat insert into remotemonitoringdata patientid systolicbloodpressur diastolicbloodpressur reporterrol reporterid valu patientmid systolicbloodpressur ps.setint diastolicbloodpressur ps.setint glucoselevel ps.setstr reporterrol reportermid ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps store data given remotemonitoringdata tabl param patientmid mid param systolicbloodpressur blood pressur param diastolicbloodpressur blood pressur param glucoselevel level patient param reporterrol role person report monitor stat param reportermid mid person report monitor stat throw dbexcept void storepatientdata int glucoselevel string reporterrol throw dbexcept itrustexcept getnumberofdailyentri patientmid itrustexcept entri today exceed reporterrole.equ repres validatepr reportermid connect conn null preparedstat ps tri factory.getconnect ps conn.preparestat insert into remotemonitoringdata patientid glucoselevel reporterrol reporterid valu patientmid glucoselevel ps.setstr reporterrol reportermid ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps store data given remotemonitoringdata tabl param patientmid mid param systolicbloodpressur blood pressur param diastolicbloodpressur blood pressur param glucoselevel level patient param reporterrol role person report monitor stat param reportermid mid person report monitor stat throw dbexcept void storepatientdata int systolicbloodpressur int diastolicbloodpressur string reporterrol throw dbexcept itrustexcept getnumberofdailyentri patientmid itrustexcept entri today exceed reporterrole.equ repres validatepr reportermid connect conn null preparedstat ps tri factory.getconnect ps conn.preparestat insert into remotemonitoringdata patientid systolicbloodpressur diastolicbloodpressur reporterrol reporterid valu patientmid systolicbloodpressur ps.setint diastolicbloodpressur ps.setstr reporterrol reportermid ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps privat method get number entri today param return number entri throw dbexcept int getnumberofdailyentri throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from remotemonitoringdata where patientid= and date timelog =current_d resultset rs ps.executequeri list remotemonitoringdatabean patient return patients.s catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps validatepr throw itrustexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from repres where representermid= and representeemid= representativemid patientmid resultset rs ps.executequeri rs.next //no row throw itrustexcept represent patient patientmid catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps add list hcp monitor list patient param mid param hcpmid mid hcp return ad addpatienttolist hcpmid throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from remotemonitoringlist where patientmid and hcpmid patientmid hcpmid resultset rs ps.executequeri return ps conn.preparestat insert into remotemonitoringlist patientmid hcpmid valu patientmid hcpmid return catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps remov list hcp monitor list patient param mid param hcpmid mid hcp return remov list removepatientfromlist hcpmid throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from remotemonitoringlist where patientmid and hcpmid patientmid hcpmid resultset rs ps.executequeri return ps conn.preparestat delet from remotemonitoringlist where patientmid and hcpmid patientmid hcpmid ps.executeupd == return return catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.bean import java.sql.timestamp a bean store monitor data patient bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class remotemonitoringdatabean timestamp time int systolicbloodpressur int diastolicbloodpressur int glucoselevel string reporterrol constructor paramet remotemonitoringdatabean constructor paramet remotemonitoringdatabean this.patientmid patientmid return reportermid void setreportermid this.reportermid reportermid return patientmid void setloggedinmid this.patientmid patientmid timestamp gettim return time settim timestamp time time int getsystolicbloodpressur return systolicbloodpressur setsystolicbloodpressur int systolicbloodpressur this.systolicbloodpressur systolicbloodpressur int getdiastolicbloodpressur return diastolicbloodpressur setdiastolicbloodpressur int diastolicbloodpressur this.diastolicbloodpressur diastolicbloodpressur int getglucoselevel return glucoselevel setglucoselevel int glucoselevel glucoselevel string getreporterrol return setreporterrol string reporterrol reporterrol
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.remotemonitoringdatabean loader remotemonitoringdatabean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class remotemonitoringdatabeanload implement beanload remotemonitoringdatabean list remotemonitoringdatabean loadlist resultset rs throw sqlexcept list remotemonitoringdatabean list arraylist remotemonitoringdatabean rs.next loadsingl rs return list preparedstat loadparamet preparedstat ps remotemonitoringdatabean bean throw sqlexcept throw illegalstateexcept unimpl remotemonitoringdatabean loadsingl resultset rs throw sqlexcept remotemonitoringdatabean remotemonitoringdatabean d.setloggedinmid rs.getlong patientid d.setsystolicbloodpressur rs.getint systolicbloodpressur d.setdiastolicbloodpressur rs.getint diastolicbloodpressur d.setglucoselevel rs.getint glucoselevel d.settim rs.gettimestamp timelog d.setreporterrol rs.getstr reporterrol d.setreportermid reporterid return 
packag edu.ncsu.csc.itrust.valid import edu.ncsu.csc.itrust.action.addremotemonitoringdataact import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept valid use valid ad monitor data link addremotemonitoringdataact class remotemonitoringdatabeanvalid extend beanvalid remotemonitoringdatabean default constructor remotemonitoringdatabeanvalid perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid remotemonitoringdatabean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat systol blood pressur m.getsystolicbloodpressur validationformat.systolic_blood_pressur errorlist.addifnotnul checkformat diastol blood pressur m.getdiastolicbloodpressur validationformat.diastolic_blood_pressur errorlist.addifnotnul checkformat glucos level + m.getglucoselevel validationformat.glucose_level errorlist.haserror throw formvalidationexcept errorlist 
packag edu.ncsu.csc.itrust.act use report event java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.emailutil edu.ncsu.csc.itrust.beans.email import import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.adverseeventdao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.adverseeventvalid import edu.ncsu.csc.itrust.exception.formvalidationexcept class reportadverseeventact emailutil email patientdao patientdao personneldao personneldao adverseeventdao adverseeventdao transactiondao transactiondao hcpid adverseeventvalid valid reportadverseeventact string hcpid daofactori factori this.loggedinmid loggedinmid this.patientdao factory.getpatientdao this.personneldao factory.getpersonneldao this.email emailutil factori this.adverseeventdao factory.getadverseeventdao this.transactiondao factory.gettransactiondao this.hcpid long.parselong hcpid this.valid adverseeventvalid constructor use send reportadverseeventact daofactori factori this.loggedinmid loggedinmid this.patientdao factory.getpatientdao this.personneldao factory.getpersonneldao this.email emailutil factori this.adverseeventdao factory.getadverseeventdao this.transactiondao factory.gettransactiondao this.valid adverseeventvalid method send e-mail mid list advers event aelist list event bean need act return elist list test purpos email sendmail list adverseeventbean aelist throw itrustexcept formvalidationexcept dbexcept list string midlist arraylist string string patientid adverseeventbean beaner beaner.getmid string drug + beaner.getdrug + beaner.getcod descript beaner.getdescript beaner.setdescript newdesc adverseeventbean beano midlist.contain beano.getprescrib midlist.add beano.getprescrib email email email string midlist string messag patientdao.getnam long.parselong patientid + mid + patientid + ha report follow event adverseeventbean beano .equal messag messag beano.getdescript string fromemail itrust.com patientbean patientdao.getpati loggedinmid personnelbean receiv personneldao.getpersonnel long.parselong list string arraylist string tolist.add receiver.getemail fromemail sender.getemail email.settolist tolist fromemail email.setsubject string.format advers event report prescript email.setbodi messag email transactiondao.logtransact transactiontype.send_messag loggedinmid return email a method use send e-mail use immun return email return email test purpos email sendmail adverseeventbean aebean throw itrustexcept formvalidationexcept dbexcept email email email string fromemail email.setfrom itrust.com list string arraylist string patientbean sender patientdao.getpati personnelbean receiv personneldao.getpersonnel hcpid tolist.add receiver.getemail fromemail sender.getemail email.settolist tolist fromemail email.setsubject string.format advers event report immun email.setbodi string.format patient patientdao.getnam long.parselong aebean.getmid + mid + aebean.getmid + ha report follow event + drug + aebean.getdrug + aebean.getcod descript aebean.getdescript emailer.sendemail email transactiondao.logtransact transactiontype.send_messag loggedinmid return email method use add report data base param event add return string test purpos throw itrustexcept throw formvalidationexcept throw dbexcept string addreport adverseeventbean aebean throw itrustexcept formvalidationexcept dbexcept tri aebean catch formvalidationexcept e return e.getmessag tri aebean hcpid catch dbexcept e throw itrustexcept e.getmessag old code use keep refer email email email string sendernam string fromemail email.setfrom itrust.com list string arraylist string patientbean sender patientdao.getpati personnelbean receiv personneldao.getpersonnel hcpid tolist.add receiver.getemail sendernam sender.getemail email.settolist tolist fromemail email.setsubject string.format advers event report email.setbodi string.format patient patientdao.getnam long.parselong aebean.getmid + mid + aebean.getmid + ha report follow event + drug + aebean.getdrug + aebean.getcod descript aebean.getdescript emailer.sendemail email transactiondao.logtransact transactiontype.send_messag loggedinmid transactiondao.logtransact transactiontype.adverse_ev loggedinmid return 
packag edu.ncsu.csc.itrust.bean java.text.parseexcept import java.text.simpledateformat import java.util.d import edu.ncsu.csc.itrust.messag store data report request bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class reportrequestbean id requestermid date requestedd date approvedd date viewedd string statu string comment non-nls-1 static string dateformat mm/dd/yyyy hh mm non-nls-1 static string request messages.getstr reportrequestbean.request non-nls-1 string approv messages.getstr reportrequestbean.approv non-nls-1 static string reject messages.getstr reportrequestbean.reject non-nls-1 static string view messages.getstr reportrequestbean.view non-nls-1 reportrequestbean setid id id return id void setrequestermid this.requestermid requestermid return requestermid void setpatientmid this.patientmid patientmid return patientmid void setapprovermid this.approvermid approvermid //// return approvermid setrequestedd date requestedd requestedd == date requesteddate.clon setrequesteddatestr string tri setrequestedd simpledateformat dateformat .pars catch parseexcept system.out.println ex.getmessag date getrequestedd return requestedd == date requesteddate.clon string getrequesteddatestr requestedd == return non-nls-1 return simpledateformat dateformat .format requestedd setapprovedd date approvedd approvedd == date approveddate.clon //// void setapproveddatestr string tri setapprovedd simpledateformat dateformat .pars catch parseexcept system.out.println ex.getmessag date getapprovedd return approvedd == date approveddate.clon //// string getapproveddatestr == return non-nls-1 return simpledateformat dateformat .format approvedd setviewedd date viewedd viewedd == date vieweddate.clon setvieweddatestr string tri setviewedd simpledateformat dateformat .pars catch parseexcept system.out.println ex.getmessag date getviewedd return viewedd == date vieweddate.clon string getvieweddatestr viewedd == return //dateformat dateformatt dateformat.getdatetimeinst dateformat.short dateformat.short localization.inst .getcurrentlocal //return viewedd return simpledateformat dateformat .format viewedd setstatu string statu this.statu statu string getstatu return statu setcom string comment comment //// string getcom return comment
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.reportrequestbean loader reportrequestbean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class reportrequestbeanload implement beanload reportrequestbean list reportrequestbean loadlist resultset rs throw sqlexcept arraylist reportrequestbean list arraylist reportrequestbean rs.next loadsingl rs return list reportrequestbean loadsingl resultset rs throw sqlexcept reportrequestbean reportrequestbean b.setid rs.getlong id b.setrequestermid requestermid b.setpatientmid patientmid b.setrequestedd rs.gettimestamp requestedd b.setviewedd rs.gettimestamp viewedd b.setstatu rs.getstr statu return preparedstat loadparamet preparedstat ps reportrequestbean bean throw sqlexcept throw illegalstateexcept unimpl 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.d import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.reportrequestbeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept use handl data report request dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao class reportrequestdao daofactori factori reportrequestbeanload loader constructor param factori link daofactori associ dao use obtain sql connect etc reportrequestdao daofactori factori factori reportrequestbeanload return bean describ given report request param id id bean databas return describ report request throw dbexcept reportrequestbean throw dbexcept connect conn preparedstat ps tri id sqlexcept id null conn factory.getconnect conn.preparestat select from reportrequest where id resultset rs ps.executequeri return loader.loadsingl rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return report request associ given request param mid mid personnel question return report request throw dbexcept list reportrequestbean getallreportrequestsforrequest throw dbexcept connect conn preparedstat ps tri mid sqlexcept requestermid null conn factory.getconnect conn.preparestat select from reportrequest where requestermid resultset rs ps.executequeri return loader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return report request associ patient param pid mid question return a report request throw dbexcept list reportrequestbean getallreportrequestsforpati throw dbexcept connect conn preparedstat ps tri sqlexcept patientmid null conn factory.getconnect conn.preparestat select from reportrequest where patientmid resultset rs ps.executequeri return loader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return report request database.// return report requests.// throw dbexception// /// list reportrequestbean getallreportrequest throw dbexcept connect conn preparedstat ps null //// tri factory.getconnect ps conn.preparestat select from reportrequest resultset rs ps.executequeri return loader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps add report param requestermid mid request param patientmid mid question param date date request made return a id report request throw dbexcept requestermid date date throw dbexcept connect conn preparedstat ps tri requestermid sqlexcept requestermid null conn factory.getconnect conn.preparestat insert into reportrequest id requestermid patientmid requestedd statu valu 'request requestermid patientmid ps.settimestamp java.sql.timestamp date.gettim ps.executeupd return dbutil.getlastinsert conn catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps set statu request param id id report.// param mid person approv param date date approv made.// throw dbexception// /// void id date date throw dbexcept connect conn preparedstat ps tri id == sqlexcept id null conn factory.getconnect conn.preparestat reportrequest set approvermid approvedd statu 'approv id ps.settimestamp java.sql.timestamp date.gettim id ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps //// set statu report request param id id request question.// param mid reject question.// param date date reject made.// comment a comment describ request rejected.// throw dbexception// /// void rejectreportrequest id date date string comment throw dbexcept connect conn preparedstat ps tri id == sqlexcept id null conn factory.getconnect conn.preparestat reportrequest set approvermid approvedd statu 'reject comment id ps.settimestamp java.sql.timestamp date.gettim ps.setstr comment id ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps set statu report request param id id question param date date request view throw dbexcept void setview id date date throw dbexcept connect conn preparedstat ps tri id == sqlexcept id null conn factory.getconnect conn.preparestat reportrequest set viewedd statu 'view id ps.settimestamp java.sql.timestamp date.gettim id ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.act import java.util.array import import edu.ncsu.csc.itrust.beans.email import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.authdao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.validationformat manag reset password use resetpassword.jsp author class resetpasswordact int max_reset_attempt authdao authdao patientdao patientdao daofactori factori set default factori daofactori use creat dao use action resetpasswordact daofactori factori factory.getauthdao this.patientdao this.factori factori check see exist given param midstr user mid check return exist mid string midstr tri mid long.valueof midstr authdao.checkuserexist mid return return mid catch numberformatexcept e return catch dbexcept e return check see number reset attempt exceed given param ipaddress ipv4 ipv6 ip address string return number reset attempt max_reset_attempt throw dbexcept boolean ismaxedout string ipaddress throw dbexcept return authdao.getresetpasswordfailur max_reset_attempt check given match given role param mid mid check role role check return role match throw string checkrol string role throw itrustexcept tri patient .equal role patientdao.getrol role .equal || .equal role patientdao.getrol role .equal || .equal role patientdao.getrol role .equal || .equal role patientdao.getrol role .equal || .equal role patientdao.getrol role .equal return role return catch dbexcept e.printstacktrac catch itrustexcept e.printstacktrac throw e return check answer param user secur answer return answer return string checkanswernul string answer answer == || .equal answer return return answer return secur question mid param param mid mid return secur question dbexcept throw itrustexcept string getsecurityquest throw itrustexcept tri == authdao.getsecurityquest mid || authdao.getsecurityquest mid .equal throw itrustexcept secur question user set return authdao.getsecurityquest mid catch dbexcept e e.printstacktrac return reset given param mid password reset role role user param answer answer secur question param password password param confirmpassword password param ipaddr ip address request come return statu messag throw formvalidationexcept throw dbexcept throw itrustexcept string resetpassword string role string string password string confirmpassword string ipaddr throw formvalidationexcept dbexcept itrustexcept role r authdao.getuserrol mid tri role catch illegalargumentexcept return role r.equal role.admin return role chang r.equal role.pars role return role mismatch authdao.getresetpasswordfailur ipaddr max_reset_attempt return too retri tri validatepassword password confirmpassword answer.equ authdao.getsecurityansw authdao.resetpassword mid password emailutil factori .sendemail makeemailapp role return password chang authdao.recordresetpasswordfailur ipaddr return answer match catch dbexcept return error valid secur answer creat send chang param mid user password chang role role return sent throw dbexcept email makeemailapp string role throw dbexcept role.pars role == role.pati patientbean patientdao factori .getpati mid email email email email.setfrom itrust.com arrays.aslist p.getemail email.setsubject password chang itrust email.setbodi string.format dear \n chosen chang password user p.getfullnam mid email hcp admin taken resetpassword personnelbean personneldao factori .getpersonnel mid email email email email.setfrom itrust.com arrays.aslist p.getemail email.setsubject password chang itrust email.setbodi string.format dear \n chosen chang password user p.getfullnam mid email check make password enter password password param confirmpassword password confirm throw formvalidationexcept void validatepassword string password string confirmpassword throw formvalidationexcept errorlist errorlist errorlist password == null || .equal password errorlist.addifnotnul password empti password.equ confirmpassword password match validationformat.password.getregex .matcher password .match errorlist.addifnotnul password follow format validationformat.password.getdescript errorlist.haserror throw formvalidationexcept errorlist 
packag import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.healthrecord import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.healthrecordsdao edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.nohealthrecordsexcept import edu.ncsu.csc.itrust.risk.factors.patientriskfactor class number method check risk extend class use method inform use isatrisk getpatientriskfactor get risk see subclass exampl author andi /abstract class riskcheck int risk_threshold protect patientbean patient protect healthrecord currenthealthrecord protect daofactori factori riskcheck daofactori factori throw dbexcept nohealthrecordsexcept factori healthrecordsdao hrdao factory.gethealthrecordsdao list healthrecord record hrdao.getallhealthrecord patientid records.s currenthealthrecord records.get throw nohealthrecordsexcept patient factory.getpatientdao .getpati patientid return name diseas check string getnam return a java.util.list risk factor increas patient diseas risk abstract protect list patientriskfactor getdiseaseriskfactor return indic patient increas risk boolean qualifiesfordiseas method exist perform stop hit br br risk factor cach riskfactor implementor getpatientriskfactor return boolean isatrisk qualifiesfordiseas int numrisk list patientriskfactor diseaseriskfactor getdiseaseriskfactor patientriskfactor factor diseaseriskfactor factor.hasriskfactor numrisks++ numrisk risk_threshold return return qualifi not return java.util.list patient risk factor associ list patientriskfactor getpatientriskfactor list patientriskfactor patientriskfactor arraylist patientriskfactor list patientriskfactor diseaseriskfactor getdiseaseriskfactor patientriskfactor factor diseaseriskfactor factor.hasriskfactor factor return patientriskfactor 
packag import java.sql.connect import java.sql.preparedstat import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept use find risk factor given dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao author andi /public class riskdao daofactori factori constructor param factori link daofactori associ dao use obtain sql connect etc riskdao daofactori factori factori method implement use link familydao reason definit famili member chang central code make code bit nicer execut queri famili member get need refactor otherwis let keep simpl param patientid mid question param icdlow bound code param a bound code return indic famili member match rang throw dbexcept hasfamilyhistori icdlow icdupp throw dbexcept list familymemberbean familymemb getfamilymemb patientid fammemb familymemb hadpriordiagnos fammember.getmid return return familymemberbean getfamilymemb throw dbexcept familydao famdao list familymemberbean familymemb famdao.getpar patientid famdao.gets patientid return familymemb return childhood infect exact given icd code param mid question param icdcod a paramet list icd code match return indic patient list icd code throw dbexcept hadchildhoodinfect icdcod dbexcept note datediff call mysql function take differ date return valu term day day year count year connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from ovdiagnosi officevisit ov patient + where ovd.visitid=ov.id and ov.patientid=p.mid and p.mid= ov.visitd p.dateofbirth and ovd.icdcod in + createprepar + seticd ps icdcod return queri ani row ye catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps string createprepar length string str int length i++ str += return str.substr seticd start preparedstat ps icdcod throw sqlexcept icdcod icdcod start++ icdcod return smoke life param patientid mid question return indic patient smoke dbexcept boolean hassmok patientid throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn .preparestat select from personalhealthinform where patientid= and smoker=1 return ps.executequeri queri ani row ye catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return diagnos given icd code rang param patientid mid question param lowericdcod icd code param a icd code return indic match given rang throw dbexcept boolean hadpriordiagnos lowericdcod throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from ovdiagnosi officevisit ov patient + where ovd.visitid=ov.id and ov.patientid=p.mid and p.mid= ovd.icdcod and ovd.icdcod patientid lowericdcod return ps.executequeri queri ani row ye catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.enum user role patient er hcp uap pha administr tester consult requir mean choic role patient patient patient er er personnel hcp hcp personnel uap personnel admin admin personnel pha pha personnel tester tester string string role string userrolesstr string this.userrolesstr userrolesstr string return string getuserrolesstr return userrolesstr role pars string str role valu role.userrolesstring.equ str role throw illegalargumentexcept role + str + exist 
packag edu.ncsu.csc.itrust.act import java.util.list import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.exception.dbexcept class searchusersact patientdao patientdao personneldao personneldao set default factori daofactori use creat dao use action param loggedinmid mid user perform searchusersact daofactori factori factory.getpatientdao this.personneldao factory.getpersonneldao search personnel name specifi list param firstnam name search param lastnam name search return a java.util.list personnelbean user match list personnelbean searchforpersonnelwithnam string firstnam string lastnam tri .equal firstnam .equal lastnam return personneldao.searchforpersonnelwithnam firstnam lastnam catch dbexcept e system.out.println db except searchusersact e.printstacktrac return search patient name given paramet param firstnam name patient search lastnam name patient search return a java.util.list patientbean list patientbean searchforpatientswithnam string firstnam string lastnam tri .equal firstnam .equal lastnam return patientdao.searchforpatientswithnam firstnam lastnam catch dbexcept e system.out.println db except searchusersact e.printstacktrac return 
packag edu.ncsu.csc.itrust.bean store data secur question bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class securityqa string question answer confirmansw string getquest return question setquest string question this.quest question string getansw return answer setansw string answer this.answ answer string getconfirmansw return setconfirmansw string confirmansw this.confirmansw confirmansw
packag edu.ncsu.csc.itrust.valid import edu.ncsu.csc.itrust.action.setsecurityquestionact import edu.ncsu.csc.itrust.beans.securityqa edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept valid secur question answer follow other valid use state reset link setsecurityquestionact author andi /public class securityqavalid extend beanvalid securityqa perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid securityqa bean throw formvalidationexcept errorlist errorlist errorlist null == bean throw formvalidationexcept null form == bean.getconfirmansw throw formvalidationexcept confirm answer empti bean.getansw .equal bean.getconfirmansw throw formvalidationexcept secur answer match checkformat secur question bean.getquest validationformat.quest errorlist.addifnotnul checkformat secur answer bean.getansw validationformat.answ errorlist.haserror throw formvalidationexcept errorlist 
packag edu.ncsu.csc.itrust.act import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.emailutil edu.ncsu.csc.itrust.beans.email import import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.messagedao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.emailvalid import edu.ncsu.csc.itrust.validate.messagevalid class sendmessage.jsp /public class sendmessageact emailutil email patientdao patientdao personneldao personneldao messagedao messagedao transactiondao transactiondao emailvalid emailv messagevalid messval set default factori daofactori use creat dao use action param loggedinmid mid user send messag sendmessageact daofactori factori this.loggedinmid loggedinmid this.patientdao factory.getpatientdao this.personneldao factory.getpersonneldao this.email emailutil factori this.messagedao factory.getmessagedao this.transactiondao factory.gettransactiondao this.emailv emailvalid this.messv messagevalid send messag param messag sent throw itrustexcept throw sqlexcept void sendmessag mbean throw itrustexcept sqlexcept formvalidationexcept mbean emailval.valid messagedao.addmessag email email email string sendernam string fromemail email.setfrom itrust.com list string arraylist string mbean.getfrom mbean.getto sender personneldao.getpersonnel personnelbean receiv personneldao.getpersonnel mbean.getto tolist.add receiver.getemail sendernam sender.getemail mbean.getfrom sender personneldao.getpersonnel loggedinmid mbean.getto receiv personneldao.getpersonnel mbean.getto tolist.add receiver.getemail patientbean receiv patientdao.getpati mbean.getto tolist.add receiver.getemail sendernam sender.getemail sender patientdao.getpati loggedinmid mbean.getto personnelbean personneldao.getpersonnel mbean.getto tolist.add receiver.getemail patientbean receiv patientdao.getpati mbean.getto tolist.add receiver.getemail sendernam sender.getemail tolist fromemail email.setsubject string.format a messag sendernam email.setbodi string.format receiv messag itrust view log itrust go view my messages\ sendernam email transactiondao.logtransact transactiontype.send_messag loggedinmid return patient name param mid mid return name throw itrustexcept string getpatientnam throw itrustexcept return patientdao.getnam mid return personnel name param mid mid personnel return personnel throw itrustexcept string getpersonnelnam throw itrustexcept return personneldao.getnam mid return list patient log hcp repres list patient log hcp repres throw itrustexcept list patientbean getmyrepresente throw itrustexcept patientbean represente arraylist patientbean tri represente patientdao.getrepres loggedinmid catch dbexcept e e.printstacktrac return represente return design hcp log return design hcp log throw itrustexcept list personnelbean getmydlhcp throw itrustexcept return getdlhcpsfor loggedinmid return design hcp given return design hcp given patient throw list personnelbean getdlhcpsfor throw itrustexcept personnelbean dlhcp arraylist personnelbean tri dlhcp patientdao.getdeclaredhcp pid catch dbexcept e e.printstacktrac return dlhcp 
packag import javax.servlet.http.httpsess import javax.servlet.http.httpsessionev import javax.servlet.http.httpsessionlisten import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept a listen time time limit class sessiontimeoutlisten implement httpsessionlisten daofactori factori default constructor sessiontimeoutlisten daofactory.getproductioninst constructor take daofactori use check timeout limit param factori daofactori use sessiontimeoutlisten daofactori factori factori call httpsession creat pull limit databas set properti httpsession param arg0 httpsessioneven occur void sessioncr httpsessionev arg0 httpsession session arg0.getsess int min tri min factory.getaccessdao .getsessiontimeoutmin catch dbexcept system.err.println set session default minut e.printstacktrac min min session.setmaxinactiveinterv min must declar complianc interfac implement void sessiondestroy httpsessionev arg0 noth 
packag edu.ncsu.csc.itrust.act import edu.ncsu.csc.itrust.beans.securityqa edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.authdao edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.securityqavalid handl set retriev secur questions/answ user use staff/editpersonnell.jsp author class setsecurityquestionact authdao authdao set default factori daofactori use creat dao use action param rloggedinmid mid user set secur question throw itrustexcept setsecurityquestionact daofactori factori throw itrustexcept factory.getauthdao loggedinmid checkmid rloggedinmid updat inform databas inform held securityqa bean pass securityquestionbean hold inform throw except void updateinform securityqa throw except securityqavalid sqav securityqavalid sqav.valid authdao.setsecurityquestionansw a.getquest a.getansw loggedinmid return securityqa hold secur info log return securityqa loggedinmid throw itrustexcept securityqa retrieveinform throw itrustexcept securityqa toret securityqa toret.setansw authdao.getsecurityansw toret.setquest authdao.getsecurityquest return toret check make mid exist param mid mid check return return mid user throw except throw itrustexcept throw itrustexcept authdao.checkuserexist mid itrustexcept mid + mid + return mid 
packag edu.ncsu.csc.itrust.risk.factor import import edu.ncsu.csc.itrust.exception.dbexcept risk factor deleg dao see smoke life see link patientriskfactor detail method andi /public class smokingfactor extend patientriskfactor patientid daofactori factori smokingfactor daofactori factori factori this.patientid patientid string getdescript return smoker hasfactor tri return factory.getriskdao .hassmok patientid catch dbexcept e return 
packag edu.ncsu.csc.itrust.enum state author andi /public enum state al alabama ak alaska az arizona ar arkansa ca california co colorado ct connecticut de delawar dc district columbia fl florida ga georgia hi hawaii id idaho il illinoi in indiana ia iowa ks kansa ky kentucki la louisiana me main md maryland ma massachusett mi michigan mn minnesota ms mississippi mo missouri mt montana ne nebraska nv nevada nh new hampshir nj new jersey nm new mexico ny new york nc north carolina nd north dakota oh ohio oklahoma or oregon pa pennsylvania ri rhode island sc south carolina sd south dakota tn tennesse tx texa utah vt vermont va virginia wa washington wv west virginia wi wisconsin wy wyom string name state string name this.nam name string getnam return name string getabbrev return tostr just show overrid public string tostr return super.tostr state pars string state state valu state.valu state mystat valu mystate.getnam .equal state || mystate.getabbrev .equal state return mystat return state.nc 
packag edu.ncsu.csc.itrust.tag import java.io.ioexcept import javax.servlet.jsp.jspexcept import javax.servlet.jsp.jspwrit import javax.servlet.jsp.pagecontext import javax.servlet.jsp.tagext.tag import edu.ncsu.csc.itrust.enums.st jsp tag add html select state enum see link state select state author andi /public class stateselect implement tag pagecontext pagecontext tag parent string name string valu stateselect int dostarttag throw jspexcept tri jspwriter pagecontext.getout name=\ + getnam + name == null || .equal name option value=\ select state /option state state state.valu string select state.tostr .equal getvalu out.writ option value=\ + state.tostr + + select + state.getnam + /option catch ioexcept e.printstacktrac return skip_bodi int doendtag throw jspexcept return skip_bodi releas setpagecontext pagecontext pagecontext pagecontext setpar tag parent parent tag getpar return parent string getnam return name setnam string name this.nam name string getvalu return valu setvalu string valu valu 
packag edu.ncsu.csc.itrust.act import java.util.calendar import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.surveydao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept class use add survey data databas offic visit id link survey id onc survey ad transact log class surveyact transactiondao transdao surveydao surveydao set default factori daofactori use creat dao use action param loggedinmid mid user take survey surveyact daofactori factori factory.gettransactiondao surveydao factory.getsurveydao this.loggedinmid loggedinmid pass officevistbean surveybean param contain data ad databas param offic visit id correspond survey throw dbexcept void surveybean throw dbexcept visitid //now set visit id survey bean calendar.getinst .gettim //add transact log transdao.logtransact transactiontype.add_patient_survey loggedinmid offic visit id complet survey visitid 
packag edu.ncsu.csc.itrust.bean java.text.parseexcept import java.text.simpledateformat import java.util.d a bean store survey data associ offic visit a bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class surveybean visitid date surveyd int waitingroomminut int examroomminut visitsatisfact int treatmentsatisfact static string dateformat mm/dd/yyyy hh mm setvisitid visitid id return visitid setsurveyd date surveyd surveyd == date surveydate.clon setsurveydatestr string tri setsurveyd simpledateformat dateformat .pars catch parseexcept system.out.println ex.getmessag date getsurveyd return surveyd == date surveydate.clon string getsurveydatestr == return return simpledateformat dateformat .format getsurveyd void setwaitingroomminut int waitingroomminut this.waitingroomminut waitingroomminut int getwaitingroomminut return waitingroomminut void setexamroomminut int examroomminut this.examroomminut examroomminut int getexamroomminut return examroomminut setvisitsatisfact int visitsatisfact this.visitsatisfact visitsatisfact int getvisitsatisfact return visitsatisfact settreatmentsatisfact int treatmentsatisfact this.treatmentsatisfact treatmentsatisfact int gettreatmentsatisfact return treatmentsatisfact
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.d import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.surveyload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept a dao handl survey data dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao class surveydao daofactori factori surveyload surveyload constructor param factori link daofactori associ dao use obtain sql connect etc surveydao daofactori factori factori this.surveyload surveyload insert survey data databas param surveybean bean repres user respons insert param date date survey complet void surveybean surveybean date date throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into ovsurvey visitid surveyd valu surveybean.getvisitid ps.settimestamp java.sql.timestamp date.gettim ps.executeupd surveybean.getwaitingroomminut ps conn.preparestat ovsurvey set waitingroomminut visitid ps.setfloat surveybean.getwaitingroomminut ps.executeupd surveybean.getexamroomminut ps conn.preparestat ovsurvey set examroomminut visitid ps.setfloat surveybean.getexamroomminut ps.executeupd surveybean.getvisitsatisfact ps conn.preparestat ovsurvey set visitsatisfact visitid ps.setfloat surveybean.getvisitsatisfact ps.executeupd surveybean.gettreatmentsatisfact ps conn.preparestat ovsurvey set treatmentsatisfact visitid ps.setfloat surveybean.gettreatmentsatisfact ps.executeupd catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps get survey data databas offic visit id creat instanc surveybean data return param id id survey question return contain throw dbexcept surveybean getsurveydata throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from ovsurvey where visitid resultset rs ps.executequeri return surveyloader.loadsingl rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps ha survey complet id offic visit wonder return indic survey complet dbexcept boolean issurveycomplet throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select count from ovsurvey where visitid resultset rs ps.executequeri return rs.getint == catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.beans.surveybean loader surveybean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class surveyload implement beanload surveybean list surveybean loadlist resultset rs throw sqlexcept throw illegalstateexcept unimpl preparedstat loadparamet preparedstat ps surveybean bean throw sqlexcept throw illegalstateexcept unimpl surveybean loadsingl resultset rs throw sqlexcept surveybean survey surveybean survey.setvisitid rs.getlong visitid survey.setsurveyd rs.gettimestamp surveyd survey.setexamroomminut rs.getint examroomminut survey.setwaitingroomminut rs.getint waitingroomminut survey.settreatmentsatisfact rs.getint treatmentsatisfact survey.setvisitsatisfact rs.getint visitsatisfact return survey 
packag edu.ncsu.csc.itrust.bean bean use survey result search store inform hcp addit specialti hospit averag survey result rang bean contain store offic visit satisfact result class surveyresultbean string hcpfirstnam string hcplastnam string hcpaddress1 string hcpaddress2 string hcpciti string hcpstate string hcpzip string hcpspecialti string hcphospitalid float avgwaitingrmminut float avgexamrmminutu avgvisitsatisfact float avgtreatmentsatisfact float specialti static string general_specialti gener static string surgeon_specialti surgeon static string heart_specialti heart specialist static string pediatrician_specialti static string obgyn_specialti ob/gyn static string any_specialti none sethcpmid hcpmid mid return hcpmid sethcpfirstnam string firstnam this.hcpfirstnam firstnam string gethcpfirstnam return hcpfirstnam sethcplastnam string lastnam this.hcplastnam lastnam string gethcplastnam return hcplastnam sethcpaddress1 string address1 address1 string gethcpaddress1 return hcpaddress1 sethcpaddress2 string address2 address2 string gethcpaddress2 return hcpaddress2 sethcpciti string citi this.hcpciti citi string gethcpciti return hcpciti sethcpstat string state this.hcpstat state string gethcpstat return hcpstate sethcpzip string zip zip string gethcpzip return hcpzip sethcpspecialti string specialti this.hcpspecialti specialti string gethcpspecialti return hcpspecialti sethcphospit string hospit hospit string gethcphospit return hcphospitalid setavgwaitingroomminut float waitingroomminut this.avgwaitingrmminut waitingroomminut float getavgwaitingroomminut return avgwaitingrmminut setavgexamroomminut float examroomminut this.avgexamrmminutu examroomminut float getavgexamroomminut return avgexamrmminutu setavgvisitsatisfact float visitsatisfact this.avgvisitsatisfact visitsatisfact float getavgvisitsatisfact return avgvisitsatisfact setavgtreatmentsatisfact float treatmentsatisfact this.avgtreatmentsatisfact treatmentsatisfact float getavgtreatmentsatisfact return avgtreatmentsatisfact void setpercentsatisfactionresult float percent percent float getpercentsatisfactionresult return 
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.surveyresultbean loader surveyresultbean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class surveyresultbeanload implement beanload surveyresultbean list surveyresultbean loadlist resultset rs throw sqlexcept arraylist surveyresultbean list arraylist surveyresultbean rs.next loadsingl rs return list preparedstat loadparamet preparedstat ps surveyresultbean bean throw sqlexcept throw illegalstateexcept unimpl surveyresultbean loadsingl resultset rs throw sqlexcept surveyresultbean surveyresult surveyresultbean surveyresult.sethcpmid rs.getlong mid surveyresult.setavgexamroomminut rs.getfloat avgexamroomminut surveyresult.setavgtreatmentsatisfact rs.getfloat avgtreatmentsatisf surveyresult.setavgvisitsatisfact rs.getfloat avgvisitsatisfact surveyresult.setavgwaitingroomminut rs.getfloat avgwaitingroomminut surveyresult.sethcpaddress1 rs.getstr address1 surveyresult.sethcpaddress2 rs.getstr address2 surveyresult.sethcpc rs.getstr citi surveyresult.sethcpst rs.getstr state surveyresult.sethcpzip rs.getstr zip rs.getstr hospitalid surveyresult.sethcpfirstnam rs.getstr firstnam surveyresult.sethcplastnam rs.getstr lastnam surveyresult.sethcpspecialti rs.getstr specialti surveyresult.setpercentsatisfactionresult rs.getfloat percentsatisfactionresult return surveyresult 
packag import java.sql.connect import java.sql.preparedstat import java.sql.sqlexcept import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.loaders.surveyresultbeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept a dao handl survey result dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao class surveyresultdao daofactori factori surveyresultbeanload loader constructor param factori link daofactori associ dao use obtain sql connect etc surveyresultdao daofactori factori factori this.load surveyresultbeanload return survey result databas correspond zip code param zip zipcod string param specialti specialti string return a java.util.list surveyresultbean throw dbexcept list surveyresultbean getsurveyresultsforzip string zip string specialti throw dbexcept connect conn preparedstat ps null stringbuff sql stringbuff sql.append p.mid p.firstnam p.lastnam p.address1 p.address2 p.citi p.state p.zip p.specialti sql.append 'na hospitalid sql.append s.waitingroomminut avgwaitingroomminut sql.append s.examroomminut avgexamroomminut sql.append s.visitsatisfact avgvisitsatisfact sql.append s.treatmentsatisfact avgtreatmentsatisf sql.append count sql.append count personnel p1 officevisit v1 sql.append p1.mid sql.append p1.zip,1,3 sql.append p.mid percentsatisfactionresult sql.append personnel officevisit sql.append v.id sql.append p.mid sql.append p.zip,1,3 specialty.equ surveyresultbean.any_specialti sql.append specialti group p.firstnam p.lastnam p.address1 p.address2 p.citi p.state p.zip hospitalid specialty.equ surveyresultbean.any_specialti sql.append p.specialti sql.append order p.mid tri factory.getconnect ps conn.preparestat sql.tostr ps.setstr zip.substr ps.setstr zip.substr specialty.equ surveyresultbean.any_specialti ps.setstr specialti return ps.executequeri catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return survey data associ given hospit specialti param hospitalid id itrust hospit queri param specialti a string repres specialti return a java.util.list surveyresultbean throw dbexcept list surveyresultbean string hospitalid string specialti throw dbexcept connect conn preparedstat ps null stringbuff sql stringbuff sql.append p.mid p.firstnam p.lastnam p.address1 p.address2 p.citi p.state p.zip p.specialti sql.append hospitalid sql.append s.waitingroomminut avgwaitingroomminut sql.append s.examroomminut avgexamroomminut sql.append s.visitsatisfact avgvisitsatisfact sql.append s.treatmentsatisfact avgtreatmentsatisf sql.append count sql.append count personnel p1 officevisit v1 hcpassignedho h1 sql.append p1.mid sql.append sql.append sql.append p.mid percentsatisfactionresult sql.append personnel officevisit hcpassignedho h sql.append v.id sql.append p.mid sql.append sql.append specialty.equ surveyresultbean.any_specialti sql.append p.specialti group p.firstnam p.lastnam p.address1 p.address2 p.citi p.state p.zip hospitalid specialty.equ surveyresultbean.any_specialti sql.append p.specialti sql.append order p.mid tri factory.getconnect ps conn.preparestat sql.tostr ps.setstr ps.setstr specialty.equ surveyresultbean.any_specialti ps.setstr specialti return ps.executequeri catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.valid import import edu.ncsu.csc.itrust.exception.errorlist import edu.ncsu.csc.itrust.exception.formvalidationexcept valid zip code enter search hcp survey result class surveysearchvalid extend beanvalid surveyresultbean perform act valid question vari depend type valid valid succeed link formvalidationexcept thrown param type valid overrid void valid surveyresultbean bean throw formvalidationexcept errorlist errorlist errorlist errorlist.addifnotnul checkformat zip code bean.gethcpzip validationformat.zipcod errorlist.haserror throw formvalidationexcept errorlist 
packag edu.ncsu.csc.itrust.bean import java.sql.timestamp import edu.ncsu.csc.itrust.enums.transactiontyp store data transact occur itrust bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class transactionbean transactionid secondarymid transactiontyp transactiontyp timestamp timelog string addedinfo string role string getrol return role setrol string role role string getaddedinfo return addedinfo setaddedinfo string addedinfo addedinfo return loggedinmid void setloggedinmid this.loggedinmid loggedinmid return secondarymid void setsecondarymid this.secondarymid secondarymid timestamp gettimelog return timelog void settimelog timestamp timelog this.timelog timelog transactiontyp gettransactiontyp return transactiontyp settransactiontyp transactiontyp tranactiontyp tranactiontyp return transactionid settransactionid transactionid
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import import edu.ncsu.csc.itrust.enums.transactiontyp loader transactionbean load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class transactionbeanload implement beanload transactionbean list transactionbean loadlist resultset rs throw sqlexcept list transactionbean list arraylist transactionbean rs.next loadsingl rs return list preparedstat loadparamet preparedstat ps transactionbean bean throw sqlexcept throw illegalstateexcept unimpl transactionbean loadsingl resultset rs throw sqlexcept transactionbean transactionbean t.setaddedinfo rs.getstr addedinfo t.setloggedinmid loggedinmid t.setsecondarymid secondarymid t.settimelog rs.gettimestamp timelog t.settransactiontyp transactiontype.pars rs.getint transactioncod t.settransactionid return 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.sql.timestamp import java.sql.d import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.beans.operationalprofil import import edu.ncsu.csc.itrust.beans.loaders.operationalprofileload import edu.ncsu.csc.itrust.beans.loaders.transactionbeanload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept use log mechan dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao author andi /public class transactiondao daofactori factori transactionbeanload loader transactionbeanload operationalprofileload operationalprofileload constructor param factori link daofactori associ dao use obtain sql connect etc transactiondao daofactori factori factori return transact log return throw dbexcept list transactionbean getalltransact throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select from transactionlog order by timelog desc resultset rs ps.executequeri return loader.loadlist rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps log transact give person log param type link transactiontyp enum repres transact param loggedinmid mid user log throw dbexcept void logtransact transactiontyp type throw dbexcept logtransact type loggedinmid log transact info mean secondarymid addedinfo chang depend transact type param type link transactiontyp enum repres transact param loggedinmid mid user log param secondarymid typic mid user act param addedinfo note subtransact specif transact poster throw dbexcept void logtransact transactiontyp type string addedinfo throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat insert into transactionlog loggedinmid addedinfo valu loggedinmid ps.setint type.getcod ps.setstr ps.executeupd catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return transact hcp access given patient record param patientid mid question return a transact throw dbexcept list transactionbean getallrecordaccess getbyrol throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn .preparestat select from transactionlog where secondarymid= and transactioncod in + transactiontype.patientviewablestr + order by timelog desc resultset rs ps.executequeri list transactionbean loader.loadlist rs tblist addandsortrol tblist return tblist catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps most thorough fetch param role loggedin param role param begin begin date rang end date rang param type type transact return throw dbexcept list transactionbean gettransactionsfor string loggedinrol string date begin date end transactiontyp type throw dbexcept connect conn preparedstat ps tri factory.getconnect loggedinrole.compareto == loggedinrol secondaryrole.compareto == secondaryrol .preparestat select from transactionlog user where mid=loggedinmid or mid=secondarymid and role= or role= + and transactioncode= and timelog and timelog + order by timelog desc ps.setstr ps.setstr ps.setint type.getcod ps.setdat begin ps.setdat end resultset rs ps.executequeri list transactionbean loader.loadlist rs //tblist addandsortrol tblist return tblist catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return transact hcp access given patient record date param mid question param lower start date java.util.d param end date java.util.d return a transact throw dbexcept list transactionbean getrecordaccess java.util.d java.util.d getbyrol throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn .preparestat select from transactionlog where secondarymid= and transactioncod in + transactiontype.patientviewablestr + + timelog and timelog order by timelog desc patientid ps.settimestamp timestamp lower.gettim add day includ ps.settimestamp timestamp + resultset rs ps.executequeri list transactionbean loader.loadlist rs tblist addandsortrol tblist return tblist catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return oper profil return operationalprofil bean throw dbexcept operationalprofil getoperationalprofil throw dbexcept connect conn preparedstat ps tri factory.getconnect ps conn.preparestat select transactioncod count transactionid totalcount + count patientcount + count personnelcount + from transactionlog group by transactioncod order by transactioncod asc resultset rs ps.executequeri return operationalprofileloader.loadsingl rs catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps param patientid return throw dbexcept list transactionbean addandsortrol list transactionbean tblist sortbyrol throw dbexcept connect conn preparedstat ps tri factory.getconnect transactionbean tblist conn .preparestat select role from user where mid= resultset rs ps.executequeri string role role rs.getstr role role.equ role emerg respond role.equ role uap role.equ role lhcp ps conn select patientid from declaredhcp where hcpid= resultset rs2 ps.executequeri rs2.next patientid == patientid role dlhcp break role.equ role patient ps conn select representeemid from repres where representermid= t.getloggedinmid resultset rs2 ps.executequeri rs2.next representeemid patientid role person health repres break role array transactionbean tblist.siz array tblist.get transactionbean int tblist.siz i++ tblist.get string role t.getrol int j array j role.comparetoignorecas array j .getrol j++ int k k j k k array array j int size tblist.siz int size i++ tblist.set array return tblist catch sqlexcept e e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.enum transact type order use produc profil enum transactiontyp enter_edit_demograph enter/edit patient/personnel demograph declare_hcp view hcp chang design allow_disallow_access allow/disallow access patient diagnosi view_access_log view patient record access log view_record view patient record authenticate_us authent user enter_edit_phr enter/edit person health inform document_office_visit document offic visit create_disable_patient_hcp creat patient hcp manage_diagnosis_cod manag icd9cm diagnosi code request_biosurveil request biosurveil manage_procedure_cod manag cpt procedur code manage_drug_cod manag nd drug code identify_risk_factor identifi risk factor chronic diseas cause_of_death examin cause-of-death trend declare_repres declar person health repres patient_remind patient care maintain_hospit maintain hospit list view_prescription_report view prescript report view_hospital_stat view hospit statist view_comprehensive_record view patient report view_emergency_report view emerg patient report comprehensive_report_request patient report view_lab_procedur view lab procedur enter_edit_lab_procedur enter/edit lab procedur manage_loinc enter/edit loinc code add_patient_survey ad patient survey view_hcp_survey_result view hcp survey result view_patient_list view patient list find_hcps_with_exp find lhcp experi diagnosi view_health_record view patient health record view_office_visit view offic visit add_prescript add prescript update_office_visit updat offic visit send_messag messag view_renewal_needs_pati view renew need patient send_referr refer patient hcp create_disable_ emerg respond telemedicine_monitor monitor create_disable_pha health agent drug_interact drug interact adverse_ev event report login_failur failur update_appt_typ updat appoint type add_appt_typ add appoint type add_appt appoint ad send_remind remind sent s1 s3 s5 s7 s8 s14 s16 s19 s21 s22 string patientviewablestr int transactiontyp int code string descript code this.descript descript code string descript int getcod return code string getdescript return descript transactiontyp pars int code transactiontyp type transactiontype.valu type.cod == code return type throw illegalargumentexcept no transact type exist code code 
packag import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.enums.ethn import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.nohealthrecordsexcept import edu.ncsu.csc.itrust.risk.factors.childhoodinfectionfactor import edu.ncsu.csc.itrust.risk.factors.ethnicityfactor import edu.ncsu.csc.itrust.risk.factors.familyhistoryfactor import edu.ncsu.csc.itrust.risk.factors.patientriskfactor check see given risk type diabet detail see link riskcheck author andi /public class type1diabetesrisk extend riskcheck type1diabetesrisk daofactori factori throw dbexcept nohealthrecordsexcept factori patientid overrid qualifiesfordiseas return patient.getag overrid protect list patientriskfactor getdiseaseriskfactor list patientriskfactor factor arraylist patientriskfactor factors.add ethnicityfactor patient ethnicity.caucasian factors.add familyhistoryfactor factori patient.getmid childhoodinfectionfactor factori patient.getmid return factor overrid string getnam return type diabet 
packag import import import import import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.nohealthrecordsexcept import edu.ncsu.csc.itrust.risk.factors.agefactor import edu.ncsu.csc.itrust.risk.factors.cholesterolfactor import edu.ncsu.csc.itrust.risk.factors.ethnicityfactor import edu.ncsu.csc.itrust.risk.factors.familyhistoryfactor import edu.ncsu.csc.itrust.risk.factors.hypertensionfactor import edu.ncsu.csc.itrust.risk.factors.patientriskfactor import edu.ncsu.csc.itrust.risk.factors.priordiagnosisfactor import edu.ncsu.csc.itrust.risk.factors.weightfactor check see given risk type ii diabet detail see link riskcheck author andi /public class type2diabetesrisk extend riskcheck type2diabetesrisk daofactori factori throw dbexcept nohealthrecordsexcept factori patientid overrid qualifiesfordiseas return patient.getag overrid protect list patientriskfactor getdiseaseriskfactor list patientriskfactor factor arraylist patientriskfactor factors.add agefactor patient ethnicityfactor patient hispan africanamerican americanindian asian factors.add weightfactor currenthealthrecord hypertensionfactor currenthealthrecord factors.add cholesterolfactor currenthealthrecord factors.add priordiagnosisfactor factori patient.getmid familyhistoryfactor factori patient.getmid return factor overrid string getnam return type diabet 
packag edu.ncsu.csc.itrust.act import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.cptcodesdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.procedurebeanvalid updat cpt code medic procedur list use editcptprocedurecodes.jsp cpt code set diagnost servic design inform servic procedur physician coder patient accredit organ payer purpos see author laurenhayward class updatecptcodelistact transactiondao transdao cptcodesdao cptdao procedurebeanvalid valid procedurebeanvalid param factori daofactori use creat dao use action param loggedinmid mid administr updat cpt updatecptcodelistact daofactori factori this.loggedinmid loggedinmid this.transdao factory.gettransactiondao this.cptdao factory.getcptcodesdao add cpt code med param procedurebean hold code return statu messag throw formvalidationexcept string addcptcod procedurebean proc throw formvalidationexcept validator.valid proc tri cptdao.addcptcod proc transdao.logtransact transactiontype.manage_procedure_cod loggedinmid ad cpt code proc.getcptcod return success proc.getcptcod proc.getdescript return databas becom pleas contact system administr assist catch dbexcept e.printstacktrac return e.getmessag catch itrustexcept return e.getmessag updat inform procedurebean param proc procedurebean inform cpt code return statu messag throw formvalidationexcept string updateinform procedurebean proc throw formvalidationexcept validator.valid proc tri int row proc == row return error code found edit code chang descript add code descript transdao.logtransact transactiontype.manage_procedure_cod loggedinmid updat cpt code proc.getcptcod return success row + row catch dbexcept e.printstacktrac return e.getmessag updat code param proc code updat return updat code throw dbexcept int procedurebean proc throw dbexcept return cptdao.updatecod proc 
packag edu.ncsu.csc.itrust.act import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.hospitalsdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.hospitalbeanvalid handl updat list hospit use hospitallisting.jsp author class updatehospitallistact performerid hospitalsdao hospdao transactiondao transdao set param factori daofactori use creat dao use action param performerid mid person updat hospit updatehospitallistact daofactori factori factory.gethospitalsdao this.transdao factory.gettransactiondao this.performerid performerid add use hospitalbean pass param hosp hospit list return statu messag throw formvalidationexcept string hospitalbean hosp throw formvalidationexcept hospitalbeanvalid .valid hosp tri hosp transdao.logtransact transactiontype.maintain_hospit performerid ad hospit hosp.gethospitalnam return success + hosp.gethospitalid + hosp.gethospitalnam + ad return databas becom pleas contact system administr assist catch dbexcept e.printstacktrac return e.getmessag catch itrustexcept return e.getmessag updat hospit base hospit id use inform hospitalbean pass param hosp hospit inform hospit id return statu messag throw formvalidationexcept string updateinform hospitalbean hosp throw formvalidationexcept hospitalbeanvalid .valid hosp tri int row return == row hosp error hospit found success row + row catch dbexcept e.printstacktrac return e.getmessag updat param hosp inform return id updat throw dbexcept int hospitalbean hosp throw dbexcept return hosp 
packag edu.ncsu.csc.itrust.act import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.icdcodesdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.diagnosisbeanvalid handl updat icd code diagnosi list use editicdcodes.jsp intern statist classif diseas relat health problem known abbrevi icd provid code classifi diseas varieti sign symptom find complaint circumst caus diseas see //www.cdc.gov/nchs/icd9.htm author class updateicdcodelistact performerid icdcodesdao icddao transactiondao transdao diagnosisbeanvalid valid diagnosisbeanvalid set param factori daofactori use creat dao use action param performerid mid person udpat icd updateicdcodelistact daofactori factori performerid transdao factory.gettransactiondao icddao factory.geticdcodesdao add icd code diagnosi base diagnosisbean pass param diagn diagnosi icd code return statu messag throw formvalidationexcept string addicdcod diagnosisbean diagn throw formvalidationexcept validator.valid diagn tri icddao.addicdcod diagn transdao.logtransact transactiontype.manage_diagnosis_cod performerid ad icd code diagn.geticdcod return success diagn.geticdcod diagn.getdescript return databas becom pleas contact system administr assist catch dbexcept e.printstacktrac return e.getmessag catch itrustexcept return e.getmessag updat inform diagnosisbean pass param diagn inform code return statu messag throw formvalidationexcept string updateinform diagnosisbean diagn throw formvalidationexcept validator.valid diagn tri int row diagn == row return error code found transdao.logtransact transactiontype.manage_diagnosis_cod performerid updat icd code diagn.geticdcod return success row + row catch dbexcept e.printstacktrac return e.getmessag 
packag edu.ncsu.csc.itrust.act import java.util.list import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.loincdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.loincbeanvalid handl updat loinc use logic observ identifi name code loinc databas standard identifi laboratori observ see //loinc.org/ /public class updateloinclistact performerid loincdao ldao transactiondao transdao loincbeanvalid valid loincbeanvalid set default factori daofactori use creat dao use action param performerid mid person updat loinc updateloinclistact daofactori factori performerid transdao factory.gettransactiondao ldao factory.getloincdao add loinc param diagn new loinc return statu messag throw formvalidationexcept string add loincbean diagn throw formvalidationexcept itrustexcept diagn loincbean lblist ldao.getallloinc correctid int lblist.siz i++ lblist.get .equal diagn.getlabprocedurecod correctid lblist.siz throw formvalidationexcept error code exist transdao.logtransact transactiontype.manage_loinc performerid ad loinc code diagn.getlabprocedurecod return success diagn.getlabprocedurecod updat loinc param diagn inform code return statu messag throw formvalidationexcept string updateinform loincbean diagn throw formvalidationexcept validator.valid diagn tri int row ldao.upd == row return error code found transdao.logtransact transactiontype.manage_loinc performerid loinc code diagn.getlabprocedurecod return success diagn.getlabprocedurecod catch dbexcept e.printstacktrac return e.getmessag 
packag edu.ncsu.csc.itrust.act import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.ndcodesdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.medicationbeanvalid handl updat nd code prescript list use editndcodes.jsp nation drug code ndc product identifi use unit state drug intend use see //www.fda.gov/drugs/informationondrugs/ucm142438.htm author class updatendcodelistact performerid transactiondao transdao ndcodesdao nddao medicationbeanvalid valid medicationbeanvalid set default factori daofactori use creat dao use action param performerid mid user updat nd list updatendcodelistact daofactori factori performerid nddao factory.getndcodesdao transdao factory.gettransactiondao add nd code prescript list param med nd code ad return statu messag throw formvalidationexcept string addndcod medicationbean med throw formvalidationexcept validator.valid med tri nddao.addndcod med transdao.logtransact transactiontype.manage_drug_cod performerid ad nd code med.getndcod return success med.getndcod med.getdescript return databas becom pleas contact system administr assist catch dbexcept e.printstacktrac return e.getmessag catch itrustexcept return e.getmessag updat nd code inform medicationbean param med medicationbean hold inform code return statu messag throw formvalidationexcept string updateinform medicationbean med throw formvalidationexcept validator.valid med tri int row updatecod med == row return error code found transdao.logtransact transactiontype.manage_drug_cod performerid nd code med.getndcod return success row + row catch dbexcept e.printstacktrac return e.getmessag medic inform valid param med return throw dbexcept int medicationbean med throw dbexcept return nddao.updatecod med 
packag edu.ncsu.csc.itrust.valid import enum valid format fit author andi /public enum validationformat name letter space date \\d \\d mm/dd/yyyy phone_numb \\d mid \\d between digit role admin hcp test email + \\. + a-za-z0-9- + \\. a-za-z0-9- + \\ a-za-z charact symbol question charact symbol answer charact address charact appt_com between alphanumer space punctuat appt_type_nam between alpha charact space appt_type_dur between number citi charact state a-z capit letter zipcod bloodtyp o | a | b | ab +- must o a b ab +/- o|a|b|ab gender male | femal femal ^ male|femal note charact space punctuat messages_bodi _\n\t charact space punctuat messages_subject charact space punctuat password charact insurance_id letter space hospital_id \\d between digit hospital_nam 0-9a-za-z between alphanumer space nd_code_descript charact letter number space drug_int_com charact .- email charact .- charact .- icd_code_descript charact letter number space cpt_code_descript charact letter number space allergy_descript charact letter number space icd9cm \\d | \\d \\ \\d cpt \\d a-za-z0-9 digit integ letter digit height \\d \\ \\d number place weight \\d \\ \\d number place year \\d must digit gendercod male | femal | specifi male femal all patient nd \\d up digit integ loinc \\d \\d must format loinc_item charact letter number space comment charact lab_statu not yet receiv | pend | complet not yet receiv pend complet lab_right allow | restrict allow restrict systolic_blood_pressur |240 must diastolic_blood_pressur |150 must glucose_level |250 must pattern regex string descript validationformat string regex string errormessag this.regex pattern.compil regex this.descript errormessag pattern getregex return regex string getdescript return descript 
packag edu.ncsu.csc.itrust.act import java.sql.sqlexcept import java.util.list import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.adverseeventdao edu.ncsu.csc.itrust.exception.dbexcept class viewadverseeventact adverseeventdao adeventdao viewadverseeventact daofactori factori factory.getadverseeventdao adverseeventbean getadverseev int id throw dbexcept return adeventdao.getreport id list adverseeventbean getunremovedadverseeventsbycod string code throw dbexcept return adeventdao.getunremovedadverseeventsbycod code string getnameforcod string code throw dbexcept return adeventdao.getnameforcod code 
packag edu.ncsu.csc.itrust.act import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.emailutil edu.ncsu.csc.itrust.beans.email import import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.itrustexcept handl retriev bean author class viewexpiredprescriptionsact patientdao patientdao personneldao personneldao transactiondao transdao emailutil email set default factori daofactori use creat dao use action param loggedinmid mid person view prescript viewexpiredprescriptionsact daofactori factori this.email emailutil factori this.patientdao factory.getpatientdao this.personneldao factory.getpersonneldao this.transdao factory.gettransactiondao this.loggedinmid loggedinmid get mid param patientid mid return patientbean mid given throw itrustexcept patientbean getpati throw itrustexcept return patientdao.getpati patientid get person represente return patientbean hold represente throw itrustexcept list patientbean getrepresente throw itrustexcept return patientdao.getrepres loggedinmid return prescrib hcp prescript param prescript item question return hcp prescrib prescript throw itrustexcept personnelbean getprescribingdoctor prescriptionbean prescript throw itrustexcept return personneldao.getprescribingdoctor prescript return prescript given param patientid question return list prescript throw itrustexcept list prescriptionbean getprescriptionsforpati throw itrustexcept patient patientdao.getpati patientid loggedinmid == patientid transdao.logtransact transactiontype.view_prescription_report loggedinmid patientdao.getexpiredprescript patientid list string arraylist string tolist.add patient.getemail list patientbean repres patientdao.getrepres patientbean repres repres == representative.getmid transdao.logtransact transactiontype.view_prescription_report loggedinmid patientdao.getexpiredprescript patientid tolist.add list personnelbean dlhcp patientdao.getdeclaredhcp personnelbean dlhcp dlhcp == dlhcp.getmid transdao.logtransact transactiontype.view_prescription_report loggedinmid patientdao.getexpiredprescript patientid list personnelbean personneldao.getuapsforhcp dlhcp.getmid personnelbean uap uap == uap.getmid transdao.logtransact transactiontype.view_prescription_report loggedinmid patientdao.getprescript patientid email email email email.settolist tolist itrust.com email.setsubject personnel have access prescript record email.setbodi hcp uap access prescript record inform pleas log itrust email transdao.logtransact transactiontype.view_prescription_report loggedinmid patientdao.getprescript patientid 
packag edu.ncsu.csc.itrust.act import java.text.parseexcept import java.text.simpledateformat import java.util.d import java.util.list import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept handl retriev log record access given user use viewaccesslog.jsp author class viewmyaccesslogact transactiondao transdao set param factori daofactori use creat dao use action param loggedinmid mid person retriev log viewmyaccesslogact daofactori factori this.loggedinmid loggedinmid this.transdao factory.gettransactiondao return transactionbean date pass param lowerd date param date return list transactionbean throw dbexcept throw formvalidationexcept list transactionbean getaccess string string getbyrol throw dbexcept formvalidationexcept list transactionbean access == null || == return transdao.getallrecordaccess string messag tri date simpledateformat mm/dd/yyyy .pars lowerd date simpledateformat mm/dd/yyyy .pars lower.aft throw formvalidationexcept start date end date messag date lowerd + transdao.logtransact transactiontype.view_access_log loggedinmid messag access transdao.getrecordaccess getbyrol catch parseexcept e throw formvalidationexcept enter date mm/dd/yyyy return access return date transact list pass list return today date param access java.util.list transactionbean access return string repres date transact public string getdefaultstart list transactionbean access string startdat accesses.s startdat simpledateformat mm/dd/yyyy .format date accesses.get accesses.s .gettimelog .gettim startdat simpledateformat mm/dd/yyyy .format date return startdat return date transact list pass list return today date param access java.util.list transactionbean store access return a string represent date transact public string list transactionbean access string enddat accesses.s enddat simpledateformat mm/dd/yyyy .format date accesses.get .gettimelog .gettim enddat simpledateformat mm/dd/yyyy .format date return 
packag edu.ncsu.csc.itrust.act import java.sql.sqlexcept import java.util.list import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.apptdao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.personneldao edu.ncsu.csc.itrust.exception.itrustexcept class viewmyapptsact apptdao apptdao patientdao patientdao personneldao personneldao viewmyapptsact daofactori factori this.loggedinmid loggedinmid this.apptdao factory.getapptdao this.patientdao factory.getpatientdao this.personneldao factory.getpersonneldao list apptbean getmyappoint throw sqlexcept return apptdao.getapptsfor loggedinmid get user name mid param mid mid user return user name throw itrustexcept string getnam throw itrustexcept return patientdao.getnam mid return personneldao.getnam mid get all appoint admin use need chang return throw sqlexcept list apptbean getallappt throw sqlexcept return apptdao.getallappt 
packag edu.ncsu.csc.itrust.act import java.sql.sqlexcept import java.text.dateformat import java.text.parseexcept import java.text.simpledateformat import java.util.arraylist import java.util.calendar import java.util.d import java.util.list import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.messagedao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.personneldao edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept action class viewmymessages.jsp /public class viewmymessagesact patientdao patientdao personneldao personneldao messagedao messagedao set default factori daofactori use creat dao use action param loggedinmid mid user view messag viewmymessagesact daofactori factori this.loggedinmid loggedinmid this.patientdao factory.getpatientdao this.personneldao factory.getpersonneldao this.messagedao factory.getmessagedao get messag log return list user messag throw sqlexcept list messagebean getallmymessag throw sqlexcept return messagedao.getmessagesfor loggedinmid get messag log sort ascend time list user messag throw sqlexcept list messagebean getallmymessagestimeascend throw sqlexcept return messagedao.getmessagestimeascend loggedinmid get messag log sort ascend order return list user messag throw sqlexcept list messagebean getallmymessagesnameascend throw sqlexcept return messagedao.getmessagesnameascend loggedinmid get messag log sort name descend order return list user messag throw sqlexcept list messagebean getallmymessagesnamedescend throw sqlexcept return messagedao.getmessagesnamedescend loggedinmid get sent messag log list user sent messag throw sqlexcept list messagebean getallmysentmessag throw sqlexcept return messagedao.getmessagesfrom loggedinmid get messag log sort ascend time list user messag throw sqlexcept list messagebean getallmysentmessagestimeascend throw sqlexcept return messagedao.getmessagesfromtimeascend loggedinmid get messag log sort ascend order return list user messag throw sqlexcept list messagebean getallmysentmessagesnameascend throw sqlexcept return messagedao.getmessagesfromnameascend loggedinmid get messag log sort name descend order return list user messag throw sqlexcept list messagebean getallmysentmessagesnamedescend throw sqlexcept return messagedao.getmessagesfromnamedescend string validateandcreatefilt string filter string f filter.split dateformat format simpledateformat mm/dd/yyyy date null date en tri .equal format.pars f .equal format.pars f =null =null return error end date start date catch except return error a date format enter date mm/dd/yyyy int f.length i++ =f .replac f =f .replac f =f .replac string f + +f + +f + +f + +f + +f return nf get messag user base filter criteria param messag list user messagebean param filter string contain user filter criteria return messagebean meet criteria throw itrustexcept throw parseexcept list messagebean filtermessag list messagebean messag string filter throw itrustexcept parseexcept list messagebean filter arraylist messagebean string f filter.split messagebean messag check sender field exclud messagebean match request specifi f .equal this.getnam .equalsignorecas f continu check filter field exclud messagebean match request specifi f .equal .equalsignorecas f continu check bodi messag word exclud messagebean contain word messag bodi .equal .tolowercas .contain .tolowercas m.getbodi .tolowercas .contain .tolowercas continu check bodi messag word exclud messagebean contain word messag bodi .equal .tolowercas .contain .tolowercas || m.getbodi .tolowercas .contain .tolowercas continu check start date filter field exclud messagebean sent date f .equal dateformat format simpledateformat mm/dd/yyyy date format.pars s.after m.getsentd continu check end date filter field exclud messagebean sent date f .equal dateformat format simpledateformat mm/dd/yyyy date format.pars calendar c calendar.getinst c.settim c.add calendar.day_of_month c.gettim s.befor m.getsentd continu messag elimin field add list messag filtered.add return filter get patient name mid param mid mid return patient name throw itrustexcept string getnam throw itrustexcept return patientdao.getnam mid return personneldao.getnam mid get personnel name mid param mid mid personnel return personnel name throw itrustexcept string getpersonnelnam throw itrustexcept return personneldao.getnam mid set state messagebean read read messagebean read messagebean mbean tri mbean catch dbexcept e todo auto-gener catch block e.printstacktrac 
packag edu.ncsu.csc.itrust.act import java.util.arraylist import java.util.list import import import edu.ncsu.csc.itrust.beans.email import import edu.ncsu.csc.itrust.beans.healthrecord import import import import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.allergydao import edu.ncsu.csc.itrust.dao.mysql.fakeemaildao import edu.ncsu.csc.itrust.dao.mysql.familydao import edu.ncsu.csc.itrust.dao.mysql.healthrecordsdao import edu.ncsu.csc.itrust.dao.mysql.labproceduredao import edu.ncsu.csc.itrust.dao.mysql.officevisitdao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.reportrequestdao import edu.ncsu.csc.itrust.dao.mysql.surveydao import edu.ncsu.csc.itrust.dao.mysql.icdcodesdao edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept handl patient view record use viewmyrecords.jsp author class viewmyrecordsact patientdao patientdao personneldao personneldao allergydao allergydao familydao familydao healthrecordsdao hrdao officevisitdao ovdao surveydao surveydao labproceduredao labdao fakeemaildao emaildao icdcodesdao icddao reportrequestdao reportrequestdao set param factori daofactori use creat dao use action param loggedinmid mid person view record viewmyrecordsact daofactori factori factory.getpatientdao this.personneldao factory.getpersonneldao this.allergydao factory.getallergydao this.familydao factory.getfamilydao this.hrdao factory.gethealthrecordsdao this.ovdao factory.getofficevisitdao this.surveydao factory.getsurveydao this.labdao factory.getlabproceduredao this.emaildao factory.getfakeemaildao this.reportrequestdao factory.getreportrequestdao this.icddao factory.geticdcodesdao this.loggedinmid loggedinmid take patient represente param return repres param input patient represente return represente mid throw itrustexcept string input throw itrustexcept tri reppeemid long.valueof input patientdao.repres loggedinmid reppeemid return reppeemid throw itrustexcept repres reppeemid catch numberformatexcept e throw itrustexcept mid number return patientbean log return patientbean log throw itrustexcept patientbean getpati throw itrustexcept return patientdao.getpati loggedinmid return patientbean specifi mid param mid id request return patientbean specifi mid throw itrustexcept patientbean getpati throw itrustexcept return patientdao.getpati mid return personnelbean request mid param mid id request return personnelbean request mid throw itrustexcept personnelbean getpersonnel throw itrustexcept return personneldao.getpersonnel mid return patientbean log return patientbean log throw itrustexcept list email getemailhistori throw itrustexcept return getpati .getemail return list allergybean log return list allergybean log throw itrustexcept list allergybean getallergi throw itrustexcept return allergydao.getallergi loggedinmid return list parent sibl children log return list familymemberbean list familymemberbean throw itrustexcept familymemberbean fam arraylist familymemberbean list familymemberbean parent tri parent familydao.getpar loggedinmid parent familydao.gets loggedinmid familydao.getchildren loggedinmid catch dbexcept e throw itrustexcept e.getmessag parent familymemberbean grandpar arraylist familymemberbean familymemberbean parent parent tri familydao.getpar parent.getmid catch dbexcept throw itrustexcept e.getmessag grandpar gp grandpar gp.setrel grandpar return return list parent sibl grand parent log return list familymemberbean list familymemberbean getfamilyhistori throw itrustexcept familymemberbean fam arraylist familymemberbean list familymemberbean parent tri parent familydao.getpar loggedinmid parent familydao.gets loggedinmid catch dbexcept e throw itrustexcept e.getmessag parent familymemberbean grandpar arraylist familymemberbean familymemberbean parent parent tri familydao.getpar parent.getmid catch dbexcept throw itrustexcept e.getmessag grandpar gp grandpar gp.setrel grandpar return return list healthrecord log return list healthrecord log throw itrustexcept list healthrecord getallhealthrecord throw itrustexcept return hrdao.getallhealthrecord loggedinmid return list healthrecord specifi famili member return list healthrecord specifi famili member throw itrustexcept list healthrecord getfamilyhealthrecord throw itrustexcept return hrdao.getallhealthrecord mid return list officevisitbean offic visit log return list officevisitbean offic visit log patient throw list officevisitbean getallofficevisit throw itrustexcept return ovdao.getallofficevisit loggedinmid return officevisitbean given return officevisitbean given visitid throw itrustexcept officevisitbean getcompleteofficevisit throw itrustexcept return ovdao.getofficevisit visitid return list patientbean patient log repres list patientbean patient log patient repres throw itrustexcept list patientbean getrepres throw itrustexcept return patientdao.getrepres loggedinmid return list patientbean patient log repres list patientbean patient log patient repres throw itrustexcept list patientbean getrepres throw itrustexcept return patientdao.getrepres loggedinmid ha survey creat offic visit param visitid id offic visit question return survey complet throw itrustexcept boolean issurveycomplet throw itrustexcept return surveydao.issurveycomplet visitid return list lab procedur return lab procedur log throw dbexcept list labprocedurebean getlab throw itrustexcept return labdao.getlabproceduresforpati loggedinmid return report request log return report request log throw itrustexcept list reportrequestbean getreportrequest throw itrustexcept return reportrequestdao.getallreportrequestsforpati loggedinmid check see famili member blood pressur param member famili member question return famili member risk factor throw itrustexcept boolean familymemberbean member throw itrustexcept list healthrecord record hrdao.getallhealthrecord member.getmid records.s return healthrecord record record || return return check see famili member cholesterol member famili member question return famili member risk factor throw itrustexcept boolean doesfamilymemberhavehighcholesterol familymemberbean member throw itrustexcept list healthrecord record hrdao.getallhealthrecord member.getmid records.s return healthrecord record record record.getcholesterolhdl || record.getcholesterolldl return return check see famili member diabet member famili member question return famili member risk factor throw itrustexcept boolean doesfamilymemberhavediabet member throw itrustexcept diagnosisbean diagnos patientdao.getdiagnos diagnoses.s return diagnosisbean diag diagnos diag.geticdcod .startswith return return check see famili member cancer param member famili member question return famili member risk factor throw itrustexcept doesfamilymemberhavecanc familymemberbean member throw itrustexcept diagnosisbean diagnos patientdao.getdiagnos diagnoses.s return diagnosisbean diag diagnos diag.geticdcod .startswith return return check see famili member heart diseas member famili member question return famili member risk factor throw itrustexcept doesfamilymemberhaveheartdiseas familymemberbean member throw itrustexcept diagnosisbean diagnos patientdao.getdiagnos diagnoses.s return diagnosisbean diag diagnos diag.geticdcod .startswith return return check see famili member smoke member famili member question return famili member risk factor throw itrustexcept boolean isfamilymembersmok familymemberbean member throw itrustexcept list healthrecord record hrdao.getallhealthrecord member.getmid records.s return healthrecord record record record.issmok return return check see famili member caus death param member famili member question return caus death famili member throw itrustexcept string getfamilymembercod familymemberbean member throw itrustexcept patient patientdao.getpati member.getmid patient.getcauseofdeath == return diagnosisbean diag icddao.geticdcod patient.getcauseofdeath diag == return return diag.getdescript 
packag edu.ncsu.csc.itrust.act import java.text.parseexcept import java.text.simpledateformat import java.util.d import java.util.list import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.authdao import edu.ncsu.csc.itrust.dao.mysql.remotemonitoringdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept handl retriev data hcp use class viewmyremotemonitoringlistact remotemonitoringdao rmdao transactiondao transdao authdao authdao constructor param factori daofactori use creat dao use action param loggedinmid mid hcp retriev data viewmyremotemonitoringlistact daofactori factori this.loggedinmid loggedinmid this.rmdao factory.getremotemonitoringdao this.transdao factory.gettransactiondao this.authdao factory.getauthdao return list remotemonitoringdatabean log hcp return list transactionbean throw dbexcept throw formvalidationexcept list remotemonitoringdatabean getpatientsdata throw dbexcept transdao.logtransact transactiontype.telemedicine_monitor loggedinmid return rmdao.getpatientsdata loggedinmid return list remotemonitoringdatabean log hcp return list transactionbean throw dbexcept throw formvalidationexcept list remotemonitoringdatabean getpatientdatabyd string startdat string enddat throw dbexcept formvalidationexcept date date tri simpledateformat mm/dd/yyyy .pars startdat simpledateformat mm/dd/yyyy .pars enddat lower.aft throw formvalidationexcept start date end date catch parseexcept throw formvalidationexcept enter date mm/dd/yyyy transdao.logtransact transactiontype.telemedicine_monitor loggedinmid return rmdao.getpatientdatabyd patientmid list remotemonitoringdatabean getpatientdatawithoutlog throw dbexcept return rmdao.getpatientsdata loggedinmid return name return name throw dbexcept throw itrustexcept string getpatientnam throw dbexcept itrustexcept return authdao.getusernam 
packag edu.ncsu.csc.itrust.act import java.util.calendar import java.util.list import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.reportrequestdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.itrustexcept action class viewmyreports.jsp allow user see report class viewmyreportrequestsact reportrequestdao reportrequestdao personneldao personneldao transactiondao transdao //privat daofactori factori set param factori daofactori use creat dao use action param loggedinmid mid person view report request viewmyreportrequestsact daofactori factori this.loggedinmid loggedinmid this.reportrequestdao factory.getreportrequestdao this.personneldao factory.getpersonneldao this.transdao factori return report log hcp return list report log hcp throw itrustexcept list reportrequestbean getallreportrequestsforrequest throw itrustexcept return reportrequestdao.getallreportrequestsforrequest loggedinmid return list reports// return list reports// throw /// list reportrequestbean getallreportrequest throw itrustexcept return reportrequestdao.getallreportrequest add report request list param patientmid id report return throw throw itrustexcept id reportrequestdao .addreportrequest loggedinmid patientmid calendar.getinst .gettim transdao.logtransact transactiontype.comprehensive_report_request loggedinmid patientmid ad report request return id approv request list e-mail sent param id id request// throw /// void id throw itrustexcept rr id reportrequestdao.approvereportrequest id loggedinmid calendar.getinst .gettim transdao.logtransact transactiontype.comprehensive_report_request loggedinmid rr.getpatientmid approv report request emailutil factori .sendemail makeemailapp loggedinmid rr.getrequestermid rr.getpatientmid //// send regard approv param adminid admin approv param hcpid hcp request for// param id patient report about// e-mail// throw dbexception// /// email makeemailapp throw dbexcept patientbean patientdao factori .getpati pid //// email email email email.setfrom itrust.com arrays.aslist p.getemail email.setsubject a report gener email// .setbodi string// .format dear \n itrust health care provid submit view record administr approv view report notifi hcp choos view hcpid return email reject list.// param id id reject comment request rejected// throw /// void rejectreportrequest id string comment throw itrustexcept reportrequestdao.rejectreportrequest id calendar.getinst .gettim comment transdao.logtransact transactiontype.comprehensive_report_request loggedinmid reject report request return request report param id id request report return request report throw reportrequestbean int id throw itrustexcept return id set view statu report report view hcp request see param id id report throw void setview id throw itrustexcept rr id reportrequestdao.setview id calendar.getinst .gettim transdao.logtransact transactiontype.comprehensive_report_request loggedinmid view report emailutil factori .sendemail makeemailview rr.getapprovermid rr.getrequestermid rr .getpatientmid send regard request patient.// param admin approv param hcpid hcp request for// param id patient report about// e-mail// throw dbexception// /// email makeemailview throw dbexcept patientbean patientdao factori .getpati pid //// email email email email.setfrom itrust.com arrays.aslist p.getemail email.setsubject a report gener email// .setbodi string// .format dear \n itrust health care provid chosen view report approv administr report viewabl time hcpid return email get statu request param id id request return request statu throw itrustexcept string getlongstatu throw itrustexcept stringbuild stringbuild reportrequestbean r reportrequestdao.getreportrequest id r.getstatu .equal reportrequestbean.request personneldao.getpersonnel r.getrequestermid s.append string.format request request r.getrequesteddatestr .getfullnam r.getstatu .equal reportrequestbean.approv personneldao.getpersonnel r.getrequestermid personnelbean p2 personneldao.getpersonnel r.getapprovermid s.append string.format request request r.getrequesteddatestr p// string.format approv r.getapproveddatestr p2.getfullnam r.getstatu .equal reportrequestbean.reject personneldao.getpersonnel r.getrequestermid personnelbean p2 personneldao.getpersonnel r.getapprovermid s.append string.format request request r.getrequesteddatestr p// string.format reject r.getapproveddatestr p2.getfullnam r.getstatu .equal reportrequestbean.view personneldao.getpersonnel r.getrequestermid personnelbean p2 personneldao.getpersonnel r.getapprovermid string fullnam unknown null p.getfullnam s.append string.format request request r.getrequesteddatestr .getfullnam s.append string.format approv r.getapproveddatestr s.append remov br caus unit test fail seem s.append string.format view r.getvieweddatestr fullnam return s.tostr 
packag edu.ncsu.csc.itrust.act import java.util.list import edu.ncsu.csc.itrust.action.base.officevisitbaseact import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.officevisitdao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.personneldao edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.messag handl view offic visit prescript hcp name given ovid use author class viewofficevisitact extend officevisitbaseact officevisitdao ovdao personneldao personneldao patientdao patientdao super class handl valid ovidstr param factori daofactori use creat dao use action param loggedinmid mid person view offic visit param ovidstr identifi offic visit string throw itrustexcept viewofficevisitact daofactori factori string ovidstr throw itrustexcept factori string.valueof loggedinmid ovidstr factory.getpersonneldao this.ovdao factory.getofficevisitdao super class handl valid pidstr ovidstr use repres param factori daofactori use creat dao use action param reppidstr mid repres view record param ovidstr identifi offic visit string throw itrustexcept viewofficevisitact daofactori factori string reppidstr string ovidstr throw itrustexcept factori reppidstr ovidstr factory.getpersonneldao this.patientdao factory.getpatientdao this.ovdao factory.getofficevisitdao checkrepres reppidstr void checkrepres string reppidstr throw itrustexcept tri repe long.valueof reppidstr patientdao.repres throw itrustexcept messages.getstr viewofficevisitaction.0 non-nls-1 catch numberformatexcept e throw itrustexcept messages.getstr viewofficevisitaction.1 non-nls-1 return offic visit officevisitbean ovid pass constructor return officevisitbean ovid throw itrustexcept officevisitbean getofficevisit throw itrustexcept return ovdao.getofficevisit return prescript associ pass constructor return list prescriptionbean throw dbexcept list prescriptionbean getprescript throw dbexcept return ovdao.getprescript ovid return name hcp hcpid pass param hcpid return name hcp throw itrustexcept string gethcpnam throw itrustexcept string name tri name personneldao.getnam hcpid catch itrustexcept e.printstacktrac name e.getmessag return name 
packag edu.ncsu.csc.itrust.act import java.util.arraylist import java.util.iter import java.util.list import java.util.scann import import import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.officevisitdao import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept action class viewpatientofficevisithistory.jsp /public class viewpatientofficevisithistoryact patientdao patientdao transactiondao transdao personneldao personneldao officevisitdao officevisitdao arraylist patientvisitbean visit set default factori daofactori use creat dao use action param loggedinmid mid person view offic visit viewpatientofficevisithistoryact daofactori factori this.loggedinmid loggedinmid this.personneldao factory.getpersonneldao this.transdao factory.gettransactiondao officevisitdao factory.getofficevisitdao this.patientdao factory.getpatientdao visit arraylist patientvisitbean add offic visit log hcp list throw itrustexcept void processofficevisit throw itrustexcept tri officevisitbean ovlist officevisitdao.getallofficevisitsforlhcp loggedinmid iter officevisitbean ovlist.iter officevisitbean patientvisitbean visitbean patientvisitbean ov patientbean pb pb patientdao.getpati visitbean.setpati pb visitbean.setpatientnam pb.getfullnam string date ov.getvisitdatestr scanner sc scanner date sc.usedelimit string month string day sc.next string year month day year visitbean.setlastovd year + month + + date visitbean.setaddress1 pb.getstreetaddress1 + + pb.getstreetaddress2 visitbean.setaddress2 pb.getciti + + patientinlist pb date == visits.add visitbean catch dbexcept throw itrustexcept dbe.getmessag check see list visit param patient check param date date visit return true list visit patientinlist patientbean pb string date iter patientvisitbean visits.iter patientvisitbean visitbean it.hasnext it.next visitbean.getpatientnam .equal pb.getfullnam .compareto date visitbean.setlastovd date return return get patient hcp offic visit return patient hcp offic visit throw dbexcept list patientvisitbean getpati throw dbexcept tri processofficevisit catch itrustexcept ie //log transact transdao.logtransact transactiontype.view_patient_list loggedinmid return visit return personnelbean log hcp return personnelbean log hcp throw itrustexcept personnelbean getpersonnel throw itrustexcept return personneldao.getpersonnel loggedinmid 
packag edu.ncsu.csc.itrust.act import java.util.list import edu.ncsu.csc.itrust.beans.email import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.fakeemaildao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.messag handl retriev personnel bean given personnel use author class viewpersonnelact personneldao personneldao transactiondao transdao fakeemaildao emaildao set default factori daofactori use creat dao use action param loggedinmid mid person retriev personnel bean viewpersonnelact daofactori factori factory.getfakeemaildao this.personneldao factory.getpersonneldao this.transdao factory.gettransactiondao this.loggedinmid loggedinmid retriev personnelbean mid pass param input personnelbean return personnelbean throw itrustexcept personnelbean getpersonnel string input throw itrustexcept tri mid long.valueof input personnelbean personnel personneldao.getpersonnel mid personnel transdao.logtransact transactiontype.enter_edit_demograph loggedinmid mid messages.getstr viewpersonnelaction.0 + mid non-nls-1 return personnel throw itrustexcept messages.getstr viewpersonnelaction.1 non-nls-1 catch numberformatexcept e e.printstacktrac throw itrustexcept messages.getstr viewpersonnelaction.2 non-nls-1 return patientbean log personnel return patientbean throw itrustexcept list email getemailhistori throw itrustexcept return personneldao.getpersonnel 
packag edu.ncsu.csc.itrust.act import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.emailutil edu.ncsu.csc.itrust.beans.email import import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.messag handl retriev bean author class viewprescriptionrecordsact patientdao patientdao personneldao personneldao transactiondao transdao emailutil email set default factori daofactori use creat dao use action param loggedinmid mid person view prescript record viewprescriptionrecordsact daofactori factori this.email emailutil factori this.patientdao factory.getpatientdao this.personneldao factory.getpersonneldao this.transdao factory.gettransactiondao this.loggedinmid loggedinmid get mid param patientid mid return patientbean mid given throw itrustexcept patientbean getpati throw itrustexcept return patientdao.getpati patientid get person represente return patientbean hold represente throw itrustexcept list patientbean getrepresente throw itrustexcept return patientdao.getrepres loggedinmid return prescrib hcp prescript param prescript item question return hcp prescrib prescript throw itrustexcept personnelbean getprescribingdoctor prescriptionbean prescript throw itrustexcept return personneldao.getprescribingdoctor prescript return prescript given param patientid question return list prescript throw itrustexcept list prescriptionbean getprescriptionsforpati throw itrustexcept patient patientdao.getpati patientid loggedinmid == patientid transdao.logtransact transactiontype.view_prescription_report loggedinmid patientdao.getprescript patientid list string arraylist string tolist.add patient.getemail list patientbean repres patientdao.getrepres patientbean repres repres == representative.getmid transdao.logtransact transactiontype.view_prescription_report loggedinmid patientdao.getprescript patientid tolist.add list personnelbean dlhcp patientdao.getdeclaredhcp personnelbean dlhcp dlhcp == dlhcp.getmid transdao.logtransact transactiontype.view_prescription_report loggedinmid patientdao.getprescript patientid list personnelbean personneldao.getuapsforhcp dlhcp.getmid personnelbean uap uap == uap.getmid transdao.logtransact transactiontype.view_prescription_report loggedinmid patientdao.getprescript patientid email email email email.settolist tolist itrust.com email.setsubject messages.getstr viewprescriptionrecordsaction.1 non-nls-1 email.setbodi messages.getstr viewprescriptionrecordsaction.2 non-nls-1 emailer.sendemail email transdao.logtransact transactiontype.view_prescription_report loggedinmid patientdao.getprescript patientid 
packag edu.ncsu.csc.itrust.act import java.util.list import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.messag action return patient hcp dhcp medic go expir day class viewprescriptionrenewalneedsact patientdao patientdao transactiondao transdao set default factori daofactori use creat dao use action param loggedinmid mid person view prescript renew viewprescriptionrenewalneedsact daofactori factori factory.getpatientdao this.transdao factory.gettransactiondao this.loggedinmid loggedinmid use patientdao class return list patient hcp dhcp medic go expir day return list patientbean' list patientbean getrenewalneedspati tri transdao.logtransact transactiontype.view_renewal_needs_pati loggedinmid loggedinmid + messages.getstr viewprescriptionrenewalneedsaction.0 non-nls-1 return patientdao.getrenewalneedspati loggedinmid catch dbexcept system.out.println messages.getstr viewprescriptionrenewalneedsaction.1 non-nls-1 system.out.println e return 
packag edu.ncsu.csc.itrust.act import java.util.list import import import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.exception.itrustexcept action class viewreport.jsp /public class viewreportact patientdao patientdao personneldao personneldao set default factori daofactori use creat dao use action param loggedinmid mid person view report viewreportact daofactori factori factory.getpatientdao personneldao factory.getpersonneldao get list given param interest return list diagnos throw itrustexcept list diagnosisbean getdiagnos throw itrustexcept return patientdao.getdiagnos get list given param interest return list procedur throw itrustexcept list procedurebean getprocedur throw itrustexcept return patientdao.getprocedur pid get list given param interest return list prescript throw itrustexcept list prescriptionbean getprescript throw itrustexcept return patientdao.getcurrentprescript pid get declar hcp list given param interest return list declar hcp throw itrustexcept list personnelbean getdeclaredhcp throw itrustexcept return patientdao.getdeclaredhcp return personnelbean given mid param mid hcp interest return personnelbean given hcp throw itrustexcept personnelbean getpersonnel throw itrustexcept return personneldao.getpersonnel mid 
packag edu.ncsu.csc.itrust.act import java.util.list import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.surveyresultdao import edu.ncsu.csc.itrust.dao.mysql.transactiondao import edu.ncsu.csc.itrust.enums.transactiontyp import edu.ncsu.csc.itrust.exception.formvalidationexcept import edu.ncsu.csc.itrust.exception.itrustexcept import edu.ncsu.csc.itrust.validate.surveysearchvalid class use retriev survey result databas log transact class viewsurveyresultact surveyresultdao surveyresultdao transactiondao transdao surveysearchvalid valid set default factori daofactori use creat dao use action param loggedinmid mid person retriev survey result viewsurveyresultact daofactori factori factory.gettransactiondao surveyresultdao factory.getsurveyresultdao this.loggedinmid loggedinmid valid surveysearchvalid retriev survey result param bean surveyresultbean contain survey result return a java.util.list survey result throw itrustexcept throw formvalidationexcept list surveyresultbean surveyresultbean bean throw itrustexcept formvalidationexcept transdao.logtransact transactiontype.view_hcp_survey_result loggedinmid search result hcp hospit id return bean.gethcphospit bean.gethcpspecialti retriev survey result given code param surveyresultbean contain survey result return a java.util.list survey result throw itrustexcept throw formvalidationexcept list surveyresultbean surveyresultbean bean throw itrustexcept formvalidationexcept bean transdao.logtransact transactiontype.view_hcp_survey_result loggedinmid search result hcp zip code return surveyresultdao.getsurveyresultsforzip bean.gethcpzip bean.gethcpspecialti 
packag edu.ncsu.csc.itrust.act import java.util.list import java.util.arraylist import import import import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.dao.mysql.patientdao import edu.ncsu.csc.itrust.dao.mysql.personneldao import edu.ncsu.csc.itrust.dao.mysql.officevisitdao edu.ncsu.csc.itrust.exception.dbexcept import edu.ncsu.csc.itrust.exception.itrustexcept action class viewvisitedhcps.jsp /public class viewvisitedhcpsact personneldao docdao officevisitdao visitdao patientdao patientdao arraylist hcpvisitbean visit declarehcpact declareact arraylist personnelbean filterlist set default factori daofactori use creat dao use action param loggedinmid mid person view hcp viewvisitedhcpsact daofactori factori patientmid loggedinmid docdao factory.getpersonneldao visitdao factory.getofficevisitdao patientdao factory.getpatientdao visit arraylist hcpvisitbean declareact declarehcpact factori loggedinmid filterlist arraylist personnelbean add offic visit array throw itrustexcept void processofficevisit throw itrustexcept tri officevisitbean ovlist visitdao.getallofficevisit patientmid list personnelbean dhcp patientdao.getdeclaredhcp tmp personnelbean pb arraylist personnelbean removeid arraylist personnelbean officevisitbean ovlist hcpvisitbean pb docdao.getpersonnel ov.gethcpid visitbean.sethcpmid visitbean.sethcpnam pb.getfullnam visitbean.setovd ov.getvisitdatestr visitbean.sethcpspecialti pb.getspecialti visitbean.sethcpaddr pb.getstreetaddress1 + + pb.getstreetaddress2 + + pb.getciti + pb.getstat + pb.getzip == tmp patientdao.checkdeclaredhcp patientmid tmp dhcps.isempti personnelbean hcp dhcp == removeids.add hcp pbean removeid dhcps.remov pbean personnelbean hcp dhcp hcpvisitbean visitbean.sethcpmid hcp.getmid visitbean.sethcpnam hcp.getfullnam visitbean.setovd visitbean.sethcpspecialti hcp.getspecialti visitbean.sethcpaddr hcp.getstreetaddress1 + + hcp.getstreetaddress2 + + hcp.getciti + hcp.getstat + + hcp.getzip visitbean.setdesign visitbean catch dbexcept throw itrustexcept dbe.getmessag return list visit hcp return list visit hcp list hcpvisitbean getvisitedhcp tri processofficevisit int visits.s i++ j i+1 j visits.s j++ visits.get .gethcpmid ==visits.get j .gethcpmid visits.remov visits.get j j catch itrustexcept ie return visit set given hcp param name hcp undeclar return string throw itrustexcept string undeclarehcp string name throw itrustexcept hcpvisitbean remov hcpvisitbean visit visit == visit.gethcpnam .tolowercas .compareto long long.valueof visit.gethcpmid //if patientdao.checkdeclaredhcp patientmid visit.gethcpmid mid.tostr visit.setdesign visit.getovd .compareto remov visit remov visits.remov remov return set given hcp declar name hcp declar return string throw itrustexcept string declarehcp string name throw itrustexcept match hcpvisitbean visit visit == visit.gethcpnam .tolowercas .compareto name.tolowercas match long mid long.valueof visit.gethcpmid patientdao.checkdeclaredhcp patientmid visit.gethcpmid mid.tostr visit.setdesign match personnelbean doclist docdao.getallpersonnel personnelbean ele doclist == name.compareto ele.getfullnam hcpvisitbean visitbean.sethcpmid ele.getmid visitbean.sethcpnam ele.getfullnam visitbean.setovd visitbean.sethcpspecialti ele.getspecialti visitbean.sethcpaddr ele.getstreetaddress1 + + ele.getstreetaddress2 + + ele.getc + ele.getst + + ele.getzip visitbean.setdesign long mid long.valueof ele.getmid patientmid mid mid.tostr return check see given hcp declar param mid hcp check return hcp declar boolean checkdeclar tri return patientdao.checkdeclaredhcp patientmid mid catch dbexcept dbe return filter list hcp name specialti zip code param doc sort name param specialti sort specialti param zip sort zip return sort hcp list personnelbean filterhcplist string doc string specialti string zip personnelbean doclist tri docdao.getallpersonnel personnelbean ele doclist .tolowercas .contain doc.tolowercas null specialti specialty.equ specialty.tolowercas .compareto ele.getspecialti .tolowercas zip zip.equ ele.getzip .contain zip.substr filterlist.add ele filterlist.add ele zip zip.equ ele.getzip .contain zip.substr filterlist.add ele filterlist.add ele catch dbexcept dbe return 
packag edu.ncsu.csc.itrust.bean store data flag offic visit a bean store data period littl function ad except format concaten phone number bean getter setter eclips hint use sourc gener getter setter creat class visitflag string diagnos diagnos string missed_med miss medic string missing_med current miss medic string last_visit visit string immun need immun string type string valu visitflag string type type visitflag string type string valu type this.valu valu string gettyp return type settyp string type type string getvalu return valu setvalu string valu valu
packag edu.ncsu.csc.itrust.beans.form import java.util.arraylist import edu.ncsu.csc.itrust.beans.visitflag form contain data come remind offic visit a form bean kinda say think form real-lif form fill get someth done make sens class visitreminderreturnform hcpid patientid string lastnam string firstnam string phonenumb arraylist visitflag visitflag visitreminderreturnform string lastnam string firstnam string phone1 string phone2 string phone3 hcpid this.patientid patientid this.lastnam lastnam this.firstnam setphonenumb phone1 phone2 phone3 return hcpid sethcpid hcpid return patientid setpatientid patientid string getlastnam return lastnam setlastnam string lastnam this.lastnam lastnam string getfirstnam return firstnam setfirstnam string firstnam this.firstnam firstnam string getphonenumb return phonenumb setphonenumb string phone1 string phone2 string phone3 this.phonenumb phone1 + phone2 + + phone3 visitflag getvisitflag return visitflag visitflags.s void setvisitflag visitflag visitflag this.visitflag arraylist visitflag visitflag flag visitflag this.visitflags.add flag addvisitflag visitflag flag == visitflag visitflag arraylist visitflag visitflags.add flag 
packag edu.ncsu.csc.itrust.beans.load import import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.beans.forms.visitreminderreturnform a loader visitreminderreturnform load inform to/from bean use resultset preparedstat use superclass enforc consist detail method see link beanload class visitreminderreturnformload implement beanload visitreminderreturnform list visitreminderreturnform loadlist resultset rs throw sqlexcept arraylist visitreminderreturnform list arraylist visitreminderreturnform rs.next loadsingl rs return list visitreminderreturnform loadsingl resultset rs throw sqlexcept int return visitreminderreturnform rs.getlong ++i hcpid rs.getlong ++i patient id rs.getstr ++i name rs.getstr ++i rs.getstr ++i phone1 rs.getstr ++i phone2 rs.getstr ++i phone3 diagnosi rs.getstr ++i visit rs.getstr ++i preparedstat loadparamet preparedstat ps visitreminderreturnform bean throw sqlexcept throw illegalstateexcept unimpl 
packag import java.sql.connect import java.sql.preparedstat import java.sql.resultset import java.sql.sqlexcept import java.util.arraylist import java.util.list import edu.ncsu.csc.itrust.dbutil import edu.ncsu.csc.itrust.dateutil import edu.ncsu.csc.itrust.beans.visitflag import edu.ncsu.csc.itrust.beans.forms.visitreminderreturnform import edu.ncsu.csc.itrust.beans.loaders.visitreminderreturnformload import edu.ncsu.csc.itrust.dao.daofactori import edu.ncsu.csc.itrust.exception.dbexcept use queri remind dao stand databas access object all dao intend reflect databas dao databas time set queri extra dao ad dao assum data valid dao setter paramet constructor factori all dao access daofactori see link daofactori dao factori obtain jdbc connect and/or access dao author andi /public class visitremindersdao daofactori factori constructor param factori link daofactori associ dao use obtain sql connect etc visitremindersdao daofactori factori factori return list patient associ given hcp param hcpid mid hcp question return a visit remind form list visitreminderreturnform getpati throw dbexcept visitreminderreturnform temp visitreminderreturnformload visitreminderreturnformload list visitreminderreturnform patient arraylist visitreminderreturnform connect conn preparedstat ps null resultset rs tri factory.getconnect ps conn.preparestat select distinct + dhcp.patientid p.lastnam p.firstnam patient dhcp where + dhcp.patientid p.dateofdeath date_sub curdat interv year rs ps.executequeri rs.next loader.loadsingl rs patients.add temp catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return patient return list patient need hcp mean patient offic visit yr diagnos diabet diseas param hcpid mid hcp question return a visit remind list visitreminderreturnform getdiagnosedvisitneed throw dbexcept connect conn preparedstat ps null resultset rs tri factory.getconnect ps conn.preparestat select distinct + p.lastnam p.firstnam patient officevisit + ovdiagnosi + where + ov.patientid ovd.visitid p.dateofdeath date_sub curdat interv year + + ovd.icdcod between and //250.00 + or ovd.icdcod between and //390.00 + or ovd.icdcod between and //493.00 + + group by + p.mid order by + p.lastnam p.firstnam ps.setfloat ps.setfloat ps.setfloat ps.setfloat ps.setfloat ps.setfloat rs ps.executequeri list visitreminderreturnform patient arraylist visitreminderreturnform visitreminderreturnform temp visitreminderreturnformload loader visitreminderreturnformload rs.next loader.loadsingl rs temp.addvisitflag visitflag visitflag.diagnos rs.getstr visitflag visitflag.last_visit rs.getstr temp return patient catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps return peopl need current spec aliv patient year flu shot month calendar year month calendar year determin date call method method return set peopl peopl flu shot year need peopl miss year flu shot return a java.util.list visit remind form param hcpid mid hcp question param question throw dbexcept list visitreminderreturnform getflushotdelinqu throw dbexcept connect conn preparedstat ps null resultset rs fall bug fix use rang calendar eg januari dateutil.currentlyinmonthrang string visitflag.missing_med visitflag.missed_med java.sql.d septemb java.sql.d java.sql.d dateutil.setsqlmonthrang septemb decemb tri factory.getconnect ps conn.preparestat select distinct + p.lastnam p.firstnam p.phone2 p.phone3 from officevisit ov patient + where + and p.dateofdeath is null + and p.dateofbirth date_sub curdat interv year and patientid not in + select patientid from officevisit ovmed where + and ndcode in startdat between and + or enddat between and + order by lastnam firstnam ov.patientid ps.setdat septemb ps.setdat decemb ps.setdat septemb ps.setdat decemb rs ps.executequeri list visitreminderreturnform patient arraylist visitreminderreturnform visitreminderreturnform temp visitreminderreturnformload loader visitreminderreturnformload rs.next loader.loadsingl rs temp.addvisitflag visitflag flagtyp flu shot patients.add temp return patient catch sqlexcept e.printstacktrac throw dbexcept e dbutil.closeconnect conn ps 
packag edu.ncsu.csc.itrust.risk.factor import check patient bodi mass index given threshold see link patientriskfactor detail method andi /public class weightfactor extend patientriskfactor healthrecord currenthealthrecord int bmithreshold weightfactor healthrecord currenthealthrecord int bmithreshold this.currenthealthrecord currenthealthrecord this.bmithreshold bmithreshold string getdescript return patient bodi mass index bmithreshold hasfactor bmi currenthealthrecord.getbodymassindex return double.isinfinit bmi 
